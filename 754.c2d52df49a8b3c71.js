"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[754],{5056:(f,h,l)=>{l.d(h,{L:()=>e});var c=l(9085),_=l(6052),u=l(5113);let e=(()=>{class d{http;constructor(i){this.http=i}addJob(i,p){const a=(new c.Lr).set("Authorization",`Bearer ${p}`);return this.http.post(`${_.c.apiUrl}/addJob`,i,{headers:a})}getJobSummaries(i,p){const a=(new c.Lr).set("Authorization",`Bearer ${p}`);return this.http.get(`${_.c.apiUrl}/employer/${i}/jobs-summary`,{headers:a})}getJobById(i,p){const a=(new c.Lr).set("Authorization",`Bearer ${p}`);return this.http.get(`${_.c.apiUrl}/getJobById/${i}`,{headers:a})}getJobs(i,p){const a=(new c.Lr).set("Authorization",`Bearer ${p}`);return this.http.get(`${_.c.apiUrl}/getJobs/${i}`,{headers:a})}updateJob(i,p,a){const m=(new c.Lr).set("Authorization",`Bearer ${a}`);return this.http.put(`${_.c.apiUrl}/updateJob/${i}`,p,{headers:m})}deleteJob(i,p){const a=(new c.Lr).set("Authorization",`Bearer ${p}`);return this.http.delete(`${_.c.apiUrl}/deleteJob/${i}`,{headers:a})}appliedJobs(i){return this.http.get(`${_.c.apiUrl}/appliedJobs/${i}`)}searchJobs(){return this.http.get(`${_.c.apiUrl}/searchJobs`)}searchJobsWithFilter(i){return this.http.get(`${_.c.apiUrl}/searchJobs?${i}`)}static \u0275fac=function(p){return new(p||d)(u.KVO(c.Qq))};static \u0275prov=u.jDH({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()},9754:(f,h,l)=>{l.r(h),l.d(h,{AppliedJobsComponent:()=>I});var c=l(6396),_=l(6217),u=l(1249),e=l(7325),d=l(5113),b=l(9973),i=l(7355),p=l(4666),a=l(5056);function m(o,r){1&o&&(e.j41(0,"div",7),e.nrm(1,"div",8),e.j41(2,"div",9),e.EFF(3,"Loading applied jobs..."),e.k0s()())}function v(o,r){1&o&&(e.j41(0,"div",10),e.EFF(1," You haven't applied to any jobs yet. "),e.k0s())}function F(o,r){if(1&o){const t=e.RV6();e.j41(0,"div",12),e.bIt("click",function(){const n=d.eBV(t).$implicit,g=e.XpG(2);return d.Njj(g.openJobModal(n))}),e.j41(1,"h3"),e.EFF(2),e.k0s(),e.j41(3,"p")(4,"strong"),e.EFF(5,"Company:"),e.k0s(),e.EFF(6),e.k0s(),e.j41(7,"p")(8,"strong"),e.EFF(9,"Location:"),e.k0s(),e.EFF(10),e.k0s(),e.j41(11,"p")(12,"strong"),e.EFF(13,"Status:"),e.k0s(),e.EFF(14),e.k0s(),e.j41(15,"p")(16,"strong"),e.EFF(17,"Applied On:"),e.k0s(),e.EFF(18),e.nI1(19,"date"),e.k0s(),e.j41(20,"div",13)(21,"p")(22,"strong"),e.EFF(23,"Description:"),e.k0s(),e.EFF(24),e.k0s()(),e.j41(25,"button",14),e.bIt("click",function(n){const g=d.eBV(t).$implicit;return e.XpG(2).revokeApplication(g._id),d.Njj(n.stopPropagation())}),e.EFF(26," Revoke Application "),e.k0s()()}if(2&o){const t=r.$implicit;e.R7$(2),e.JRh(t.title),e.R7$(4),e.SpI(" ",t.company),e.R7$(4),e.SpI(" ",t.location),e.R7$(4),e.SpI(" ",t.status||"Under Review"),e.R7$(4),e.SpI(" ",e.i5U(19,6,t.createdAt,"mediumDate")),e.R7$(6),e.SpI(" ",(null==t.description?null:t.description.overview)||"No description available.")}}function k(o,r){if(1&o&&(e.j41(0,"div"),e.DNE(1,F,27,9,"div",11),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.appliedJobs)}}function C(o,r){if(1&o&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&o){const t=r.$implicit;e.R7$(),e.JRh(t)}}function E(o,r){if(1&o&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&o){const t=r.$implicit;e.R7$(),e.JRh(t)}}function J(o,r){1&o&&(e.j41(0,"p")(1,"strong"),e.EFF(2,"Preferred Skills:"),e.k0s()())}function O(o,r){if(1&o&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&o){const t=r.$implicit;e.R7$(),e.JRh(t)}}function M(o,r){if(1&o&&(e.j41(0,"ul"),e.DNE(1,O,2,1,"li",18),e.k0s()),2&o){const t=e.XpG(3);e.R7$(),e.Y8G("ngForOf",t.selectedJob.description.preferredSkills)}}function j(o,r){1&o&&(e.j41(0,"p")(1,"strong"),e.EFF(2,"What We Offer:"),e.k0s()())}function A(o,r){if(1&o&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&o){const t=r.$implicit;e.R7$(),e.JRh(t)}}function $(o,r){if(1&o&&(e.j41(0,"ul"),e.DNE(1,A,2,1,"li",18),e.k0s()),2&o){const t=e.XpG(3);e.R7$(),e.Y8G("ngForOf",t.selectedJob.description.whatWeOffer)}}function R(o,r){if(1&o&&(e.j41(0,"div")(1,"p")(2,"strong"),e.EFF(3,"Overview:"),e.k0s()(),e.j41(4,"p"),e.EFF(5),e.k0s(),e.j41(6,"p")(7,"strong"),e.EFF(8,"Responsibilities:"),e.k0s()(),e.j41(9,"ul"),e.DNE(10,C,2,1,"li",18),e.k0s(),e.j41(11,"p")(12,"strong"),e.EFF(13,"Required Skills:"),e.k0s()(),e.j41(14,"ul"),e.DNE(15,E,2,1,"li",18),e.k0s(),e.DNE(16,J,3,0,"p",5)(17,M,2,1,"ul",5)(18,j,3,0,"p",5)(19,$,2,1,"ul",5),e.k0s()),2&o){const t=e.XpG(2);e.R7$(5),e.JRh(t.selectedJob.description.overview),e.R7$(5),e.Y8G("ngForOf",t.selectedJob.description.responsibilities),e.R7$(5),e.Y8G("ngForOf",t.selectedJob.description.requiredSkills),e.R7$(),e.Y8G("ngIf",null==t.selectedJob.description.preferredSkills?null:t.selectedJob.description.preferredSkills.length),e.R7$(),e.Y8G("ngIf",null==t.selectedJob.description.preferredSkills?null:t.selectedJob.description.preferredSkills.length),e.R7$(),e.Y8G("ngIf",null==t.selectedJob.description.whatWeOffer?null:t.selectedJob.description.whatWeOffer.length),e.R7$(),e.Y8G("ngIf",null==t.selectedJob.description.whatWeOffer?null:t.selectedJob.description.whatWeOffer.length)}}function P(o,r){if(1&o){const t=e.RV6();e.j41(0,"div",15)(1,"div",16)(2,"span",17),e.bIt("click",function(){d.eBV(t);const n=e.XpG();return d.Njj(n.closeModal())}),e.EFF(3,"\xd7"),e.k0s(),e.j41(4,"h2"),e.EFF(5),e.k0s(),e.j41(6,"p")(7,"strong"),e.EFF(8,"Company:"),e.k0s(),e.EFF(9),e.k0s(),e.j41(10,"p")(11,"strong"),e.EFF(12,"Employer Name:"),e.k0s(),e.EFF(13),e.k0s(),e.j41(14,"p")(15,"strong"),e.EFF(16,"Location:"),e.k0s(),e.EFF(17),e.k0s(),e.j41(18,"p")(19,"strong"),e.EFF(20,"Type:"),e.k0s(),e.EFF(21),e.k0s(),e.j41(22,"p")(23,"strong"),e.EFF(24,"Salary:"),e.k0s(),e.EFF(25),e.k0s(),e.j41(26,"p")(27,"strong"),e.EFF(28,"Experience Required:"),e.k0s(),e.EFF(29),e.k0s(),e.j41(30,"p")(31,"strong"),e.EFF(32,"Vacancies:"),e.k0s(),e.EFF(33),e.k0s(),e.j41(34,"p")(35,"strong"),e.EFF(36,"Status:"),e.k0s(),e.EFF(37),e.k0s(),e.DNE(38,R,20,7,"div",5),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(5),e.JRh(t.selectedJob.title),e.R7$(4),e.SpI(" ",t.selectedJob.company),e.R7$(4),e.SpI(" ",t.selectedJob.employerName),e.R7$(4),e.SpI(" ",t.selectedJob.location),e.R7$(4),e.SpI(" ",t.selectedJob.type),e.R7$(4),e.SpI(" \u20b9",t.selectedJob.salary," LPA"),e.R7$(4),e.SpI(" ",t.selectedJob.experience," Years"),e.R7$(4),e.SpI(" ",t.selectedJob.vacancies),e.R7$(4),e.SpI(" ",t.selectedJob.status),e.R7$(),e.Y8G("ngIf",t.selectedJob.description)}}let I=(()=>{class o{applicationService;authService;userService;jobService;user=null;savedJobs=[];appliedJobs=[];userId=null;token=null;selectedJob=null;showModal=!1;loading=!0;alertMessage="";alertType="info";showAlert=!1;navigateAfterAlert=!1;confirmMessage="";showConfirm=!1;applicationIdToBeDeleted="";jobIdToBeDeleted="";showCustomAlert(t,s,n=!1){console.log("Alert Triggered:",{message:t,type:s}),this.alertMessage=t,this.alertType=s,this.showAlert=!0,this.navigateAfterAlert=n}onAlertClosed(){this.showAlert=!1}constructor(t,s,n,g){this.applicationService=t,this.authService=s,this.userService=n,this.jobService=g}ngOnInit(){this.loadUserData(),this.token=this.authService.getToken()}loadUserData(){if(typeof window<"u"){const t=this.authService.getUser();t&&"null"!==t?(this.userId=t._id,this.userService.getUserData(this.userId).subscribe({next:s=>{this.user=s.user,console.log("User data:",this.user),this.loadAppliedJobs()},error:s=>{console.error("Failed to load user data:",s)}})):console.warn("No valid user in localStorage.")}}loadAppliedJobs(){this.userId&&(this.loading=!0,this.jobService.appliedJobs(this.userId).subscribe({next:t=>{this.appliedJobs=t.jobs||t,console.log("Applied jobs:",this.appliedJobs),this.loading=!1},error:t=>{console.error("Failed to load applied jobs:",t),this.loading=!1}}))}openJobModal(t){this.selectedJob=t,this.showModal=!0,console.log("Job clicked:",t)}closeModal(){this.selectedJob=null,this.showModal=!1}revokeApplication(t){if(!t)return;const s=this.appliedJobs.find(n=>n._id===t);s?(this.applicationIdToBeDeleted=s.applicationId,this.jobIdToBeDeleted=t,this.confirmMessage="Are you sure you want to revoke your application for this job?",this.showConfirm=!0):this.showCustomAlert("Application not found!","info")}onConfirmRevoke(){!this.applicationIdToBeDeleted||!this.token||this.applicationService.revokeApplication(this.applicationIdToBeDeleted,this.token).subscribe({next:()=>{this.showCustomAlert("Application revoked successfully!","success"),this.appliedJobs=this.appliedJobs.filter(t=>t._id!==this.jobIdToBeDeleted),this.resetConfirmState()},error:t=>{console.error("Error revoking application:",t),this.showCustomAlert(`Failed to revoke application: ${t.error?.message||"Unknown error"}`,"error"),this.resetConfirmState()}})}onCancelConfirm(){this.resetConfirmState()}resetConfirmState(){this.showConfirm=!1,this.confirmMessage="",this.applicationIdToBeDeleted="",this.jobIdToBeDeleted=""}static \u0275fac=function(s){return new(s||o)(e.rXU(b.m),e.rXU(i.u),e.rXU(p.D),e.rXU(a.L))};static \u0275cmp=e.VBU({type:o,selectors:[["app-applied-jobs"]],decls:9,vars:9,consts:[[3,"closed","message","type","show"],[3,"confirmed","cancelled","message","show"],[1,"applied-jobs-container"],["class","apinner-container",4,"ngIf"],["class","empty-message",4,"ngIf"],[4,"ngIf"],["class","modal",4,"ngIf"],[1,"apinner-container"],[1,"spinner"],[1,"loading-text"],[1,"empty-message"],["class","job-card",3,"click",4,"ngFor","ngForOf"],[1,"job-card",3,"click"],[1,"description"],[1,"revoke-btn",3,"click"],[1,"modal"],[1,"modal-content"],[1,"close-btn",3,"click"],[4,"ngFor","ngForOf"]],template:function(s,n){1&s&&(e.j41(0,"app-alert",0),e.bIt("closed",function(){return n.onAlertClosed()}),e.k0s(),e.j41(1,"app-confirm",1),e.bIt("confirmed",function(){return n.onConfirmRevoke()})("cancelled",function(){return n.onCancelConfirm()}),e.k0s(),e.j41(2,"div",2)(3,"h2"),e.EFF(4,"Your Applied Jobs"),e.k0s(),e.DNE(5,m,4,0,"div",3)(6,v,2,0,"div",4)(7,k,2,1,"div",5),e.k0s(),e.DNE(8,P,39,10,"div",6)),2&s&&(e.Y8G("message",n.alertMessage)("type",n.alertType)("show",n.showAlert),e.R7$(),e.Y8G("message",n.confirmMessage)("show",n.showConfirm),e.R7$(4),e.Y8G("ngIf",n.loading),e.R7$(),e.Y8G("ngIf",!n.loading&&0===n.appliedJobs.length),e.R7$(),e.Y8G("ngIf",!n.loading&&n.appliedJobs.length>0),e.R7$(),e.Y8G("ngIf",n.showModal))},dependencies:[c.MD,c.Sq,c.bT,c.vh,_.C,u.Y],styles:[".applied-jobs-container[_ngcontent-%COMP%]{padding:2rem;max-width:900px;margin:auto}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;color:#333}.empty-message[_ngcontent-%COMP%]{text-align:center;font-size:1.1rem;color:#777}.spinner-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1rem;padding:1rem;font-weight:700;color:#555}.spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:4px solid #ccc;border-top:4px solid #555;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-text[_ngcontent-%COMP%]{font-size:1rem}.job-card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;padding:1.5rem;border-radius:12px;box-shadow:0 4px 8px #0000000d;margin-bottom:1.5rem;transition:box-shadow .3s ease;cursor:pointer}.job-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 16px #0000001a}.job-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#2a4d9b}.job-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.3rem 0;color:#555}.description[_ngcontent-%COMP%]{margin-top:1rem;color:#444}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000073;display:flex;align-items:center;justify-content:center;z-index:2000;padding:16px}.modal-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;max-width:600px;width:100%;max-height:90vh;overflow-y:auto;padding:24px;position:relative;box-shadow:0 6px 18px #00000040}.close-btn[_ngcontent-%COMP%]{position:absolute;top:12px;right:16px;font-size:26px;color:#888;cursor:pointer;font-weight:700}.close-btn[_ngcontent-%COMP%]:hover{color:#000}.modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:#0073e6}.modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;font-size:15px}.modal-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:20px;margin:10px 0}.modal-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:6px}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px;padding:10px 16px;background-color:#0073e6;color:#fff;border:none;border-radius:6px;font-weight:500;cursor:pointer;transition:background-color .2s}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#005bb5}@media (max-width: 600px){.filters[_ngcontent-%COMP%]{grid-template-columns:1fr}}.revoke-btn[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff;padding:.5rem 1rem;margin-top:1rem;border:none;border-radius:6px;cursor:pointer;font-weight:700;transition:background-color .2s ease}.revoke-btn[_ngcontent-%COMP%]:hover{background-color:#c0392b}"]})}return o})()}}]);