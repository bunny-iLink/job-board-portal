<div *ngIf="loading" class="loading">Loading profile...</div>
<div *ngIf="error" class="error">{{ error }}</div>

<div class="profile-container">
    <form *ngIf="!loading && !error" (ngSubmit)="updateProfile()">
        <h2>Employer Profile</h2>

        <!-- Profile Picture Display and Upload -->
        <div class="profile-picture-section">
            <div class="current-picture">
                <img *ngIf="employer?.profilePicture?.data && employer?.profilePicture?.contentType"
                    [src]="'data:' + employer.profilePicture.contentType + ';base64,' + employer.profilePicture.data"
                    alt="Profile Picture" class="profile-picture" />

                <div *ngIf="!employer?.profilePicture?.data" class="no-picture">
                    No profile picture
                </div>
            </div>

            <div class="upload-section">
                <input type="file" (change)="onProfilePictureSelected($event)" accept="image/*" />
            </div>
        </div>

        <!-- Profile Information -->
        <label>
            Name:
            <input type="text" [(ngModel)]="employer.name" name="name" required />
        </label>

        <label>
            Email:
            <input type="email" [(ngModel)]="employer.email" name="email" required />
        </label>

        <label>
            Password:
            <input type="password" [(ngModel)]="employer.password" name="password" />
        </label>

        <label>
            Role:
            <input type="text" [(ngModel)]="employer.role" name="role" readonly />
        </label>

        <label>
            Company:
            <input type="text" [(ngModel)]="employer.company" name="companyName" />
        </label>

        <label>
            Experience (years):
            <input type="number" [(ngModel)]="employer.experience" name="experience" />
        </label>

        <label>
            Designation:
            <input type="text" [(ngModel)]="employer.designation" name="designation" />
        </label>

        <label>
            Domain:
            <select [(ngModel)]="employer.domain" name="domain">
                <option value="">Select preferred domain</option>
                <option value="Technology & IT">Technology & IT</option>
                <option value="Sales & Marketing">Sales & Marketing</option>
                <option value="Business & Management">Business & Management</option>
                <option value="Finance & Accounting">Finance & Accounting</option>
                <option value="Human Resources & Recruitment">Human Resources & Recruitment</option>
                <option value="Healthcare & Life Sciences">Healthcare & Life Sciences</option>
                <option value="Education & Training">Education & Training</option>
                <option value="Engineering & Manufacturing">Engineering & Manufacturing</option>
                <option value="Creative & Design">Creative & Design</option>
                <option value="Legal & Compliance">Legal & Compliance</option>
                <option value="Media & Communication">Media & Communication</option>
                <option value="Logistics & Supply Chain">Logistics & Supply Chain</option>
                <option value="Customer Service & Support">Customer Service & Support</option>
            </select>
        </label>

        <div class="buttons">
            <button type="submit">Save Changes</button>
            <button type="button" (click)="deleteProfile()" class="delete-btn">
                Delete Profile
            </button>
        </div>

        <div *ngIf="success" class="success">{{ success }}</div>
    </form>
</div>