<!-- Main container -->
<div class="dashboard-container">

    <!-- Loading user data -->
    <div *ngIf="loadingUserData" class="loading-container">
        <p>Loading user data...</p>
    </div>

    <!-- Fallback message ONLY if user loading has been tried and failed -->
    <div *ngIf="!loadingUserData && hasTriedLoadingUser && !user" class="no-user">
        <p>Unable to load user data.</p>
    </div>

    <!-- Display user info -->
    <header class="dashboard-header" *ngIf="!loadingUserData && user">
        <h1>Welcome, {{ user.name }}</h1>
        <p><strong>Email:</strong> {{ user.email }}</p>
    </header>


    <!-- Loading applied jobs -->
    <div *ngIf="loadingUserAppliedJobs" class="loading-container">
        <p>Loading your applied jobs...</p>
    </div>

    <!-- Applied jobs section -->
    <section class="applied-jobs" *ngIf="!loadingUserAppliedJobs && appliedJobs.length > 0">
        <h2>Your Applied Jobs</h2>
        <table class="job-table">
            <thead>
                <tr>
                    <th>Job Title</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let job of appliedJobs">
                    <td>{{ job.title }}</td>
                    <td>
                        <span [ngClass]="{
              'accepted': job.status === 'Accepted',
              'rejected': job.status === 'Rejected',
              'in-progress': job.status === 'In Progress'
            }">
                            {{ job.status }}
                        </span>
                    </td>
                </tr>
            </tbody>
        </table>
    </section>

    <!-- Message if no applied jobs -->
    <div *ngIf="!loadingUserAppliedJobs && appliedJobs.length === 0 && user" class="not-applied">
        <p>You havenâ€™t applied for any jobs yet.</p>
    </div>
</div>