"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[148],{8148:(T,h,a)=>{a.r(h),a.d(h,{SearchJobsComponent:()=>R});var _=a(6396),p=a(4341),g=a(6217),f=a(1249),e=a(7325),d=a(5113),m=a(5056),u=a(7355),b=a(9973);function C(o,l){1&o&&(e.j41(0,"div",18)(1,"p"),e.EFF(2," Please "),e.j41(3,"strong"),e.EFF(4,"set your preferred domain"),e.k0s(),e.EFF(5," in your profile, or "),e.j41(6,"strong"),e.EFF(7,"use the search box or filters"),e.k0s(),e.EFF(8," to find relevant jobs. "),e.k0s()())}function F(o,l){1&o&&(e.j41(0,"div",19),e.nrm(1,"div",20),e.j41(2,"div"),e.EFF(3,"Loading jobs, please wait..."),e.k0s()())}function M(o,l){if(1&o){const n=e.RV6();e.j41(0,"div",21),e.bIt("click",function(){const t=d.eBV(n).$implicit,s=e.XpG();return d.Njj(s.openJobModal(t))}),e.j41(1,"h4"),e.EFF(2),e.k0s(),e.j41(3,"p")(4,"strong"),e.EFF(5),e.k0s(),e.EFF(6),e.k0s(),e.j41(7,"p"),e.EFF(8),e.k0s()()}if(2&o){const n=l.$implicit;e.R7$(2),e.JRh(n.title),e.R7$(3),e.JRh(n.company),e.R7$(),e.SpI(" - ",n.location),e.R7$(2),e.Lme("",n.type," | ",n.salary," LPA")}}function J(o,l){if(1&o&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&o){const n=l.$implicit;e.R7$(),e.JRh(n)}}function x(o,l){if(1&o&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&o){const n=l.$implicit;e.R7$(),e.JRh(n)}}function E(o,l){1&o&&(e.j41(0,"p")(1,"strong"),e.EFF(2,"Preferred Skills:"),e.k0s()())}function S(o,l){if(1&o&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&o){const n=l.$implicit;e.R7$(),e.JRh(n)}}function v(o,l){if(1&o&&(e.j41(0,"ul"),e.DNE(1,S,2,1,"li",27),e.k0s()),2&o){const n=e.XpG(3);e.R7$(),e.Y8G("ngForOf",n.selectedJob.description.preferredSkills)}}function k(o,l){1&o&&(e.j41(0,"p")(1,"strong"),e.EFF(2,"What We Offer:"),e.k0s()())}function j(o,l){if(1&o&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&o){const n=l.$implicit;e.R7$(),e.JRh(n)}}function O(o,l){if(1&o&&(e.j41(0,"ul"),e.DNE(1,j,2,1,"li",27),e.k0s()),2&o){const n=e.XpG(3);e.R7$(),e.Y8G("ngForOf",n.selectedJob.description.whatWeOffer)}}function P(o,l){if(1&o&&(e.j41(0,"div")(1,"p")(2,"strong"),e.EFF(3,"Overview:"),e.k0s()(),e.j41(4,"p"),e.EFF(5),e.k0s(),e.j41(6,"p")(7,"strong"),e.EFF(8,"Responsibilities:"),e.k0s()(),e.j41(9,"ul"),e.DNE(10,J,2,1,"li",27),e.k0s(),e.j41(11,"p")(12,"strong"),e.EFF(13,"Required Skills:"),e.k0s()(),e.j41(14,"ul"),e.DNE(15,x,2,1,"li",27),e.k0s(),e.DNE(16,E,3,0,"p",25)(17,v,2,1,"ul",25)(18,k,3,0,"p",25)(19,O,2,1,"ul",25),e.k0s()),2&o){const n=e.XpG(2);e.R7$(5),e.JRh(n.selectedJob.description.overview),e.R7$(5),e.Y8G("ngForOf",n.selectedJob.description.responsibilities),e.R7$(5),e.Y8G("ngForOf",n.selectedJob.description.requiredSkills),e.R7$(),e.Y8G("ngIf",null==n.selectedJob.description.preferredSkills?null:n.selectedJob.description.preferredSkills.length),e.R7$(),e.Y8G("ngIf",null==n.selectedJob.description.preferredSkills?null:n.selectedJob.description.preferredSkills.length),e.R7$(),e.Y8G("ngIf",null==n.selectedJob.description.whatWeOffer?null:n.selectedJob.description.whatWeOffer.length),e.R7$(),e.Y8G("ngIf",null==n.selectedJob.description.whatWeOffer?null:n.selectedJob.description.whatWeOffer.length)}}function y(o,l){if(1&o){const n=e.RV6();e.j41(0,"div",22)(1,"div",23)(2,"span",24),e.bIt("click",function(){d.eBV(n);const t=e.XpG();return d.Njj(t.closeModal())}),e.EFF(3,"\xd7"),e.k0s(),e.j41(4,"h2"),e.EFF(5),e.k0s(),e.j41(6,"p")(7,"strong"),e.EFF(8,"Company:"),e.k0s(),e.EFF(9),e.k0s(),e.j41(10,"p")(11,"strong"),e.EFF(12,"Employer Name:"),e.k0s(),e.EFF(13),e.k0s(),e.j41(14,"p")(15,"strong"),e.EFF(16,"Location:"),e.k0s(),e.EFF(17),e.k0s(),e.j41(18,"p")(19,"strong"),e.EFF(20,"Type:"),e.k0s(),e.EFF(21),e.k0s(),e.j41(22,"p")(23,"strong"),e.EFF(24,"Salary:"),e.k0s(),e.EFF(25),e.k0s(),e.j41(26,"p")(27,"strong"),e.EFF(28,"Experience Required:"),e.k0s(),e.EFF(29),e.k0s(),e.j41(30,"p")(31,"strong"),e.EFF(32,"Vacancies:"),e.k0s(),e.EFF(33),e.k0s(),e.j41(34,"p")(35,"strong"),e.EFF(36,"Status:"),e.k0s(),e.EFF(37),e.k0s(),e.DNE(38,P,20,7,"div",25),e.j41(39,"button",26),e.bIt("click",function(){d.eBV(n);const t=e.XpG();return d.Njj(t.applyToJob(t.selectedJob))}),e.EFF(40,"Apply"),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(5),e.JRh(n.selectedJob.title),e.R7$(4),e.SpI(" ",n.selectedJob.company),e.R7$(4),e.SpI(" ",n.selectedJob.employerName),e.R7$(4),e.SpI(" ",n.selectedJob.location),e.R7$(4),e.SpI(" ",n.selectedJob.type),e.R7$(4),e.SpI(" \u20b9",n.selectedJob.salary," LPA"),e.R7$(4),e.SpI(" ",n.selectedJob.experience," Years"),e.R7$(4),e.SpI(" ",n.selectedJob.vacancies),e.R7$(4),e.SpI(" ",n.selectedJob.status),e.R7$(),e.Y8G("ngIf",n.selectedJob.description)}}let R=(()=>{class o{jobService;authService;applicationService;allJobs=[];filteredJobs=[];searchTerm="";selectedJob=null;token=null;showModal=!1;showDomainWarning=!1;loadingJobs=!1;filters={type:"",experience:"",expectedSalary:""};alertMessage="";alertType="info";showAlert=!1;navigateAfterAlert=!1;confirmMessage="";showConfirm=!1;pendingJobApplication=null;constructor(n,i,t){this.jobService=n,this.authService=i,this.applicationService=t}ngOnInit(){this.searchJobs(),this.token=this.authService.getToken()}isBrowser(){return typeof window<"u"}getStoredUser(){return this.isBrowser()?this.authService.getUser():null}searchJobs(){const n=this.getStoredUser();if(!n)return void console.warn("User not found in localStorage");this.loadingJobs=!0;const i=this.filters.type||this.filters.experience||this.filters.expectedSalary,t=this.searchTerm.trim().length>0,s=n.preferredDomain?.trim().length>0;if(!i&&!t&&!s)return this.showDomainWarning=!0,void this.jobService.searchJobs().subscribe({next:c=>{this.allJobs=c,this.filteredJobs=[...c],this.loadingJobs=!1},error:c=>{console.error("Error fetching all jobs:",c),this.loadingJobs=!1}});this.showDomainWarning=!1;const r={userId:n._id,domain:n.preferredDomain,search:this.searchTerm.trim()};this.filters.type&&(r.type=this.filters.type),this.filters.experience&&(r.experience=this.filters.experience),this.filters.expectedSalary&&(r.expectedSalary=this.filters.expectedSalary);const w=new URLSearchParams(r).toString();this.jobService.searchJobsWithFilter(w).subscribe({next:c=>{this.allJobs=c,this.filteredJobs=[...c],this.loadingJobs=!1},error:c=>{console.error("Error fetching jobs:",c),this.loadingJobs=!1}})}openJobModal(n){this.selectedJob=n,this.showModal=!0}closeModal(){this.selectedJob=null,this.showModal=!1}applyToJob(n){const i=this.getStoredUser();if(!i)return void this.showCustomAlert("Please log in to apply.","info");if(!i?.name?.trim()||!i?.email?.trim()||!i?.resume?.data)return void this.showCustomAlert("Please complete your profile (name, email, and resume are required) before applying.","info");const s=["phone","address","experience","preferredDomain"].filter(r=>!i[r]);if(s.length>0)return this.confirmMessage=`Your profile is missing recommended info (${s.join(", ")}). Apply anyway?`,this.pendingJobApplication=n,void(this.showConfirm=!0);this.submitApplication(n)}onConfirmApply(){this.pendingJobApplication&&(this.submitApplication(this.pendingJobApplication),this.resetConfirmState())}onCancelConfirm(){this.resetConfirmState(),this.closeModal()}resetConfirmState(){this.showConfirm=!1,this.confirmMessage="",this.pendingJobApplication=null}submitApplication(n){const i=this.getStoredUser();i&&this.token&&this.applicationService.applyForJob({userId:i._id,jobId:n._id},this.token).subscribe({next:s=>{this.showCustomAlert(s.message||"Application submitted!","success"),this.closeModal(),this.searchJobs()},error:s=>{409===s.status?this.showCustomAlert("You have already applied to this job.","info"):(console.error("Application error:",s),this.showCustomAlert("Failed to apply.","error")),this.closeModal()}})}showCustomAlert(n,i,t=!1){this.alertMessage=n,this.alertType=i,this.showAlert=!0,this.navigateAfterAlert=t}onAlertClosed(){this.showAlert=!1}static \u0275fac=function(i){return new(i||o)(e.rXU(m.L),e.rXU(u.u),e.rXU(b.m))};static \u0275cmp=e.VBU({type:o,selectors:[["app-search-jobs"]],decls:29,vars:13,consts:[[3,"closed","message","type","show"],[3,"confirmed","cancelled","show","message"],[1,"search-container"],["placeholder","Search jobs...",3,"ngModelChange","input","ngModel"],[1,"filters"],[3,"ngModelChange","change","ngModel"],["value",""],["value","Full-Time"],["value","Part-Time"],["value","Internship"],["value","Remote"],["type","number","placeholder","Years",3,"ngModelChange","input","ngModel"],["type","number",3,"ngModelChange","input","ngModel"],["class","warning-message",4,"ngIf"],["class","spinner-container",4,"ngIf"],[1,"jobs-grid"],["class","job-card",3,"click",4,"ngFor","ngForOf"],["class","modal",4,"ngIf"],[1,"warning-message"],[1,"spinner-container"],[1,"spinner"],[1,"job-card",3,"click"],[1,"modal"],[1,"modal-content"],[1,"close-btn",3,"click"],[4,"ngIf"],[3,"click"],[4,"ngFor","ngForOf"]],template:function(i,t){1&i&&(e.j41(0,"app-alert",0),e.bIt("closed",function(){return t.onAlertClosed()}),e.k0s(),e.j41(1,"app-confirm",1),e.bIt("confirmed",function(){return t.onConfirmApply()})("cancelled",function(){return t.onCancelConfirm()}),e.k0s(),e.j41(2,"div",2)(3,"input",3),e.mxI("ngModelChange",function(r){return e.DH7(t.searchTerm,r)||(t.searchTerm=r),r}),e.bIt("input",function(){return t.searchJobs()}),e.k0s(),e.j41(4,"div",4)(5,"label"),e.EFF(6,"Type: "),e.j41(7,"select",5),e.mxI("ngModelChange",function(r){return e.DH7(t.filters.type,r)||(t.filters.type=r),r}),e.bIt("change",function(){return t.searchJobs()}),e.j41(8,"option",6),e.EFF(9,"All"),e.k0s(),e.j41(10,"option",7),e.EFF(11,"Full-Time"),e.k0s(),e.j41(12,"option",8),e.EFF(13,"Part-Time"),e.k0s(),e.j41(14,"option",9),e.EFF(15,"Internship"),e.k0s(),e.j41(16,"option",10),e.EFF(17,"Remote"),e.k0s()()(),e.j41(18,"label"),e.EFF(19,"Experience (in Years): "),e.j41(20,"input",11),e.mxI("ngModelChange",function(r){return e.DH7(t.filters.experience,r)||(t.filters.experience=r),r}),e.bIt("input",function(){return t.searchJobs()}),e.k0s()(),e.j41(21,"label"),e.EFF(22,"Expected Salary (in LPA): "),e.j41(23,"input",12),e.mxI("ngModelChange",function(r){return e.DH7(t.filters.expectedSalary,r)||(t.filters.expectedSalary=r),r}),e.bIt("input",function(){return t.searchJobs()}),e.k0s()()(),e.DNE(24,C,9,0,"div",13)(25,F,4,0,"div",14),e.j41(26,"div",15),e.DNE(27,M,9,5,"div",16),e.k0s()(),e.DNE(28,y,41,10,"div",17)),2&i&&(e.Y8G("message",t.alertMessage)("type",t.alertType)("show",t.showAlert),e.R7$(),e.Y8G("show",t.showConfirm)("message",t.confirmMessage),e.R7$(2),e.R50("ngModel",t.searchTerm),e.R7$(4),e.R50("ngModel",t.filters.type),e.R7$(13),e.R50("ngModel",t.filters.experience),e.R7$(3),e.R50("ngModel",t.filters.expectedSalary),e.R7$(),e.Y8G("ngIf",t.showDomainWarning&&!t.loadingJobs),e.R7$(),e.Y8G("ngIf",t.loadingJobs),e.R7$(2),e.Y8G("ngForOf",t.filteredJobs),e.R7$(),e.Y8G("ngIf",t.showModal))},dependencies:[_.MD,_.Sq,_.bT,p.YN,p.xH,p.y7,p.me,p.Q0,p.wz,p.BC,p.vS,g.C,f.Y],styles:[".search-container[_ngcontent-%COMP%]{max-width:1100px;margin:32px auto;padding:24px;background-color:#f7f9fc;border-radius:12px;box-shadow:0 4px 10px #00000014}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .search-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px;margin:6px 0;border:1px solid #ccc;border-radius:6px;width:100%;font-size:15px}.warning-message[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404;padding:.1em;border:1px solid #ffeeba;border-radius:5px;margin-top:15px}.warning-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:5px}.filters[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-top:16px;box-sizing:border-box}.spinner-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1rem;padding:1rem;font-weight:700;color:#555}.spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:4px solid #ccc;border-top:4px solid #555;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-text[_ngcontent-%COMP%]{font-size:1rem}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .search-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px;margin:6px 0;border:1px solid #ccc;border-radius:6px;width:100%;font-size:15px;box-sizing:border-box}.jobs-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:20px;margin-top:32px}.job-card[_ngcontent-%COMP%]{padding:16px;background-color:#fff;border-radius:10px;border:1px solid #e0e0e0;box-shadow:0 2px 6px #0000000d;cursor:pointer;transition:box-shadow .2s}.job-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 16px #0000001a}.job-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;color:#0073e6}.job-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:14px}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000073;display:flex;align-items:center;justify-content:center;z-index:2000;padding:16px}.modal-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;max-width:600px;width:100%;max-height:90vh;overflow-y:auto;padding:24px;position:relative;box-shadow:0 6px 18px #00000040}.close-btn[_ngcontent-%COMP%]{position:absolute;top:12px;right:16px;font-size:26px;color:#888;cursor:pointer;font-weight:700}.close-btn[_ngcontent-%COMP%]:hover{color:#000}.modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:#0073e6}.modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;font-size:15px}.modal-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:20px;margin:10px 0}.modal-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:6px}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px;padding:10px 16px;background-color:#0073e6;color:#fff;border:none;border-radius:6px;font-weight:500;cursor:pointer;transition:background-color .2s}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#005bb5}@media (max-width: 600px){.filters[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}return o})()}}]);