"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[104],{4104:(D,c,l)=>{l.r(c),l.d(c,{AppliedJobsComponent:()=>$});var p=l(6396),d=l(4747),_=l(987),e=l(7325),r=l(5113),u=l(9973),m=l(7355),f=l(4666),g=l(5056);function b(o,n){1&o&&(e.j41(0,"div",9),e.nrm(1,"div",10),e.j41(2,"span"),e.EFF(3,"Loading applied jobs..."),e.k0s()())}function h(o,n){1&o&&(e.j41(0,"div",11),e.EFF(1," You haven't applied to any jobs yet. "),e.k0s())}function v(o,n){if(1&o){const t=e.RV6();e.j41(0,"a",23),e.bIt("click",function(i){r.eBV(t);const a=e.XpG().$implicit;return e.XpG(2).openJobModal(a),r.Njj(i.stopPropagation())}),e.EFF(1," Show more "),e.k0s()}}function F(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",14)(1,"div",15)(2,"div",16)(3,"h5",17),e.EFF(4),e.k0s(),e.j41(5,"p",18)(6,"strong"),e.EFF(7,"Company:"),e.k0s(),e.EFF(8),e.k0s(),e.j41(9,"p",18)(10,"strong"),e.EFF(11,"Location:"),e.k0s(),e.EFF(12),e.k0s(),e.j41(13,"p",18)(14,"strong"),e.EFF(15,"Status:"),e.k0s(),e.EFF(16),e.k0s(),e.j41(17,"p",18)(18,"strong"),e.EFF(19,"Applied On:"),e.k0s(),e.EFF(20),e.nI1(21,"date"),e.k0s(),e.j41(22,"p",19)(23,"strong"),e.EFF(24,"Description:"),e.k0s(),e.EFF(25),e.k0s(),e.DNE(26,v,2,0,"a",20),e.j41(27,"div",21)(28,"button",22),e.bIt("click",function(i){const a=r.eBV(t).$implicit;return e.XpG(2).revokeApplication(a._id),r.Njj(i.stopPropagation())}),e.EFF(29," Revoke Application "),e.k0s()()()()()}if(2&o){const t=n.$implicit;e.R7$(4),e.JRh(t.title),e.R7$(4),e.SpI(" ",t.company),e.R7$(4),e.SpI(" ",t.location),e.R7$(4),e.SpI(" ",t.status||"Under Review"),e.R7$(4),e.SpI(" ",e.i5U(21,7,t.createdAt,"mediumDate")),e.R7$(5),e.SpI(" ",(null==t.description?null:t.description.overview)||"No description available."," "),e.R7$(),e.Y8G("ngIf",null==t.description?null:t.description.overview)}}function k(o,n){if(1&o&&(e.j41(0,"div",12),e.DNE(1,F,30,10,"div",13),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.appliedJobs)}}function E(o,n){if(1&o){const t=e.RV6();e.j41(0,"nav",24)(1,"ul",25)(2,"li",26)(3,"button",27),e.bIt("click",function(){r.eBV(t);const i=e.XpG();return r.Njj(i.goToPreviousPage())}),e.EFF(4," \u25c0 "),e.k0s()(),e.j41(5,"li",28)(6,"span",29),e.EFF(7),e.k0s()(),e.j41(8,"li",26)(9,"button",27),e.bIt("click",function(){r.eBV(t);const i=e.XpG();return r.Njj(i.goToNextPage())}),e.EFF(10," \u27a4 "),e.k0s()()()()}if(2&o){const t=e.XpG();e.R7$(2),e.AVh("disabled",1===t.currentPage),e.R7$(),e.Y8G("disabled",1===t.currentPage),e.R7$(4),e.Lme(" Page ",t.currentPage," of ",t.totalPages," "),e.R7$(),e.AVh("disabled",t.currentPage===t.totalPages),e.R7$(),e.Y8G("disabled",t.currentPage===t.totalPages)}}function j(o,n){if(1&o&&(e.j41(0,"li",40),e.EFF(1),e.k0s()),2&o){const t=n.$implicit;e.R7$(),e.SpI(" ",t," ")}}function A(o,n){if(1&o&&(e.j41(0,"li",40),e.EFF(1),e.k0s()),2&o){const t=n.$implicit;e.R7$(),e.SpI(" ",t," ")}}function J(o,n){if(1&o&&(e.j41(0,"li",40),e.EFF(1),e.k0s()),2&o){const t=n.$implicit;e.R7$(),e.SpI(" ",t," ")}}function I(o,n){if(1&o&&(e.qex(0),e.j41(1,"p")(2,"strong"),e.EFF(3,"Preferred Skills:"),e.k0s()(),e.j41(4,"ul",38),e.DNE(5,J,2,1,"li",39),e.k0s(),e.bVm()),2&o){const t=e.XpG(3);e.R7$(5),e.Y8G("ngForOf",t.selectedJob.description.preferredSkills)}}function C(o,n){if(1&o&&(e.j41(0,"li",40),e.EFF(1),e.k0s()),2&o){const t=n.$implicit;e.R7$(),e.SpI(" ",t," ")}}function R(o,n){if(1&o&&(e.qex(0),e.j41(1,"p")(2,"strong"),e.EFF(3,"What We Offer:"),e.k0s()(),e.j41(4,"ul",41),e.DNE(5,C,2,1,"li",39),e.k0s(),e.bVm()),2&o){const t=e.XpG(3);e.R7$(5),e.Y8G("ngForOf",t.selectedJob.description.whatWeOffer)}}function T(o,n){if(1&o&&(e.j41(0,"div")(1,"p")(2,"strong"),e.EFF(3,"Overview:"),e.k0s(),e.EFF(4),e.k0s(),e.j41(5,"p")(6,"strong"),e.EFF(7,"Responsibilities:"),e.k0s()(),e.j41(8,"ul",38),e.DNE(9,j,2,1,"li",39),e.k0s(),e.j41(10,"p")(11,"strong"),e.EFF(12,"Required Skills:"),e.k0s()(),e.j41(13,"ul",38),e.DNE(14,A,2,1,"li",39),e.k0s(),e.DNE(15,I,6,1,"ng-container",37)(16,R,6,1,"ng-container",37),e.k0s()),2&o){const t=e.XpG(2);e.R7$(4),e.SpI(" ",t.selectedJob.description.overview),e.R7$(5),e.Y8G("ngForOf",t.selectedJob.description.responsibilities),e.R7$(5),e.Y8G("ngForOf",t.selectedJob.description.requiredSkills),e.R7$(),e.Y8G("ngIf",null==t.selectedJob.description.preferredSkills?null:t.selectedJob.description.preferredSkills.length),e.R7$(),e.Y8G("ngIf",null==t.selectedJob.description.whatWeOffer?null:t.selectedJob.description.whatWeOffer.length)}}function P(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",30)(1,"div",31)(2,"div",32)(3,"div",33)(4,"h5",34),e.EFF(5),e.k0s(),e.j41(6,"button",35),e.bIt("click",function(){r.eBV(t);const i=e.XpG();return r.Njj(i.closeModal())}),e.k0s()(),e.j41(7,"div",36)(8,"p")(9,"strong"),e.EFF(10,"Company:"),e.k0s(),e.EFF(11),e.k0s(),e.j41(12,"p")(13,"strong"),e.EFF(14,"Employer Name:"),e.k0s(),e.EFF(15),e.k0s(),e.j41(16,"p")(17,"strong"),e.EFF(18,"Location:"),e.k0s(),e.EFF(19),e.k0s(),e.j41(20,"p")(21,"strong"),e.EFF(22,"Type:"),e.k0s(),e.EFF(23),e.k0s(),e.j41(24,"p")(25,"strong"),e.EFF(26,"Salary:"),e.k0s(),e.EFF(27),e.k0s(),e.j41(28,"p")(29,"strong"),e.EFF(30,"Experience Required:"),e.k0s(),e.EFF(31),e.k0s(),e.j41(32,"p")(33,"strong"),e.EFF(34,"Vacancies:"),e.k0s(),e.EFF(35),e.k0s(),e.j41(36,"p")(37,"strong"),e.EFF(38,"Status:"),e.k0s(),e.EFF(39),e.k0s(),e.DNE(40,T,17,5,"div",37),e.k0s()()()()}if(2&o){const t=e.XpG();e.R7$(5),e.JRh(t.selectedJob.title),e.R7$(6),e.SpI(" ",t.selectedJob.company),e.R7$(4),e.SpI(" ",t.selectedJob.employerName),e.R7$(4),e.SpI(" ",t.selectedJob.location),e.R7$(4),e.SpI(" ",t.selectedJob.type),e.R7$(4),e.SpI(" \u20b9",t.selectedJob.salary," LPA"),e.R7$(4),e.SpI(" ",t.selectedJob.experience," Years"),e.R7$(4),e.SpI(" ",t.selectedJob.vacancies),e.R7$(4),e.SpI(" ",t.selectedJob.status),e.R7$(),e.Y8G("ngIf",t.selectedJob.description)}}let $=(()=>{class o{applicationService;authService;userService;jobService;user=null;savedJobs=[];appliedJobs=[];userId=null;token=null;selectedJob=null;showModal=!1;loading=!0;totalPages=1;currentPage=1;alertMessage="";alertType="info";showAlert=!1;navigateAfterAlert=!1;confirmMessage="";showConfirm=!1;applicationIdToBeDeleted="";jobIdToBeDeleted="";showCustomAlert(t,s,i=!1){console.log("Alert Triggered:",{message:t,type:s}),this.alertMessage=t,this.alertType=s,this.showAlert=!0,this.navigateAfterAlert=i}onAlertClosed(){this.showAlert=!1}constructor(t,s,i,a){this.applicationService=t,this.authService=s,this.userService=i,this.jobService=a}ngOnInit(){this.loadUserData(),this.token=this.authService.getToken()}loadUserData(){if(typeof window<"u"){const t=this.authService.getUser();t&&"null"!==t?(this.userId=t._id,this.userService.getUserData(this.userId).subscribe({next:s=>{this.user=s.user,console.log("User data:",this.user),this.loadAppliedJobs()},error:s=>{console.error("Failed to load user data:",s)}})):console.warn("No valid user in localStorage.")}}loadAppliedJobs(){this.loading=!0,this.jobService.appliedJobs(this.userId,this.currentPage,6).subscribe({next:t=>{this.appliedJobs=t.jobs||t,this.totalPages=t.totalPages||1},error:t=>console.error("Applied jobs error:",t),complete:()=>this.loading=!1})}goToPreviousPage(){this.currentPage>1&&(this.currentPage--,this.loadAppliedJobs())}goToNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadAppliedJobs())}openJobModal(t){this.selectedJob=t,this.showModal=!0,console.log("Job clicked:",t)}closeModal(){this.selectedJob=null,this.showModal=!1}revokeApplication(t){if(!t)return;const s=this.appliedJobs.find(i=>i._id===t);s?(this.applicationIdToBeDeleted=s.applicationId,this.jobIdToBeDeleted=t,this.confirmMessage="Are you sure you want to revoke your application for this job?",this.showConfirm=!0):this.showCustomAlert("Application not found!","info")}onConfirmRevoke(){!this.applicationIdToBeDeleted||!this.token||this.applicationService.revokeApplication(this.applicationIdToBeDeleted,this.token).subscribe({next:()=>{this.showCustomAlert("Application revoked successfully!","success"),this.appliedJobs=this.appliedJobs.filter(t=>t._id!==this.jobIdToBeDeleted),this.resetConfirmState()},error:t=>{console.error("Error revoking application:",t),this.showCustomAlert(`Failed to revoke application: ${t.error?.message||"Unknown error"}`,"error"),this.resetConfirmState()}})}onCancelConfirm(){this.resetConfirmState()}resetConfirmState(){this.showConfirm=!1,this.confirmMessage="",this.applicationIdToBeDeleted="",this.jobIdToBeDeleted=""}static \u0275fac=function(s){return new(s||o)(e.rXU(u.m),e.rXU(m.u),e.rXU(f.D),e.rXU(g.L))};static \u0275cmp=e.VBU({type:o,selectors:[["app-applied-jobs"]],decls:10,vars:10,consts:[[3,"closed","message","type","show"],[3,"confirmed","cancelled","message","show"],[1,"container","my-5"],[1,"text-center","mb-4","text-dark"],["class","d-flex align-items-center justify-content-center gap-2 text-secondary",4,"ngIf"],["class","text-center text-muted fs-5",4,"ngIf"],["class","row",4,"ngIf"],["class","mt-3 d-flex justify-content-center",4,"ngIf"],["class","modal fade show d-block","tabindex","-1","style","background: rgba(0,0,0,0.45);",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-center","gap-2","text-secondary"],["role","status",1,"spinner-border","text-primary"],[1,"text-center","text-muted","fs-5"],[1,"row"],["class","col-md-6 mb-4",4,"ngFor","ngForOf"],[1,"col-md-6","mb-4"],[1,"card","h-100","shadow-sm","border-0"],[1,"card-body"],[1,"card-title","text-primary"],[1,"card-text"],[1,"card-text","text-truncate",2,"max-height","4.5em","overflow","hidden"],["class","text-primary","style","cursor: pointer;",3,"click",4,"ngIf"],[1,"mt-3"],[1,"btn","btn-danger",3,"click"],[1,"text-primary",2,"cursor","pointer",3,"click"],[1,"mt-3","d-flex","justify-content-center"],[1,"pagination","mb-0"],[1,"page-item"],[1,"page-link",3,"click","disabled"],[1,"page-item","disabled"],[1,"page-link"],["tabindex","-1",1,"modal","fade","show","d-block",2,"background","rgba(0,0,0,0.45)"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","p-4"],[1,"modal-header"],[1,"modal-title","text-primary"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[4,"ngIf"],[1,"list-group","list-group-flush","mb-3"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"list-group","list-group-flush"]],template:function(s,i){1&s&&(e.j41(0,"app-alert",0),e.bIt("closed",function(){return i.onAlertClosed()}),e.k0s(),e.j41(1,"app-confirm",1),e.bIt("confirmed",function(){return i.onConfirmRevoke()})("cancelled",function(){return i.onCancelConfirm()}),e.k0s(),e.j41(2,"div",2)(3,"h2",3),e.EFF(4,"Your Applied Jobs"),e.k0s(),e.DNE(5,b,4,0,"div",4)(6,h,2,0,"div",5)(7,k,2,1,"div",6),e.k0s(),e.DNE(8,E,11,8,"nav",7)(9,P,41,10,"div",8)),2&s&&(e.Y8G("message",i.alertMessage)("type",i.alertType)("show",i.showAlert),e.R7$(),e.Y8G("message",i.confirmMessage)("show",i.showConfirm),e.R7$(4),e.Y8G("ngIf",i.loading),e.R7$(),e.Y8G("ngIf",!i.loading&&0===i.appliedJobs.length),e.R7$(),e.Y8G("ngIf",!i.loading&&i.appliedJobs.length>0),e.R7$(),e.Y8G("ngIf",i.totalPages>1),e.R7$(),e.Y8G("ngIf",i.showModal))},dependencies:[p.MD,p.Sq,p.bT,p.vh,d.C,_.Y],styles:[".modal.fade.show.d-block[_ngcontent-%COMP%]{background-color:#00000073}"]})}return o})()}}]);