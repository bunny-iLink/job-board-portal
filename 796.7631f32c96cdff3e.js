"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[796],{2796:(x,c,s)=>{s.r(c),s.d(c,{LoginComponent:()=>v});var r=s(4341),g=s(6396),p=s(6217),n=s(7325),u=s(5738),m=s(5312),d=s(5113),f=s(9085);let h=(()=>{class i{http;constructor(e){this.http=e}login(e){return this.http.post(`${m.c.apiUrl}/login`,e)}static \u0275fac=function(t){return new(t||i)(d.KVO(f.Qq))};static \u0275prov=d.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function b(i,w){1&i&&(n.j41(0,"div")(1,"small",13),n.EFF(2,"Email is required and must be valid."),n.k0s()())}function C(i,w){1&i&&(n.j41(0,"div")(1,"small",13),n.EFF(2,"Password is required."),n.k0s()())}let v=(()=>{class i{fb;router;loginService;loginForm;showPassword=!1;alertMessage="";alertType="info";showAlert=!1;navigateAfterAlert=!1;showCustomAlert(e,t,o=!1){console.log("Alert Triggered:",{message:e,type:t}),this.alertMessage=e,this.alertType=t,this.showAlert=!0,this.navigateAfterAlert=o}onAlertClosed(){if(this.showAlert=!1,this.navigateAfterAlert){const e=localStorage.getItem("user"),t=e?JSON.parse(e).role:null;this.router.navigate([t?`/${t}/dashboard`:"/"])}}constructor(e,t,o){this.fb=e,this.router=t,this.loginService=o,this.loginForm=this.fb.group({email:["",[r.k0.required,r.k0.email]],password:["",[r.k0.required]]})}togglePassword(){this.showPassword=!this.showPassword}goToRegister(){this.router.navigate(["/register"])}onSubmit(){this.loginForm.invalid||this.loginService.login(this.loginForm.value).subscribe({next:t=>{console.log(t),typeof window<"u"&&(localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user))),this.showCustomAlert("Login successful!","success",!0)},error:()=>{this.showCustomAlert("Login failed. Please check your credentials.","error")}})}static \u0275fac=function(t){return new(t||i)(n.rXU(r.ok),n.rXU(u.Ix),n.rXU(h))};static \u0275cmp=n.VBU({type:i,selectors:[["app-login"]],decls:25,vars:8,consts:[[3,"closed","message","type","show"],[1,"auth-page"],[1,"auth-overlay"],[1,"login-container"],[3,"ngSubmit","formGroup"],["type","email","formControlName","email","required",""],[4,"ngIf"],[1,"password-wrapper"],["formControlName","password","required","",3,"type"],["type","button",3,"click"],["type","submit",3,"disabled"],[1,"register-link"],[3,"click"],[1,"invalid-feedback"]],template:function(t,o){if(1&t&&(n.j41(0,"app-alert",0),n.bIt("closed",function(){return o.onAlertClosed()}),n.k0s(),n.j41(1,"div",1),n.nrm(2,"div",2),n.j41(3,"div",3)(4,"form",4),n.bIt("ngSubmit",function(){return o.onSubmit()}),n.j41(5,"h2"),n.EFF(6,"Login"),n.k0s(),n.j41(7,"label"),n.EFF(8,"Email:"),n.k0s(),n.nrm(9,"input",5),n.DNE(10,b,3,0,"div",6),n.j41(11,"label"),n.EFF(12,"Password:"),n.k0s(),n.j41(13,"div",7),n.nrm(14,"input",8),n.j41(15,"button",9),n.bIt("click",function(){return o.togglePassword()}),n.EFF(16," \u{1f441} "),n.k0s()(),n.DNE(17,C,3,0,"div",6),n.j41(18,"button",10),n.EFF(19,"Login"),n.k0s(),n.j41(20,"div",11)(21,"span"),n.EFF(22,"New user? "),n.k0s(),n.j41(23,"a",12),n.bIt("click",function(){return o.goToRegister()}),n.EFF(24,"Click here"),n.k0s()()()()()),2&t){let l,a;n.Y8G("message",o.alertMessage)("type",o.alertType)("show",o.showAlert),n.R7$(4),n.Y8G("formGroup",o.loginForm),n.R7$(6),n.Y8G("ngIf",(null==(l=o.loginForm.get("email"))?null:l.invalid)&&(null==(l=o.loginForm.get("email"))?null:l.touched)),n.R7$(4),n.Y8G("type",o.showPassword?"text":"password"),n.R7$(3),n.Y8G("ngIf",(null==(a=o.loginForm.get("password"))?null:a.invalid)&&(null==(a=o.loginForm.get("password"))?null:a.touched)),n.R7$(),n.Y8G("disabled",o.loginForm.invalid)}},dependencies:[g.MD,g.bT,r.X1,r.qT,r.me,r.BC,r.cb,r.YS,r.j4,r.JD,p.C],styles:[".auth-page[_ngcontent-%COMP%]{position:relative;min-height:100vh;background-image:url(https://images.unsplash.com/photo-1629904853716-f0bc54eea481?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D);background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center}.auth-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#00000080;z-index:1}.login-container[_ngcontent-%COMP%]{position:relative;z-index:2;width:90%}.login-container[_ngcontent-%COMP%]{max-width:400px;margin:60px auto;padding:32px;background-color:#fff;border-radius:12px;box-shadow:0 6px 18px #0000001a}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px;font-size:26px;color:#0073e6}.login-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:#333;font-size:14px}.login-container[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;padding:10px 12px;margin-bottom:16px;border:1px solid #ccc;border-radius:6px;font-size:14px;box-sizing:border-box;transition:border .3s}.login-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0073e6}.password-wrapper[_ngcontent-%COMP%]{position:relative}.password-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:35%;right:8px;transform:translateY(-50%);background:none;border:none;font-size:18px;cursor:pointer;color:#666}.login-container[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#0073e6;color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:700;cursor:pointer;transition:background-color .3s}.login-container[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#005bb5}.login-container[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#9ec9f5;cursor:not-allowed}.invalid-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:13px;margin-top:-12px;margin-bottom:12px;display:block}.register-link[_ngcontent-%COMP%]{text-align:center;margin-top:16px;font-size:14px;color:#333}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#0073e6;cursor:pointer;text-decoration:underline}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{margin:40px 16px;padding:24px}}"]})}return i})()}}]);