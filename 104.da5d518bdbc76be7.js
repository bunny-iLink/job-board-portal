"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[104],{4104:(T,c,l)=>{l.r(c),l.d(c,{AppliedJobsComponent:()=>S});var a=l(6396),d=l(4747),_=l(987),e=l(7325),p=l(5113),m=l(9973),f=l(7355),u=l(4666),b=l(5056);function g(t,n){1&t&&(e.j41(0,"div",8),e.nrm(1,"div",9),e.j41(2,"span"),e.EFF(3,"Loading applied jobs..."),e.k0s()())}function h(t,n){1&t&&(e.j41(0,"div",10),e.EFF(1," You haven't applied to any jobs yet. "),e.k0s())}function v(t,n){if(1&t){const o=e.RV6();e.j41(0,"div",13)(1,"div",14),e.bIt("click",function(){const i=p.eBV(o).$implicit,r=e.XpG(2);return p.Njj(r.openJobModal(i))}),e.j41(2,"div",15)(3,"h5",16),e.EFF(4),e.k0s(),e.j41(5,"p",17)(6,"strong"),e.EFF(7,"Company:"),e.k0s(),e.EFF(8),e.k0s(),e.j41(9,"p",17)(10,"strong"),e.EFF(11,"Location:"),e.k0s(),e.EFF(12),e.k0s(),e.j41(13,"p",17)(14,"strong"),e.EFF(15,"Status:"),e.k0s(),e.EFF(16),e.k0s(),e.j41(17,"p",17)(18,"strong"),e.EFF(19,"Applied On:"),e.k0s(),e.EFF(20),e.nI1(21,"date"),e.k0s(),e.j41(22,"p",17)(23,"strong"),e.EFF(24,"Description:"),e.k0s(),e.EFF(25),e.k0s(),e.j41(26,"button",18),e.bIt("click",function(i){const r=p.eBV(o).$implicit;return e.XpG(2).revokeApplication(r._id),p.Njj(i.stopPropagation())}),e.EFF(27," Revoke Application "),e.k0s()()()()}if(2&t){const o=n.$implicit;e.R7$(4),e.JRh(o.title),e.R7$(4),e.SpI(" ",o.company),e.R7$(4),e.SpI(" ",o.location),e.R7$(4),e.SpI(" ",o.status||"Under Review"),e.R7$(4),e.SpI(" ",e.i5U(21,6,o.createdAt,"mediumDate")),e.R7$(5),e.SpI(" ",(null==o.description?null:o.description.overview)||"No description available."," ")}}function F(t,n){if(1&t&&(e.j41(0,"div",11),e.DNE(1,v,28,9,"div",12),e.k0s()),2&t){const o=e.XpG();e.R7$(),e.Y8G("ngForOf",o.appliedJobs)}}function k(t,n){if(1&t&&(e.j41(0,"li",29),e.EFF(1),e.k0s()),2&t){const o=n.$implicit;e.R7$(),e.SpI(" ",o," ")}}function E(t,n){if(1&t&&(e.j41(0,"li",29),e.EFF(1),e.k0s()),2&t){const o=n.$implicit;e.R7$(),e.SpI(" ",o," ")}}function j(t,n){if(1&t&&(e.j41(0,"li",29),e.EFF(1),e.k0s()),2&t){const o=n.$implicit;e.R7$(),e.SpI(" ",o," ")}}function J(t,n){if(1&t&&(e.qex(0),e.j41(1,"p")(2,"strong"),e.EFF(3,"Preferred Skills:"),e.k0s()(),e.j41(4,"ul",27),e.DNE(5,j,2,1,"li",28),e.k0s(),e.bVm()),2&t){const o=e.XpG(3);e.R7$(5),e.Y8G("ngForOf",o.selectedJob.description.preferredSkills)}}function A(t,n){if(1&t&&(e.j41(0,"li",29),e.EFF(1),e.k0s()),2&t){const o=n.$implicit;e.R7$(),e.SpI(" ",o," ")}}function I(t,n){if(1&t&&(e.qex(0),e.j41(1,"p")(2,"strong"),e.EFF(3,"What We Offer:"),e.k0s()(),e.j41(4,"ul",30),e.DNE(5,A,2,1,"li",28),e.k0s(),e.bVm()),2&t){const o=e.XpG(3);e.R7$(5),e.Y8G("ngForOf",o.selectedJob.description.whatWeOffer)}}function C(t,n){if(1&t&&(e.j41(0,"div")(1,"p")(2,"strong"),e.EFF(3,"Overview:"),e.k0s(),e.EFF(4),e.k0s(),e.j41(5,"p")(6,"strong"),e.EFF(7,"Responsibilities:"),e.k0s()(),e.j41(8,"ul",27),e.DNE(9,k,2,1,"li",28),e.k0s(),e.j41(10,"p")(11,"strong"),e.EFF(12,"Required Skills:"),e.k0s()(),e.j41(13,"ul",27),e.DNE(14,E,2,1,"li",28),e.k0s(),e.DNE(15,J,6,1,"ng-container",26)(16,I,6,1,"ng-container",26),e.k0s()),2&t){const o=e.XpG(2);e.R7$(4),e.SpI(" ",o.selectedJob.description.overview),e.R7$(5),e.Y8G("ngForOf",o.selectedJob.description.responsibilities),e.R7$(5),e.Y8G("ngForOf",o.selectedJob.description.requiredSkills),e.R7$(),e.Y8G("ngIf",null==o.selectedJob.description.preferredSkills?null:o.selectedJob.description.preferredSkills.length),e.R7$(),e.Y8G("ngIf",null==o.selectedJob.description.whatWeOffer?null:o.selectedJob.description.whatWeOffer.length)}}function R(t,n){if(1&t){const o=e.RV6();e.j41(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"h5",23),e.EFF(5),e.k0s(),e.j41(6,"button",24),e.bIt("click",function(){p.eBV(o);const i=e.XpG();return p.Njj(i.closeModal())}),e.k0s()(),e.j41(7,"div",25)(8,"p")(9,"strong"),e.EFF(10,"Company:"),e.k0s(),e.EFF(11),e.k0s(),e.j41(12,"p")(13,"strong"),e.EFF(14,"Employer Name:"),e.k0s(),e.EFF(15),e.k0s(),e.j41(16,"p")(17,"strong"),e.EFF(18,"Location:"),e.k0s(),e.EFF(19),e.k0s(),e.j41(20,"p")(21,"strong"),e.EFF(22,"Type:"),e.k0s(),e.EFF(23),e.k0s(),e.j41(24,"p")(25,"strong"),e.EFF(26,"Salary:"),e.k0s(),e.EFF(27),e.k0s(),e.j41(28,"p")(29,"strong"),e.EFF(30,"Experience Required:"),e.k0s(),e.EFF(31),e.k0s(),e.j41(32,"p")(33,"strong"),e.EFF(34,"Vacancies:"),e.k0s(),e.EFF(35),e.k0s(),e.j41(36,"p")(37,"strong"),e.EFF(38,"Status:"),e.k0s(),e.EFF(39),e.k0s(),e.DNE(40,C,17,5,"div",26),e.k0s()()()()}if(2&t){const o=e.XpG();e.R7$(5),e.JRh(o.selectedJob.title),e.R7$(6),e.SpI(" ",o.selectedJob.company),e.R7$(4),e.SpI(" ",o.selectedJob.employerName),e.R7$(4),e.SpI(" ",o.selectedJob.location),e.R7$(4),e.SpI(" ",o.selectedJob.type),e.R7$(4),e.SpI(" \u20b9",o.selectedJob.salary," LPA"),e.R7$(4),e.SpI(" ",o.selectedJob.experience," Years"),e.R7$(4),e.SpI(" ",o.selectedJob.vacancies),e.R7$(4),e.SpI(" ",o.selectedJob.status),e.R7$(),e.Y8G("ngIf",o.selectedJob.description)}}let S=(()=>{class t{applicationService;authService;userService;jobService;user=null;savedJobs=[];appliedJobs=[];userId=null;token=null;selectedJob=null;showModal=!1;loading=!0;alertMessage="";alertType="info";showAlert=!1;navigateAfterAlert=!1;confirmMessage="";showConfirm=!1;applicationIdToBeDeleted="";jobIdToBeDeleted="";showCustomAlert(o,s,i=!1){console.log("Alert Triggered:",{message:o,type:s}),this.alertMessage=o,this.alertType=s,this.showAlert=!0,this.navigateAfterAlert=i}onAlertClosed(){this.showAlert=!1}constructor(o,s,i,r){this.applicationService=o,this.authService=s,this.userService=i,this.jobService=r}ngOnInit(){this.loadUserData(),this.token=this.authService.getToken()}loadUserData(){if(typeof window<"u"){const o=this.authService.getUser();o&&"null"!==o?(this.userId=o._id,this.userService.getUserData(this.userId).subscribe({next:s=>{this.user=s.user,console.log("User data:",this.user),this.loadAppliedJobs()},error:s=>{console.error("Failed to load user data:",s)}})):console.warn("No valid user in localStorage.")}}loadAppliedJobs(){this.userId&&(this.loading=!0,this.jobService.appliedJobs(this.userId).subscribe({next:o=>{this.appliedJobs=o.jobs||o,console.log("Applied jobs:",this.appliedJobs),this.loading=!1},error:o=>{console.error("Failed to load applied jobs:",o),this.loading=!1}}))}openJobModal(o){this.selectedJob=o,this.showModal=!0,console.log("Job clicked:",o)}closeModal(){this.selectedJob=null,this.showModal=!1}revokeApplication(o){if(!o)return;const s=this.appliedJobs.find(i=>i._id===o);s?(this.applicationIdToBeDeleted=s.applicationId,this.jobIdToBeDeleted=o,this.confirmMessage="Are you sure you want to revoke your application for this job?",this.showConfirm=!0):this.showCustomAlert("Application not found!","info")}onConfirmRevoke(){!this.applicationIdToBeDeleted||!this.token||this.applicationService.revokeApplication(this.applicationIdToBeDeleted,this.token).subscribe({next:()=>{this.showCustomAlert("Application revoked successfully!","success"),this.appliedJobs=this.appliedJobs.filter(o=>o._id!==this.jobIdToBeDeleted),this.resetConfirmState()},error:o=>{console.error("Error revoking application:",o),this.showCustomAlert(`Failed to revoke application: ${o.error?.message||"Unknown error"}`,"error"),this.resetConfirmState()}})}onCancelConfirm(){this.resetConfirmState()}resetConfirmState(){this.showConfirm=!1,this.confirmMessage="",this.applicationIdToBeDeleted="",this.jobIdToBeDeleted=""}static \u0275fac=function(s){return new(s||t)(e.rXU(m.m),e.rXU(f.u),e.rXU(u.D),e.rXU(b.L))};static \u0275cmp=e.VBU({type:t,selectors:[["app-applied-jobs"]],decls:9,vars:9,consts:[[3,"closed","message","type","show"],[3,"confirmed","cancelled","message","show"],[1,"container","my-5"],[1,"text-center","mb-4","text-dark"],["class","d-flex align-items-center justify-content-center gap-2 text-secondary",4,"ngIf"],["class","text-center text-muted fs-5",4,"ngIf"],["class","row",4,"ngIf"],["class","modal fade show d-block","tabindex","-1","style","background: rgba(0,0,0,0.45);",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-center","gap-2","text-secondary"],["role","status",1,"spinner-border","text-primary"],[1,"text-center","text-muted","fs-5"],[1,"row"],["class","col-md-6 mb-4",4,"ngFor","ngForOf"],[1,"col-md-6","mb-4"],[1,"card","h-100","shadow-sm","border-0",2,"cursor","pointer",3,"click"],[1,"card-body"],[1,"card-title","text-primary"],[1,"card-text"],[1,"btn","btn-danger","mt-3",3,"click"],["tabindex","-1",1,"modal","fade","show","d-block",2,"background","rgba(0,0,0,0.45)"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","p-4"],[1,"modal-header"],[1,"modal-title","text-primary"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[4,"ngIf"],[1,"list-group","list-group-flush","mb-3"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"list-group","list-group-flush"]],template:function(s,i){1&s&&(e.j41(0,"app-alert",0),e.bIt("closed",function(){return i.onAlertClosed()}),e.k0s(),e.j41(1,"app-confirm",1),e.bIt("confirmed",function(){return i.onConfirmRevoke()})("cancelled",function(){return i.onCancelConfirm()}),e.k0s(),e.j41(2,"div",2)(3,"h2",3),e.EFF(4,"Your Applied Jobs"),e.k0s(),e.DNE(5,g,4,0,"div",4)(6,h,2,0,"div",5)(7,F,2,1,"div",6),e.k0s(),e.DNE(8,R,41,10,"div",7)),2&s&&(e.Y8G("message",i.alertMessage)("type",i.alertType)("show",i.showAlert),e.R7$(),e.Y8G("message",i.confirmMessage)("show",i.showConfirm),e.R7$(4),e.Y8G("ngIf",i.loading),e.R7$(),e.Y8G("ngIf",!i.loading&&0===i.appliedJobs.length),e.R7$(),e.Y8G("ngIf",!i.loading&&i.appliedJobs.length>0),e.R7$(),e.Y8G("ngIf",i.showModal))},dependencies:[a.MD,a.Sq,a.bT,a.vh,d.C,_.Y],styles:[".modal.fade.show.d-block[_ngcontent-%COMP%]{background-color:#00000073}"]})}return t})()}}]);