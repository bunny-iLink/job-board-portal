"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[911],{8911:(Ge,E,h)=>{h.r(E),h.d(E,{DashboardComponent:()=>Oe});var b=h(6396),O=h(4341),_=h(467),e=h(7325),d=h(5113),g=h(7705),v=h(1985),k=h(6977),T=h(3427);class z{source;destroyed=!1;destroyRef=(0,d.WQX)(d.abz);constructor(n){this.source=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}subscribe(n){if(this.destroyed)throw new d.buA(953,!1);const t=this.source.pipe(function G(s){s||(s=(0,d.WQX)(d.abz));const n=new v.c(t=>{if(!s.destroyed)return s.onDestroy(t.next.bind(t));t.next()});return t=>t.pipe((0,k.Q)(n))}(this.destroyRef)).subscribe({next:i=>n(i)});return{unsubscribe:()=>t.unsubscribe()}}}function a(s,n){return new z(s)}var F=h(1413);const x={now:()=>(x.delegate||Date).now(),delegate:void 0};class D extends F.B{constructor(n=1/0,t=1/0,i=x){super(),this._bufferSize=n,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,t)}next(n){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:l}=this;t||(i.push(n),!r&&i.push(o.now()+l)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(n),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let l=0;l<o.length&&!n.closed;l+=i?1:2)n.next(o[l]);return this._checkFinalizedStatuses(n),t}_trimBuffer(){const{_bufferSize:n,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*n;if(n<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const l=t.now();let u=0;for(let c=1;c<i.length&&i[c]<=l;c+=2)u=c;u&&i.splice(0,u+1)}}}var L=h(8359);class $ extends L.yU{constructor(n,t){super()}schedule(n,t=0){return this}}const y={setInterval(s,n,...t){const{delegate:i}=y;return i?.setInterval?i.setInterval(s,n,...t):setInterval(s,n,...t)},clearInterval(s){const{delegate:n}=y;return(n?.clearInterval||clearInterval)(s)},delegate:void 0};var M=h(7908);class f{constructor(n,t=f.now){this.schedulerActionCtor=n,this.now=t}schedule(n,t=0,i){return new this.schedulerActionCtor(this,n).schedule(i,t)}}f.now=x.now;const C=new class U extends f{constructor(n,t=f.now){super(n,t),this.actions=[],this._active=!1}flush(n){const{actions:t}=this;if(this._active)return void t.push(n);let i;this._active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=t.shift());if(this._active=!1,i){for(;n=t.shift();)n.unsubscribe();throw i}}}(class B extends ${constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){var i;if(this.closed)return this;this.state=n;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(n,t,i=0){return y.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&y.clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let r,i=!1;try{this.work(n)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:n,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,M.o)(i,this),null!=n&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,super.unsubscribe()}}}),J=C;var Y=h(9974),S=h(4360),X=h(8750),N=h(9470);function H(s,n=C,t){const i=function Q(s=0,n,t=J){let i=-1;return null!=n&&((0,N.m)(n)?t=n:i=n),new v.c(r=>{let o=function W(s){return s instanceof Date&&!isNaN(s)}(s)?+s-t.now():s;o<0&&(o=0);let l=0;return t.schedule(function(){r.closed||(r.next(l++),0<=i?this.schedule(void 0,i):r.complete())},o)})}(s,n);return function V(s,n){return(0,Y.N)((t,i)=>{const{leading:r=!0,trailing:o=!1}=n??{};let l=!1,u=null,c=null,p=!1;const ke=()=>{c?.unsubscribe(),c=null,o&&(R(),p&&i.complete())},Te=()=>{c=null,p&&i.complete()},I=m=>c=(0,X.Tg)(s(m)).subscribe((0,S._)(i,ke,Te)),R=()=>{if(l){l=!1;const m=u;u=null,i.next(m),!p&&I(m)}};t.subscribe((0,S._)(i,m=>{l=!0,u=m,(!c||c.closed)&&(r?R():I(m))},()=>{p=!0,(!(o&&l&&c)||c.closed)&&i.complete()}))})}(()=>i,t)}var Z=h(5558);const j=new d.nKC("NGX_ECHARTS_CONFIG");class K{constructor(){this.subject=new D(1),this.subscriptions=new L.yU}doFilter(n){this.subject.next(n)}dispose(){this.subscriptions.unsubscribe()}notEmpty(n,t){this.subscriptions.add(this.subject.subscribe(i=>{if(i[n]){const r=i[n].currentValue;null!=r&&t(r)}}))}has(n,t){this.subscriptions.add(this.subject.subscribe(i=>{i[n]&&t(i[n].currentValue)}))}notFirst(n,t){this.subscriptions.add(this.subject.subscribe(i=>{i[n]&&!i[n].isFirstChange()&&t(i[n].currentValue)}))}notFirstAndEmpty(n,t){this.subscriptions.add(this.subject.subscribe(i=>{if(i[n]&&!i[n].isFirstChange()){const r=i[n].currentValue;null!=r&&t(r)}}))}}let q=(()=>{class s{constructor(){this.el=(0,d.WQX)(e.aKT),this.ngZone=(0,d.WQX)(e.SKi),this.config=(0,d.WQX)(j),this.options=(0,g.hFB)(null),this.theme=(0,g.hFB)(this.config.theme??null),this.initOpts=(0,g.hFB)(null),this.merge=(0,g.hFB)(null),this.autoResize=(0,g.hFB)(!0),this.loading=(0,g.hFB)(!1),this.loadingType=(0,g.hFB)("default"),this.loadingOpts=(0,g.hFB)(null),this.chartInit=(0,g.CGW)(),this.optionsError=(0,g.CGW)(),this.chartClick=a(this.createLazyEvent("click")),this.chartDblClick=a(this.createLazyEvent("dblclick")),this.chartMouseDown=a(this.createLazyEvent("mousedown")),this.chartMouseMove=a(this.createLazyEvent("mousemove")),this.chartMouseUp=a(this.createLazyEvent("mouseup")),this.chartMouseOver=a(this.createLazyEvent("mouseover")),this.chartMouseOut=a(this.createLazyEvent("mouseout")),this.chartGlobalOut=a(this.createLazyEvent("globalout")),this.chartContextMenu=a(this.createLazyEvent("contextmenu")),this.chartHighlight=a(this.createLazyEvent("highlight")),this.chartDownplay=a(this.createLazyEvent("downplay")),this.chartSelectChanged=a(this.createLazyEvent("selectchanged")),this.chartLegendSelectChanged=a(this.createLazyEvent("legendselectchanged")),this.chartLegendSelected=a(this.createLazyEvent("legendselected")),this.chartLegendUnselected=a(this.createLazyEvent("legendunselected")),this.chartLegendLegendSelectAll=a(this.createLazyEvent("legendselectall")),this.chartLegendLegendInverseSelect=a(this.createLazyEvent("legendinverseselect")),this.chartLegendScroll=a(this.createLazyEvent("legendscroll")),this.chartDataZoom=a(this.createLazyEvent("datazoom")),this.chartDataRangeSelected=a(this.createLazyEvent("datarangeselected")),this.chartGraphRoam=a(this.createLazyEvent("graphroam")),this.chartGeoRoam=a(this.createLazyEvent("georoam")),this.chartTreeRoam=a(this.createLazyEvent("treeroam")),this.chartTimelineChanged=a(this.createLazyEvent("timelinechanged")),this.chartTimelinePlayChanged=a(this.createLazyEvent("timelineplaychanged")),this.chartRestore=a(this.createLazyEvent("restore")),this.chartDataViewChanged=a(this.createLazyEvent("dataviewchanged")),this.chartMagicTypeChanged=a(this.createLazyEvent("magictypechanged")),this.chartGeoSelectChanged=a(this.createLazyEvent("geoselectchanged")),this.chartGeoSelected=a(this.createLazyEvent("geoselected")),this.chartGeoUnselected=a(this.createLazyEvent("geounselected")),this.chartAxisAreaSelected=a(this.createLazyEvent("axisareaselected")),this.chartBrush=a(this.createLazyEvent("brush")),this.chartBrushEnd=a(this.createLazyEvent("brushend")),this.chartBrushSelected=a(this.createLazyEvent("brushselected")),this.chartGlobalCursorTaken=a(this.createLazyEvent("globalcursortaken")),this.chartRendered=a(this.createLazyEvent("rendered")),this.chartFinished=a(this.createLazyEvent("finished")),this.animationFrameID=null,this.chart$=new D(1),this.resize$=new F.B,this.changeFilter=new K,this.resizeObFired=!1,this.echarts=this.config.echarts}ngOnChanges(t){this.changeFilter.doFilter(t)}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(H(100,C,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize()&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(t=>{for(const i of t)i.target===this.el.nativeElement&&(this.resizeObFired?this.animationFrameID=window.requestAnimationFrame(()=>{this.resize$.next()}):this.resizeObFired=!0)})),this.resizeOb.observe(this.el.nativeElement)),this.changeFilter.notFirstAndEmpty("options",t=>this.onOptionsChange(t)),this.changeFilter.notFirstAndEmpty("merge",t=>this.setOption(t)),this.changeFilter.has("loading",t=>this.toggleLoading(!!t)),this.changeFilter.notFirst("theme",()=>this.refreshChart())}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.loadingSub&&this.loadingSub.unsubscribe(),this.changeFilter.dispose(),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(t){this.chart?t?this.chart.showLoading(this.loadingType(),this.loadingOpts()):this.chart.hideLoading():this.loadingSub=this.chart$.subscribe(i=>t?i.showLoading(this.loadingType(),this.loadingOpts()):i.hideLoading())}setOption(t,i){if(this.chart)try{this.chart.setOption(t,i)}catch(r){console.error(r),this.optionsError.emit(r)}}refreshChart(){var t=this;return(0,_.A)(function*(){t.dispose(),yield t.initChart()})()}createChart(){const t=this.el.nativeElement;if(window&&window.getComputedStyle){const i=window.getComputedStyle(t,null).getPropertyValue("height");(!i||"0px"===i)&&(!t.style.height||"0px"===t.style.height)&&(t.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:r})=>r(t,this.theme??this.config?.theme,this.initOpts())))}initChart(){var t=this;return(0,_.A)(function*(){yield t.onOptionsChange(t.options());const i=t.merge();i&&t.chart&&t.setOption(i)})()}onOptionsChange(t){var i=this;return(0,_.A)(function*(){t&&(i.chart||(i.chart=yield i.createChart(),i.chart$.next(i.chart),i.chartInit.emit(i.chart)),i.setOption(i.options(),!0))})()}createLazyEvent(t){return function A(s){const n=(0,T.nf)(s);return new v.c(t=>{n?.onDestroy(()=>t.complete());const i=s.subscribe(r=>t.next(r));return()=>i.unsubscribe()})}(this.chartInit).pipe((0,Z.n)(i=>new v.c(r=>(i.on(t,o=>this.ngZone.run(()=>r.next(o))),()=>{this.chart&&(this.chart.isDisposed()||i.off(t))}))))}static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275dir=e.FsC({type:s,selectors:[["echarts"],["","echarts",""]],inputs:{options:[1,"options"],theme:[1,"theme"],initOpts:[1,"initOpts"],merge:[1,"merge"],autoResize:[1,"autoResize"],loading:[1,"loading"],loadingType:[1,"loadingType"],loadingOpts:[1,"loadingOpts"]},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartHighlight:"chartHighlight",chartDownplay:"chartDownplay",chartSelectChanged:"chartSelectChanged",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendLegendSelectAll:"chartLegendLegendSelectAll",chartLegendLegendInverseSelect:"chartLegendLegendInverseSelect",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartGraphRoam:"chartGraphRoam",chartGeoRoam:"chartGeoRoam",chartTreeRoam:"chartTreeRoam",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartGeoSelectChanged:"chartGeoSelectChanged",chartGeoSelected:"chartGeoSelected",chartGeoUnselected:"chartGeoUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartGlobalCursorTaken:"chartGlobalCursorTaken",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[e.OA$]})}return s})();function w(s){return{provide:j,useValue:s}}let ee=(()=>{class s{static forRoot(t){return{ngModule:s,providers:[w(t)]}}static forChild(){return{ngModule:s}}static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=e.$C({type:s});static#i=this.\u0275inj=d.G2t({})}return s})();var te=h(7355),ie=h(4666),ne=h(1680),se=h(5056),re=h(2418);const oe=(s,n,t,i)=>({"bg-success":s,"bg-danger":n,"bg-warning text-dark":t,"bg-info text-white":i});function ae(s,n){1&s&&(e.j41(0,"div",3)(1,"p"),e.EFF(2,"Please login to access the site."),e.k0s()())}function ce(s,n){1&s&&(e.j41(0,"div",11),e.nrm(1,"div",12),e.j41(2,"div",13),e.EFF(3,"Loading user data..."),e.k0s()())}function le(s,n){if(1&s&&(e.j41(0,"header",14)(1,"h1",15),e.EFF(2),e.k0s(),e.j41(3,"p")(4,"strong"),e.EFF(5,"Email:"),e.k0s(),e.EFF(6),e.k0s()()),2&s){const t=e.XpG(2);e.R7$(2),e.SpI("Welcome, ",t.user.name),e.R7$(4),e.SpI(" ",t.user.email)}}function he(s,n){1&s&&(e.j41(0,"div",11),e.nrm(1,"div",12),e.j41(2,"div"),e.EFF(3,"Loading your applied jobs..."),e.k0s()())}function de(s,n){1&s&&(e.j41(0,"div",16)(1,"p"),e.EFF(2,"You haven\u2019t applied for any jobs yet."),e.k0s()())}function ue(s,n){if(1&s&&(e.j41(0,"tr")(1,"td",27),e.EFF(2),e.k0s(),e.j41(3,"td",28)(4,"span",29),e.EFF(5),e.k0s()()()),2&s){const t=n.$implicit;e.R7$(2),e.JRh(t.title),e.R7$(2),e.Y8G("ngClass",e.ziG(3,oe,"Accepted"===t.status,"Rejected"===t.status,"In Progress"===t.status,"Applied"===t.status)),e.R7$(),e.SpI(" ",t.status," ")}}function pe(s,n){if(1&s){const t=e.RV6();e.j41(0,"section",17)(1,"h2",18),e.EFF(2,"Your Applied Jobs"),e.k0s(),e.j41(3,"div",19)(4,"button",20),e.bIt("click",function(){d.eBV(t);const r=e.XpG(2);return d.Njj(r.sortByStatusOrder())}),e.EFF(5," Sort by Status Priority "),e.k0s()(),e.j41(6,"div",21)(7,"table",22)(8,"thead",23)(9,"tr")(10,"th",24),e.EFF(11,"Job Title"),e.k0s(),e.j41(12,"th",25),e.EFF(13,"Status"),e.k0s()()(),e.j41(14,"tbody"),e.DNE(15,ue,6,8,"tr",26),e.k0s()()()()}if(2&s){const t=e.XpG(2);e.R7$(15),e.Y8G("ngForOf",t.appliedJobs)}}function ge(s,n){if(1&s){const t=e.RV6();e.j41(0,"nav",30)(1,"ul",31)(2,"li",32)(3,"button",33),e.bIt("click",function(){d.eBV(t);const r=e.XpG(2);return d.Njj(r.goToPreviousPage())}),e.EFF(4," \u25c0 "),e.k0s()(),e.j41(5,"li",34)(6,"span",35),e.EFF(7),e.k0s()(),e.j41(8,"li",32)(9,"button",33),e.bIt("click",function(){d.eBV(t);const r=e.XpG(2);return d.Njj(r.goToNextPage())}),e.EFF(10," \u27a4 "),e.k0s()()()()}if(2&s){const t=e.XpG(2);e.R7$(2),e.AVh("disabled",1===t.currentPage),e.R7$(),e.Y8G("disabled",1===t.currentPage),e.R7$(4),e.Lme(" Page ",t.currentPage," of ",t.totalPages," "),e.R7$(),e.AVh("disabled",t.currentPage===t.totalPages),e.R7$(),e.Y8G("disabled",t.currentPage===t.totalPages)}}function me(s,n){if(1&s&&e.nrm(0,"div",40),2&s){const t=e.XpG(3);e.Y8G("options",t.userPieChartOptions)}}function fe(s,n){if(1&s&&e.nrm(0,"div",40),2&s){const t=e.XpG(3);e.Y8G("options",t.userBarChartOptions)}}function be(s,n){if(1&s&&(e.j41(0,"section",36)(1,"h2",37),e.EFF(2,"Application Insights"),e.k0s(),e.j41(3,"div",38),e.DNE(4,me,1,1,"div",39)(5,fe,1,1,"div",39),e.k0s()()),2&s){const t=e.XpG(2);e.R7$(4),e.Y8G("ngIf",t.userPieChartOptions),e.R7$(),e.Y8G("ngIf",t.userBarChartOptions)}}function ve(s,n){1&s&&(e.j41(0,"div",41),e.EFF(1,"Loading charts..."),e.k0s())}function ye(s,n){if(1&s&&(e.qex(0),e.DNE(1,ce,4,0,"div",4)(2,le,7,2,"header",5)(3,he,4,0,"div",4)(4,de,3,0,"div",6)(5,pe,16,1,"section",7)(6,ge,11,8,"nav",8)(7,be,6,2,"section",9)(8,ve,2,0,"div",10),e.bVm()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.isUserLoading),e.R7$(),e.Y8G("ngIf",!t.isUserLoading&&t.user),e.R7$(),e.Y8G("ngIf",t.isUserJobsLoading),e.R7$(),e.Y8G("ngIf",!t.isUserJobsLoading&&0===t.appliedJobs.length&&t.user),e.R7$(),e.Y8G("ngIf",!t.isUserJobsLoading&&t.appliedJobs.length>0),e.R7$(),e.Y8G("ngIf",t.totalPages>1),e.R7$(),e.Y8G("ngIf",!t.isChartLoading&&(t.userPieChartOptions||t.userBarChartOptions)),e.R7$(),e.Y8G("ngIf",t.isChartLoading)}}function _e(s,n){1&s&&(e.j41(0,"div",11),e.nrm(1,"div",12),e.j41(2,"div"),e.EFF(3,"Loading employer data..."),e.k0s()())}function xe(s,n){if(1&s&&(e.j41(0,"p")(1,"strong"),e.EFF(2,"Company:"),e.k0s(),e.EFF(3),e.k0s()),2&s){const t=e.XpG(3);e.R7$(3),e.SpI(" ",null==t.employer?null:t.employer.company)}}function Ce(s,n){if(1&s&&(e.j41(0,"div")(1,"h1",15),e.EFF(2),e.k0s(),e.j41(3,"p")(4,"strong"),e.EFF(5,"Email:"),e.k0s(),e.EFF(6),e.k0s(),e.DNE(7,xe,4,1,"p",2),e.k0s()),2&s){const t=e.XpG(2);e.R7$(2),e.SpI("Welcome, ",null==t.employer?null:t.employer.name),e.R7$(4),e.SpI(" ",null==t.employer?null:t.employer.email),e.R7$(),e.Y8G("ngIf",null==t.employer?null:t.employer.company)}}function Ee(s,n){1&s&&(e.j41(0,"div",11),e.nrm(1,"div",12),e.j41(2,"div"),e.EFF(3,"Loading job listings..."),e.k0s()())}function Fe(s,n){1&s&&(e.j41(0,"div",16)(1,"p"),e.EFF(2,"No jobs posted yet."),e.k0s()())}function De(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",47),e.bIt("click",function(){const r=d.eBV(t).$implicit,o=e.XpG(3);return d.Njj(o.viewJobDetails(r._id))})("keyup.enter",function(){const r=d.eBV(t).$implicit,o=e.XpG(3);return d.Njj(o.viewJobDetails(r._id))}),e.j41(1,"div",48)(2,"div",49)(3,"h5",50),e.EFF(4),e.k0s(),e.j41(5,"p",51)(6,"strong"),e.EFF(7,"Applicants:"),e.k0s(),e.EFF(8),e.k0s(),e.j41(9,"p",51)(10,"strong"),e.EFF(11,"Vacancies:"),e.k0s(),e.EFF(12),e.k0s()()()()}if(2&s){const t=n.$implicit;e.BMQ("aria-label","Job listing for "+t.title+" with "+t.applicantCount+" applicants and "+t.vacancies+" vacancies"),e.R7$(4),e.JRh(t.title),e.R7$(4),e.SpI(" ",t.applicantCount),e.R7$(4),e.SpI(" ",t.vacancies)}}function Le(s,n){if(1&s&&(e.j41(0,"div",45),e.DNE(1,De,13,4,"div",46),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.jobs)}}function Se(s,n){if(1&s&&e.nrm(0,"div",40),2&s){const t=e.XpG(3);e.Y8G("options",t.employerBarChartOptions)}}function je(s,n){if(1&s&&e.nrm(0,"div",40),2&s){const t=e.XpG(3);e.Y8G("options",t.employerPieChartOptions)}}function we(s,n){if(1&s&&(e.j41(0,"section",36)(1,"h2",37),e.EFF(2,"Application Statistics"),e.k0s(),e.j41(3,"div",38),e.DNE(4,Se,1,1,"div",39)(5,je,1,1,"div",39),e.k0s()()),2&s){const t=e.XpG(2);e.R7$(4),e.Y8G("ngIf",null==t.employerBarChartOptions||null==t.employerBarChartOptions.series?null:t.employerBarChartOptions.series.length),e.R7$(),e.Y8G("ngIf",null==t.employerPieChartOptions||null==t.employerPieChartOptions.series?null:t.employerPieChartOptions.series.length)}}function Ie(s,n){1&s&&(e.j41(0,"div",41),e.EFF(1,"Loading charts..."),e.k0s())}function Re(s,n){if(1&s&&(e.qex(0),e.j41(1,"header",14),e.DNE(2,_e,4,0,"div",4)(3,Ce,8,3,"div",2),e.k0s(),e.j41(4,"section",42)(5,"h2",43),e.EFF(6,"My Job Listings"),e.k0s(),e.DNE(7,Ee,4,0,"div",4)(8,Fe,3,0,"div",6)(9,Le,2,1,"div",44),e.k0s(),e.DNE(10,we,6,2,"section",9)(11,Ie,2,0,"div",10),e.bVm()),2&s){const t=e.XpG();e.R7$(2),e.Y8G("ngIf",t.isEmployerLoading),e.R7$(),e.Y8G("ngIf",!t.isEmployerLoading&&t.employer),e.R7$(4),e.Y8G("ngIf",t.isEmployerJobsLoading),e.R7$(),e.Y8G("ngIf",!t.isEmployerJobsLoading&&0===t.jobs.length),e.R7$(),e.Y8G("ngIf",!t.isEmployerJobsLoading&&t.jobs.length>0),e.R7$(),e.Y8G("ngIf",!t.isChartLoading),e.R7$(),e.Y8G("ngIf",t.isChartLoading)}}let Oe=(()=>{class s{authService;userService;employerService;jobService;router;role=null;token=null;isChartLoading=!1;userId=null;user=null;appliedJobs=[];userPieChartOptions={};userBarChartOptions={};isUserLoading=!1;isUserJobsLoading=!1;totalPages=1;currentPage=1;employerId=null;employer=null;jobs=[];employerPieChartOptions={};employerBarChartOptions={};isEmployerLoading=!1;isEmployerJobsLoading=!1;constructor(t,i,r,o,l){this.authService=t,this.userService=i,this.employerService=r,this.jobService=o,this.router=l}ngOnInit(){this.token=this.authService.getToken();const t=this.authService.getUser();this.token&&t?(this.role=t.role,"user"===this.role?(this.userId=t._id,this.loadUserData(),this.loadAppliedJobs(),this.fetchUserStatusChart(),this.fetchUserDomainChart()):"employer"===this.role&&(this.employerId=t._id,this.fetchEmployerData(),this.fetchEmployerJobs(),this.fetchEmployerBarChart(),this.fetchEmployerPieChart())):console.warn("No token or user found")}loadUserData(){this.isUserLoading=!0,this.userService.getUserData(this.userId).subscribe({next:t=>{this.user=t.user},error:t=>console.error("User data error:",t),complete:()=>this.isUserLoading=!1})}sortByStatusOrder(){const t={Accepted:1,"In Progress":2,Rejected:3,Applied:4};this.appliedJobs.sort((i,r)=>t[i.status]-t[r.status])}loadAppliedJobs(){this.isUserJobsLoading=!0,this.jobService.appliedJobs(this.userId,this.currentPage,5).subscribe({next:t=>{this.appliedJobs=t.jobs||t,this.totalPages=t.totalPages||1},error:t=>console.error("Applied jobs error:",t),complete:()=>this.isUserJobsLoading=!1})}goToPreviousPage(){this.currentPage>1&&(this.currentPage--,this.loadAppliedJobs())}goToNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadAppliedJobs())}fetchUserStatusChart(){this.isChartLoading=!0,this.userService.getUserStatusSummary(this.userId,this.token).subscribe({next:t=>{const i=Object.entries(t).map(([r,o])=>({name:r,value:o}));this.userPieChartOptions={title:{text:"Application Status",left:"left"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"right"},series:[{type:"pie",radius:"50%",data:i}]}},error:t=>console.error("Status chart error:",t),complete:()=>this.isChartLoading=!1})}fetchUserDomainChart(){this.isChartLoading=!0,this.userService.getDomainSummary(this.userId,this.token).subscribe({next:t=>{this.userBarChartOptions={title:{text:"Applications by Domain",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"5%",right:"5%",bottom:"5%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:t.map(i=>i.domain),axisLabel:{formatter:i=>i.length>20?i.slice(0,20)+"\u2026":i}},series:[{name:"Applications",type:"bar",data:t.map(i=>i.count),itemStyle:{color:"#91cc75"},label:{show:!0,position:"right"}}]}},error:t=>console.error("Domain chart error:",t),complete:()=>this.isChartLoading=!1})}fetchEmployerData(){this.isEmployerLoading=!0,this.employerService.getEmployerData(this.employerId,this.token).subscribe({next:t=>this.employer=t.employer,error:t=>console.error("Employer data error:",t),complete:()=>this.isEmployerLoading=!1})}fetchEmployerJobs(){this.isEmployerJobsLoading=!0,this.jobService.getJobSummaries(this.employerId,this.token).subscribe({next:t=>this.jobs=t,error:t=>console.error("Jobs error:",t),complete:()=>this.isEmployerJobsLoading=!1})}fetchEmployerBarChart(){this.jobService.getJobSummaries(this.employerId,this.token).subscribe({next:t=>{this.employerBarChartOptions={title:{text:"Applications per Job",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"5%",right:"5%",bottom:"5%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:t.map(i=>i.title),axisLabel:{formatter:i=>i.length>20?i.slice(0,20)+"\u2026":i}},series:[{type:"bar",data:t.map(i=>i.applicantCount),itemStyle:{color:"#5470C6"},label:{show:!0,position:"right"}}]}},error:t=>console.error("Bar chart error:",t)})}fetchEmployerPieChart(){this.employerService.getApplicationStatusSummary(this.employerId,this.token).subscribe({next:t=>{const i=Object.entries(t).map(([r,o])=>({name:r,value:o}));this.employerPieChartOptions={title:{text:"Application Status Distribution",left:"center"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{type:"pie",radius:"50%",data:i}]}},error:t=>console.error("Pie chart error:",t)})}viewJobDetails(t){this.router.navigate(["/employer/job-details"],{queryParams:{id:t}})}static \u0275fac=function(i){return new(i||s)(e.rXU(te.u),e.rXU(ie.D),e.rXU(ne.h),e.rXU(se.L),e.rXU(re.Ix))};static \u0275cmp=e.VBU({type:s,selectors:[["app-dashboard"]],features:[e.Jv_([w({echarts:()=>h.e(697).then(h.bind(h,9697))})])],decls:4,vars:3,consts:[[1,"container","my-5","p-4","bg-white","rounded","shadow","dashboard-container"],["class","text-center text-muted fst-italic mt-5","aria-live","polite",4,"ngIf"],[4,"ngIf"],["aria-live","polite",1,"text-center","text-muted","fst-italic","mt-5"],["class","d-flex justify-content-center align-items-center gap-3 py-3 text-secondary fw-bold",4,"ngIf"],["class","text-center mb-4",4,"ngIf"],["class","text-center text-muted fst-italic mt-5",4,"ngIf"],["class","mt-4",4,"ngIf"],["class","mt-3 d-flex justify-content-center",4,"ngIf"],["class","charts-section mt-5 p-4 bg-white rounded shadow",4,"ngIf"],["class","text-center fw-bold mt-4",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","gap-3","py-3","text-secondary","fw-bold"],["role","status",1,"spinner-border","text-secondary"],[1,"loading-text"],[1,"text-center","mb-4"],[1,"text-primary","mb-2"],[1,"text-center","text-muted","fst-italic","mt-5"],[1,"mt-4"],[1,"text-center","fs-4","fw-semibold","mb-3","border-bottom","pb-2"],[1,"d-flex","justify-content-end","mb-2"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"table-responsive","rounded","shadow-sm"],[1,"table","table-striped","table-hover","table-borderless","align-middle","mb-0"],[1,"table-light"],["scope","col"],["scope","col",1,"text-end"],[4,"ngFor","ngForOf"],[1,"fw-medium","text-dark"],[1,"text-end"],[1,"badge","px-3","py-2",3,"ngClass"],[1,"mt-3","d-flex","justify-content-center"],[1,"pagination","mb-0"],[1,"page-item"],[1,"page-link",3,"click","disabled"],[1,"page-item","disabled"],[1,"page-link"],[1,"charts-section","mt-5","p-4","bg-white","rounded","shadow"],[1,"text-center","fs-4","fw-semibold","mb-4","border-bottom","pb-2"],[1,"d-flex","flex-column","flex-md-row","justify-content-around","gap-4","align-items-center"],["echarts","","class","chart w-100","style","max-width: 600px; height: 400px;",3,"options",4,"ngIf"],["echarts","",1,"chart","w-100",2,"max-width","600px","height","400px",3,"options"],[1,"text-center","fw-bold","mt-4"],["aria-labelledby","jobListingsHeading"],["id","jobListingsHeading",1,"text-center","fs-4","fw-semibold","mb-4","border-bottom","pb-2"],["class","row g-3",4,"ngIf"],[1,"row","g-3"],["class","col-md-6 col-lg-4","role","listitem","tabindex","0",3,"click","keyup.enter",4,"ngFor","ngForOf"],["role","listitem","tabindex","0",1,"col-md-6","col-lg-4",3,"click","keyup.enter"],[1,"card","h-100","shadow-sm","border-2","cursor-pointer","job-tile"],[1,"card-body"],[1,"card-title","text-primary"],[1,"card-text"]],template:function(i,r){1&i&&(e.j41(0,"div",0),e.DNE(1,ae,3,0,"div",1)(2,ye,9,8,"ng-container",2)(3,Re,12,7,"ng-container",2),e.k0s()),2&i&&(e.R7$(),e.Y8G("ngIf",!r.token),e.R7$(),e.Y8G("ngIf",r.token&&"user"===r.role),e.R7$(),e.Y8G("ngIf",r.token&&"employer"===r.role))},dependencies:[b.MD,b.YU,b.Sq,b.bT,O.YN,ee,q],styles:[".job-tile[_ngcontent-%COMP%]{cursor:pointer}.job-tile[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 18px #0000001f}"]})}return s})()}}]);