"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[602],{9602:($,u,a)=>{a.r(u),a.d(u,{JobDetailsComponent:()=>P});var p=a(6396),l=a(4341),t=a(7325),d=a(5113),g=a(5738),b=a(9085),f=a(5056),m=a(9973),h=a(7355);function F(e,s){1&e&&(t.j41(0,"div",2),t.nrm(1,"div",3),t.j41(2,"div",4),t.EFF(3,"Loading job details and applicants..."),t.k0s()())}function j(e,s){if(1&e&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&e){const n=s.$implicit;t.R7$(),t.JRh(n)}}function E(e,s){if(1&e&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&e){const n=s.$implicit;t.R7$(),t.JRh(n)}}function C(e,s){1&e&&(t.j41(0,"h3"),t.EFF(1,"Preferred Skills"),t.k0s())}function k(e,s){if(1&e&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&e){const n=s.$implicit;t.R7$(),t.JRh(n)}}function v(e,s){1&e&&(t.j41(0,"h3"),t.EFF(1,"What We Offer"),t.k0s())}function O(e,s){if(1&e&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&e){const n=s.$implicit;t.R7$(),t.JRh(n)}}function x(e,s){if(1&e&&(t.j41(0,"section",10)(1,"h2"),t.EFF(2,"Overview"),t.k0s(),t.j41(3,"p"),t.EFF(4),t.k0s(),t.j41(5,"h3"),t.EFF(6,"Responsibilities"),t.k0s(),t.j41(7,"ul"),t.DNE(8,j,2,1,"li",11),t.k0s(),t.j41(9,"h3"),t.EFF(10,"Required Skills"),t.k0s(),t.j41(11,"ul"),t.DNE(12,E,2,1,"li",11),t.k0s(),t.DNE(13,C,2,0,"h3",12),t.j41(14,"ul"),t.DNE(15,k,2,1,"li",11),t.k0s(),t.DNE(16,v,2,0,"h3",12),t.j41(17,"ul"),t.DNE(18,O,2,1,"li",11),t.k0s()()),2&e){const n=t.XpG(2);t.R7$(4),t.JRh(n.job.description.overview),t.R7$(4),t.Y8G("ngForOf",n.job.description.responsibilities),t.R7$(4),t.Y8G("ngForOf",n.job.description.requiredSkills),t.R7$(),t.Y8G("ngIf",null==n.job.description.preferredSkills?null:n.job.description.preferredSkills.length),t.R7$(2),t.Y8G("ngForOf",n.job.description.preferredSkills),t.R7$(),t.Y8G("ngIf",null==n.job.description.whatWeOffer?null:n.job.description.whatWeOffer.length),t.R7$(2),t.Y8G("ngForOf",n.job.description.whatWeOffer)}}function R(e,s){1&e&&(t.j41(0,"div",13)(1,"p"),t.EFF(2,"No one has applied for this job yet."),t.k0s()())}function M(e,s){if(1&e){const n=t.RV6();t.j41(0,"a",20),t.bIt("click",function(){d.eBV(n);const r=t.XpG().$implicit,i=t.XpG(2);return d.Njj(i.openResume(r._id))}),t.EFF(1," View Resume "),t.k0s()}}function I(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",14)(1,"p")(2,"strong"),t.EFF(3,"Name:"),t.k0s(),t.EFF(4),t.k0s(),t.j41(5,"p")(6,"strong"),t.EFF(7,"Email:"),t.k0s(),t.EFF(8),t.k0s(),t.j41(9,"p")(10,"strong"),t.EFF(11,"Contact Number:"),t.k0s(),t.EFF(12),t.k0s(),t.j41(13,"p")(14,"strong"),t.EFF(15,"Applied At:"),t.k0s(),t.EFF(16),t.nI1(17,"date"),t.k0s(),t.DNE(18,M,2,0,"a",15),t.j41(19,"p")(20,"strong"),t.EFF(21,"Status:"),t.k0s(),t.j41(22,"select",16),t.bIt("ngModelChange",function(r){const i=d.eBV(n).$implicit,c=t.XpG(2);return d.Njj(c.onStatusChange(i._id,r))}),t.j41(23,"option",17),t.EFF(24,"In Progress"),t.k0s(),t.j41(25,"option",18),t.EFF(26,"Accepted"),t.k0s(),t.j41(27,"option",19),t.EFF(28,"Rejected"),t.k0s()()()()}if(2&e){const n=s.$implicit;t.R7$(4),t.SpI(" ",(null==n.userId?null:n.userId.name)||"N/A"),t.R7$(4),t.SpI(" ",(null==n.userId?null:n.userId.email)||"N/A"),t.R7$(4),t.SpI(" ",(null==n.userId?null:n.userId.phone)||"N/A"),t.R7$(4),t.SpI(" ",t.i5U(17,6,n.appliedAt,"medium")),t.R7$(2),t.Y8G("ngIf",null==n.userId?null:n.userId.resume),t.R7$(4),t.Y8G("ngModel",n.status)}}function D(e,s){if(1&e&&(t.j41(0,"div",5)(1,"h1"),t.EFF(2),t.k0s(),t.j41(3,"p")(4,"strong"),t.EFF(5,"Company:"),t.k0s(),t.EFF(6),t.k0s(),t.j41(7,"p")(8,"strong"),t.EFF(9,"Location:"),t.k0s(),t.EFF(10),t.k0s(),t.j41(11,"p")(12,"strong"),t.EFF(13,"Type:"),t.k0s(),t.EFF(14),t.k0s(),t.j41(15,"p")(16,"strong"),t.EFF(17,"Salary:"),t.k0s(),t.EFF(18),t.k0s(),t.j41(19,"p")(20,"strong"),t.EFF(21,"Experience Required:"),t.k0s(),t.EFF(22),t.k0s(),t.j41(23,"p")(24,"strong"),t.EFF(25,"Vacancies:"),t.k0s(),t.EFF(26),t.k0s(),t.j41(27,"p")(28,"strong"),t.EFF(29,"Status:"),t.k0s(),t.EFF(30),t.k0s(),t.DNE(31,x,19,7,"section",6),t.j41(32,"section",7)(33,"h2"),t.EFF(34),t.k0s(),t.DNE(35,R,3,0,"div",8)(36,I,29,9,"div",9),t.k0s()()),2&e){const n=t.XpG();t.R7$(2),t.JRh(n.job.title),t.R7$(4),t.SpI(" ",n.job.company),t.R7$(4),t.SpI(" ",n.job.location),t.R7$(4),t.SpI(" ",n.job.type),t.R7$(4),t.SpI(" ",n.job.salary),t.R7$(4),t.SpI(" ",n.job.experience," years"),t.R7$(4),t.SpI(" ",n.job.vacancies),t.R7$(4),t.SpI(" ",n.job.status),t.R7$(),t.Y8G("ngIf",n.job.description),t.R7$(3),t.SpI("Applicants (",n.applicants.length,")"),t.R7$(),t.Y8G("ngIf",0===n.applicants.length),t.R7$(),t.Y8G("ngForOf",n.applicants)}}let P=(()=>{class e{route;http;jobService;applicationService;authService;jobId="";job=null;applicants=[];resumeBlobUrls={};token=null;loadingJobDetails=!1;constructor(n,o,r,i,c){this.route=n,this.http=o,this.jobService=r,this.applicationService=i,this.authService=c}ngOnInit(){this.token=this.authService.getToken(),this.route.queryParamMap.subscribe(n=>{this.jobId=n.get("id")||"",this.jobId&&this.token&&this.loadJobDetails()})}loadJobDetails(){this.loadingJobDetails=!0,this.jobService.getJobById(this.jobId,this.token).subscribe({next:n=>{this.job=n.job,this.applicants=n.applicants,this.applicants.forEach(o=>{o.userId?.resume?.data&&this.createResumeBlobUrl(o)}),console.log(this.applicants)},error:n=>{console.error("Failed to load job details:",n)},complete:()=>{this.loadingJobDetails=!1}})}createResumeBlobUrl(n){try{const o=atob(n.userId.resume.data),r=new Array(o.length);for(let _=0;_<o.length;_++)r[_]=o.charCodeAt(_);const i=new Uint8Array(r),c=new Blob([i],{type:n.userId.resume.contentType});this.resumeBlobUrls[n._id]=URL.createObjectURL(c)}catch(o){console.error("Error creating resume blob URL:",o)}}openResume(n){const o=this.resumeBlobUrls[n];if(o){const r=window.open(o,"_blank");if(!r||r.closed||typeof r.closed>"u"){const i=document.createElement("a");i.href=o,i.target="_blank",i.rel="noopener noreferrer",i.download=`resume_${n}.pdf`,document.body.appendChild(i),i.click(),document.body.removeChild(i)}}}ngOnDestroy(){Object.values(this.resumeBlobUrls).forEach(n=>URL.revokeObjectURL(n))}onStatusChange(n,o){window.confirm(`Are you sure you want to change the status to "${o}"?`)&&this.applicationService.updateStatus(n,this.token,o).subscribe({next:()=>{const i=this.applicants.find(c=>c._id===n);i&&(i.status=o)},error:i=>console.error("Failed to update status:",i)})}static \u0275fac=function(o){return new(o||e)(t.rXU(g.nX),t.rXU(b.Qq),t.rXU(f.L),t.rXU(m.m),t.rXU(h.u))};static \u0275cmp=t.VBU({type:e,selectors:[["app-job-details"]],decls:2,vars:2,consts:[["class","spinner-container","aria-busy","true",4,"ngIf"],["class","job-details-container",4,"ngIf"],["aria-busy","true",1,"spinner-container"],[1,"spinner"],[1,"loading-text"],[1,"job-details-container"],["class","job-section",4,"ngIf"],[1,"applicant-section"],["class","no-applicants",4,"ngIf"],["class","applicant-card",4,"ngFor","ngForOf"],[1,"job-section"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"no-applicants"],[1,"applicant-card"],["style","cursor: pointer;",3,"click",4,"ngIf"],[1,"status-dropdown",3,"ngModelChange","ngModel"],["value","In Progress"],["value","Accepted"],["value","Rejected"],[2,"cursor","pointer",3,"click"]],template:function(o,r){1&o&&t.DNE(0,F,4,0,"div",0)(1,D,37,12,"div",1),2&o&&(t.Y8G("ngIf",r.loadingJobDetails),t.R7$(),t.Y8G("ngIf",r.job))},dependencies:[p.MD,p.Sq,p.bT,p.vh,l.YN,l.xH,l.y7,l.wz,l.BC,l.vS],styles:[".job-details-container[_ngcontent-%COMP%]{max-width:960px;margin:40px auto;padding:32px;background-color:#fff;border-radius:12px;box-shadow:0 8px 20px #00000014}.spinner-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1rem;padding:1rem;font-weight:700;color:#555}.spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:4px solid #ccc;border-top:4px solid #555;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-text[_ngcontent-%COMP%]{font-size:1rem}.job-details-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;color:#0073e6;margin-bottom:16px}.job-details-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#444;margin:6px 0}.job-details-container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#222}.job-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .applicant-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:32px;font-size:22px;color:#333;border-bottom:2px solid #e0e0e0;padding-bottom:4px}.job-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:20px;font-size:18px;color:#0073e6}.job-section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:20px;margin-top:8px}.job-section[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:6px;color:#555}.applicant-card[_ngcontent-%COMP%]{background-color:#f8f9fa;border:1px solid #ddd;border-radius:8px;padding:16px;margin-bottom:16px;box-shadow:0 2px 6px #00000008}.applicant-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}.status-dropdown[_ngcontent-%COMP%]{padding:6px 10px;border-radius:6px;border:1px solid #ccc;background:#fff;font-size:14px;margin-top:4px}.status-dropdown[_ngcontent-%COMP%]:focus{outline:none;border-color:#0073e6;box-shadow:0 0 0 2px #0073e626}a[_ngcontent-%COMP%]{display:inline-block;margin-top:8px;color:#0073e6;text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.no-applicants[_ngcontent-%COMP%]{text-align:center;margin-top:20px;color:#777;font-style:italic}"]})}return e})()}}]);