"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[796],{2796:(P,c,a)=>{a.r(c),a.d(c,{LoginComponent:()=>v});var s=a(4341),g=a(6396),p=a(6217),t=a(7325),u=a(5738),m=a(6052),d=a(5113),f=a(9085);let h=(()=>{class r{http;constructor(e){this.http=e}login(e){return this.http.post(`${m.c.apiUrl}/login`,e)}static \u0275fac=function(o){return new(o||r)(d.KVO(f.Qq))};static \u0275prov=d.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function b(r,w){1&r&&(t.j41(0,"div")(1,"small",13),t.EFF(2,"Email is required and must be valid."),t.k0s()())}function C(r,w){1&r&&(t.j41(0,"div")(1,"small",13),t.EFF(2,"Password is required."),t.k0s()())}let v=(()=>{class r{fb;router;loginService;loginForm;showPassword=!1;alertMessage="";alertType="info";showAlert=!1;navigateAfterAlert=!1;showCustomAlert(e,o,n=!1){console.log("Alert Triggered:",{message:e,type:o}),this.alertMessage=e,this.alertType=o,this.showAlert=!0,this.navigateAfterAlert=n}onAlertClosed(){if(this.showAlert=!1,this.navigateAfterAlert){const e=localStorage.getItem("user"),o=e?JSON.parse(e).role:null;this.router.navigate([o?`/${o}/dashboard`:"/"])}}constructor(e,o,n){this.fb=e,this.router=o,this.loginService=n,this.loginForm=this.fb.group({email:["",[s.k0.required,s.k0.email]],password:["",[s.k0.required]]})}togglePassword(){this.showPassword=!this.showPassword}goToRegister(){this.router.navigate(["/register"])}onSubmit(){this.loginForm.invalid||this.loginService.login(this.loginForm.value).subscribe({next:o=>{console.log(o),typeof window<"u"&&(localStorage.setItem("token",o.token),localStorage.setItem("user",JSON.stringify(o.user))),this.showCustomAlert("Login successful!","success",!0)},error:o=>{let n="An unexpected error occurred. Please try again later.";const i=o.status;400===i?n="Please enter both email and password.":404===i?n="No account found with this email.":401===i?n="Incorrect email or password. Please try again.":500===i&&(n="Server error. Please try again later."),this.showCustomAlert(n,"error")}})}static \u0275fac=function(o){return new(o||r)(t.rXU(s.ok),t.rXU(u.Ix),t.rXU(h))};static \u0275cmp=t.VBU({type:r,selectors:[["app-login"]],decls:25,vars:8,consts:[[3,"closed","message","type","show"],[1,"auth-page"],[1,"auth-overlay"],[1,"login-container"],[3,"ngSubmit","formGroup"],["type","email","formControlName","email","required",""],[4,"ngIf"],[1,"password-wrapper"],["formControlName","password","required","",3,"type"],["type","button",3,"click"],["type","submit",3,"disabled"],[1,"register-link"],[3,"click"],[1,"invalid-feedback"]],template:function(o,n){if(1&o&&(t.j41(0,"app-alert",0),t.bIt("closed",function(){return n.onAlertClosed()}),t.k0s(),t.j41(1,"div",1),t.nrm(2,"div",2),t.j41(3,"div",3)(4,"form",4),t.bIt("ngSubmit",function(){return n.onSubmit()}),t.j41(5,"h2"),t.EFF(6,"Login"),t.k0s(),t.j41(7,"label"),t.EFF(8,"Email:"),t.k0s(),t.nrm(9,"input",5),t.DNE(10,b,3,0,"div",6),t.j41(11,"label"),t.EFF(12,"Password:"),t.k0s(),t.j41(13,"div",7),t.nrm(14,"input",8),t.j41(15,"button",9),t.bIt("click",function(){return n.togglePassword()}),t.EFF(16," \u{1f441} "),t.k0s()(),t.DNE(17,C,3,0,"div",6),t.j41(18,"button",10),t.EFF(19,"Login"),t.k0s(),t.j41(20,"div",11)(21,"span"),t.EFF(22,"New user? "),t.k0s(),t.j41(23,"a",12),t.bIt("click",function(){return n.goToRegister()}),t.EFF(24,"Click here"),t.k0s()()()()()),2&o){let i,l;t.Y8G("message",n.alertMessage)("type",n.alertType)("show",n.showAlert),t.R7$(4),t.Y8G("formGroup",n.loginForm),t.R7$(6),t.Y8G("ngIf",(null==(i=n.loginForm.get("email"))?null:i.invalid)&&(null==(i=n.loginForm.get("email"))?null:i.touched)),t.R7$(4),t.Y8G("type",n.showPassword?"text":"password"),t.R7$(3),t.Y8G("ngIf",(null==(l=n.loginForm.get("password"))?null:l.invalid)&&(null==(l=n.loginForm.get("password"))?null:l.touched)),t.R7$(),t.Y8G("disabled",n.loginForm.invalid)}},dependencies:[g.MD,g.bT,s.X1,s.qT,s.me,s.BC,s.cb,s.YS,s.j4,s.JD,p.C],styles:[".auth-page[_ngcontent-%COMP%]{position:relative;min-height:100vh;background-image:url(https://images.unsplash.com/photo-1629904853716-f0bc54eea481?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D);background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center}.auth-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#00000080;z-index:1}.login-container[_ngcontent-%COMP%]{position:relative;z-index:2;width:90%}.login-container[_ngcontent-%COMP%]{max-width:400px;margin:60px auto;padding:32px;background-color:#fff;border-radius:12px;box-shadow:0 6px 18px #0000001a}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px;font-size:26px;color:#0073e6}.login-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:#333;font-size:14px}.login-container[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;padding:10px 12px;margin-bottom:16px;border:1px solid #ccc;border-radius:6px;font-size:14px;box-sizing:border-box;transition:border .3s}.login-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0073e6}.password-wrapper[_ngcontent-%COMP%]{position:relative}.password-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:35%;right:8px;transform:translateY(-50%);background:none;border:none;font-size:18px;cursor:pointer;color:#666}.login-container[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#0073e6;color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:700;cursor:pointer;transition:background-color .3s}.login-container[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#005bb5}.login-container[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#9ec9f5;cursor:not-allowed}.invalid-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:13px;margin-top:-12px;margin-bottom:12px;display:block}.register-link[_ngcontent-%COMP%]{text-align:center;margin-top:16px;font-size:14px;color:#333}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#0073e6;cursor:pointer;text-decoration:underline}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{margin:40px 16px;padding:24px}}"]})}return r})()}}]);