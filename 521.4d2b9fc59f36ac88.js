"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[521],{4521:(j,c,a)=>{a.r(c),a.d(c,{EmployerDashboardComponent:()=>x});var l=a(6396),m=a(4341),d=a(5312),e=a(7325),s=a(5113),_=a(9085),g=a(5738);function h(t,i){if(1&t&&(e.j41(0,"p")(1,"strong"),e.EFF(2,"Company:"),e.k0s(),e.EFF(3),e.k0s()),2&t){const o=e.XpG(2);e.R7$(3),e.SpI(" ",null==o.employer?null:o.employer.company)}}function b(t,i){if(1&t&&(e.j41(0,"header",4)(1,"h1"),e.EFF(2),e.k0s(),e.j41(3,"p")(4,"strong"),e.EFF(5,"Email:"),e.k0s(),e.EFF(6),e.k0s(),e.DNE(7,h,4,1,"p",5),e.k0s()),2&t){const o=e.XpG();e.R7$(2),e.SpI("Welcome, ",null==o.employer?null:o.employer.name),e.R7$(4),e.SpI(" ",null==o.employer?null:o.employer.email),e.R7$(),e.Y8G("ngIf",null==o.employer?null:o.employer.company)}}function u(t,i){1&t&&(e.j41(0,"div",11)(1,"p"),e.EFF(2,"No jobs posted yet."),e.k0s()())}function f(t,i){if(1&t){const o=e.RV6();e.j41(0,"div",12),e.bIt("click",function(){const r=s.eBV(o).$implicit,p=e.XpG(2);return s.Njj(p.viewJobDetails(r._id))})("keyup.enter",function(){const r=s.eBV(o).$implicit,p=e.XpG(2);return s.Njj(p.viewJobDetails(r._id))}),e.j41(1,"h3"),e.EFF(2),e.k0s(),e.j41(3,"p")(4,"strong"),e.EFF(5,"Applicants:"),e.k0s(),e.EFF(6),e.k0s(),e.j41(7,"p")(8,"strong"),e.EFF(9,"Vacancies:"),e.k0s(),e.EFF(10),e.k0s()()}if(2&t){const o=i.$implicit;e.BMQ("aria-label","Job listing for "+o.title+" with "+o.applicantCount+" applicants and "+o.vacancies+" vacancies"),e.R7$(2),e.JRh(o.title),e.R7$(4),e.SpI(" ",o.applicantCount),e.R7$(4),e.SpI(" ",o.vacancies)}}function y(t,i){if(1&t&&(e.j41(0,"section",6)(1,"h2",7),e.EFF(2,"My Job Listings"),e.k0s(),e.DNE(3,u,3,0,"div",8),e.j41(4,"div",9),e.DNE(5,f,11,4,"div",10),e.k0s()()),2&t){const o=e.XpG();e.R7$(3),e.Y8G("ngIf",0===o.jobs.length),e.R7$(2),e.Y8G("ngForOf",o.jobs)}}function E(t,i){1&t&&(e.j41(0,"div",13)(1,"p"),e.EFF(2,"Please login to access the site."),e.k0s()())}let x=(()=>{class t{http;router;employer=null;employerId=null;token=null;jobs=[];constructor(o,n){this.http=o,this.router=n}ngOnInit(){if(typeof window<"u"){this.token=localStorage.getItem("token");const o=localStorage.getItem("user");if(o){const n=JSON.parse(o);this.employerId=n._id,this.fetchEmployerData(),this.fetchJobSummaries()}else console.warn("No valid employer")}}fetchEmployerData(){this.employerId&&this.http.get(d.c.apiUrl+`/api/getEmployerData/${this.employerId}`,{headers:{Authorization:`Bearer ${this.token}`}}).subscribe({next:o=>{this.employer=o.employer,console.log("Employer loaded:",this.employer)},error:o=>{console.error("Failed to load employer data:",o)}})}fetchJobSummaries(){this.employerId&&this.token?this.http.get(d.c.apiUrl+`/api/employer/${this.employerId}/jobs-summary`,{headers:{Authorization:`Bearer ${this.token}`}}).subscribe({next:o=>{this.jobs=o,console.log("Jobs with applicant count:",this.jobs)},error:o=>{console.error("Failed to load job summaries:",o)}}):console.warn("Cannot fetch job summaries: employerId or token missing")}viewJobDetails(o){this.router.navigate(["/employer/job-details"],{queryParams:{id:o}})}static \u0275fac=function(n){return new(n||t)(e.rXU(_.Qq),e.rXU(g.Ix))};static \u0275cmp=e.VBU({type:t,selectors:[["app-employer-dashboard"]],decls:4,vars:3,consts:[["role","main",1,"dashboard-container"],["class","dashboard-header",4,"ngIf"],["aria-labelledby","jobListingsHeading",4,"ngIf"],["class","no-data","aria-live","polite",4,"ngIf"],[1,"dashboard-header"],[4,"ngIf"],["aria-labelledby","jobListingsHeading"],["id","jobListingsHeading",1,"section-title"],["class","no-jobs",4,"ngIf"],["role","list",1,"job-grid"],["class","job-tile","role","listitem","tabindex","0",3,"click","keyup.enter",4,"ngFor","ngForOf"],[1,"no-jobs"],["role","listitem","tabindex","0",1,"job-tile",3,"click","keyup.enter"],["aria-live","polite",1,"no-data"]],template:function(n,r){1&n&&(e.j41(0,"div",0),e.DNE(1,b,8,3,"header",1)(2,y,6,2,"section",2)(3,E,3,0,"div",3),e.k0s()),2&n&&(e.R7$(),e.Y8G("ngIf",r.token&&r.employer),e.R7$(),e.Y8G("ngIf",r.token),e.R7$(),e.Y8G("ngIf",!r.token))},dependencies:[l.MD,l.Sq,l.bT,m.YN],styles:[".dashboard-container[_ngcontent-%COMP%]{max-width:1100px;margin:40px auto;padding:24px;background-color:#fff;border-radius:12px;box-shadow:0 6px 18px #0000001a}.dashboard-header[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:10px;font-size:28px;color:#0073e6}.dashboard-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:16px;color:#444}.section-title[_ngcontent-%COMP%]{font-size:22px;margin-bottom:16px;color:#333;border-bottom:2px solid #e0e0e0;padding-bottom:4px}.job-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}.job-tile[_ngcontent-%COMP%]{background:#f8f9fa;padding:16px;border-radius:8px;cursor:pointer;transition:box-shadow .2s,transform .2s;border:1px solid #ddd}.job-tile[_ngcontent-%COMP%]:hover{box-shadow:0 4px 10px #0000001a;transform:translateY(-2px)}.job-tile[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#0073e6}.job-tile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:14px;color:#333}.no-jobs[_ngcontent-%COMP%], .no-data[_ngcontent-%COMP%]{text-align:center;font-size:16px;color:#666;margin-top:40px}"]})}return t})()}}]);