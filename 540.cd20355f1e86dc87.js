"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[540],{9540:(C,c,a)=>{a.r(c),a.d(c,{MyListingsComponent:()=>y});var d=a(6396),l=a(4341),p=a(6052),g=a(1249),_=a(6217),e=a(7325),i=a(5113),u=a(9085),b=a(7355),h=a(5056);function j(r,m){if(1&r){const o=e.RV6();e.j41(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14)(4,"h5",15),e.EFF(5),e.k0s(),e.j41(6,"button",16),e.bIt("click",function(){i.eBV(o);const t=e.XpG();return i.Njj(t.closeModal())}),e.k0s()(),e.j41(7,"form",17,0),e.bIt("ngSubmit",function(){i.eBV(o);const t=e.sdS(8),n=e.XpG();return i.Njj(n.handleFormSubmit(t))}),e.j41(9,"div",18)(10,"div",8)(11,"div",19)(12,"label",20),e.EFF(13,"Title"),e.k0s(),e.j41(14,"input",21),e.mxI("ngModelChange",function(t){i.eBV(o);const n=e.XpG();return e.DH7(n.jobForm.title,t)||(n.jobForm.title=t),i.Njj(t)}),e.k0s()(),e.j41(15,"div",19)(16,"label",22),e.EFF(17,"Employer Name"),e.k0s(),e.j41(18,"input",23),e.mxI("ngModelChange",function(t){i.eBV(o);const n=e.XpG();return e.DH7(n.jobForm.employerName,t)||(n.jobForm.employerName=t),i.Njj(t)}),e.k0s()(),e.j41(19,"div",19)(20,"label",24),e.EFF(21,"Domain"),e.k0s(),e.j41(22,"select",25),e.mxI("ngModelChange",function(t){i.eBV(o);const n=e.XpG();return e.DH7(n.jobForm.domain,t)||(n.jobForm.domain=t),i.Njj(t)}),e.j41(23,"option",26),e.EFF(24,"Select domain"),e.k0s(),e.j41(25,"option",27),e.EFF(26,"Technology & IT"),e.k0s(),e.j41(27,"option",28),e.EFF(28,"Sales & Marketing"),e.k0s(),e.j41(29,"option",29),e.EFF(30,"Business & Management"),e.k0s(),e.j41(31,"option",30),e.EFF(32,"Finance & Accounting"),e.k0s(),e.j41(33,"option",31),e.EFF(34,"Human Resources & Recruitment"),e.k0s(),e.j41(35,"option",32),e.EFF(36,"Healthcare & Life Sciences"),e.k0s(),e.j41(37,"option",33),e.EFF(38,"Education & Training"),e.k0s(),e.j41(39,"option",34),e.EFF(40,"Engineering & Manufacturing"),e.k0s(),e.j41(41,"option",35),e.EFF(42,"Creative & Design"),e.k0s(),e.j41(43,"option",36),e.EFF(44,"Legal & Compliance"),e.k0s(),e.j41(45,"option",37),e.EFF(46,"Media & Communication"),e.k0s(),e.j41(47,"option",38),e.EFF(48,"Logistics & Supply Chain"),e.k0s(),e.j41(49,"option",39),e.EFF(50,"Customer Service & Support"),e.k0s()()(),e.j41(51,"div",19)(52,"label",40),e.EFF(53,"Company"),e.k0s(),e.j41(54,"input",41),e.mxI("ngModelChange",function(t){i.eBV(o);const n=e.XpG();return e.DH7(n.jobForm.company,t)||(n.jobForm.company=t),i.Njj(t)}),e.k0s()(),e.j41(55,"div",19)(56,"label",42),e.EFF(57,"Location"),e.k0s(),e.j41(58,"input",43),e.mxI("ngModelChange",function(t){i.eBV(o);const n=e.XpG();return e.DH7(n.jobForm.location,t)||(n.jobForm.location=t),i.Njj(t)}),e.k0s()(),e.j41(59,"div",19)(60,"label",44),e.EFF(61,"Salary (in LPA)"),e.k0s(),e.j41(62,"input",45),e.mxI("ngModelChange",function(t){i.eBV(o);const n=e.XpG();return e.DH7(n.jobForm.salary,t)||(n.jobForm.salary=t),i.Njj(t)}),e.k0s()(),e.j41(63,"div",19)(64,"label",46),e.EFF(65,"Job Type"),e.k0s(),e.j41(66,"select",47),e.mxI("ngModelChange",function(t){i.eBV(o);const n=e.XpG();return e.DH7(n.jobForm.type,t)||(n.jobForm.type=t),i.Njj(t)}),e.j41(67,"option",26),e.EFF(68,"All"),e.k0s(),e.j41(69,"option",48),e.EFF(70,"Full-Time"),e.k0s(),e.j41(71,"option",49),e.EFF(72,"Part-Time"),e.k0s(),e.j41(73,"option",50),e.EFF(74,"Internship"),e.k0s(),e.j41(75,"option",51),e.EFF(76,"Remote"),e.k0s()()(),e.j41(77,"div",19)(78,"label",52),e.EFF(79,"Experience (in years)"),e.k0s(),e.j41(80,"input",53),e.mxI("ngModelChange",function(t){i.eBV(o);const n=e.XpG();return e.DH7(n.jobForm.experience,t)||(n.jobForm.experience=t),i.Njj(t)}),e.k0s()(),e.j41(81,"div",19)(82,"label",54),e.EFF(83,"Vacancies"),e.k0s(),e.j41(84,"input",55),e.mxI("ngModelChange",function(t){i.eBV(o);const n=e.XpG();return e.DH7(n.jobForm.vacancies,t)||(n.jobForm.vacancies=t),i.Njj(t)}),e.k0s()(),e.j41(85,"div",19)(86,"label",56),e.EFF(87,"Status"),e.k0s(),e.j41(88,"select",57),e.mxI("ngModelChange",function(t){i.eBV(o);const n=e.XpG();return e.DH7(n.jobForm.status,t)||(n.jobForm.status=t),i.Njj(t)}),e.j41(89,"option",58),e.EFF(90,"Open"),e.k0s(),e.j41(91,"option",59),e.EFF(92,"Close"),e.k0s()()(),e.j41(93,"div",60)(94,"label",61),e.EFF(95,"Overview"),e.k0s(),e.j41(96,"input",62),e.mxI("ngModelChange",function(t){i.eBV(o);const n=e.XpG();return e.DH7(n.jobForm.description.overview,t)||(n.jobForm.description.overview=t),i.Njj(t)}),e.k0s()(),e.j41(97,"div",60)(98,"label",63),e.EFF(99,"Responsibilities"),e.k0s(),e.j41(100,"input",64),e.bIt("ngModelChange",function(t){i.eBV(o);const n=e.XpG();return i.Njj(n.jobForm.description.responsibilities=n.toArray(t))}),e.k0s()(),e.j41(101,"div",60)(102,"label",63),e.EFF(103,"Required Skills"),e.k0s(),e.j41(104,"input",65),e.bIt("ngModelChange",function(t){i.eBV(o);const n=e.XpG();return i.Njj(n.jobForm.description.requiredSkills=n.toArray(t))}),e.k0s()(),e.j41(105,"div",60)(106,"label",63),e.EFF(107,"Preferred Skills"),e.k0s(),e.j41(108,"input",66),e.bIt("ngModelChange",function(t){i.eBV(o);const n=e.XpG();return i.Njj(n.jobForm.description.preferredSkills=n.toArray(t))}),e.k0s()(),e.j41(109,"div",60)(110,"label",63),e.EFF(111,"What We Offer"),e.k0s(),e.j41(112,"input",67),e.bIt("ngModelChange",function(t){i.eBV(o);const n=e.XpG();return i.Njj(n.jobForm.description.whatWeOffer=n.toArray(t))}),e.k0s()()()(),e.j41(113,"div",68)(114,"button",69),e.EFF(115),e.k0s(),e.j41(116,"button",70),e.bIt("click",function(){i.eBV(o);const t=e.XpG();return i.Njj(t.closeModal())}),e.EFF(117,"Cancel"),e.k0s()()()()()()}if(2&r){const o=e.XpG();e.R7$(5),e.JRh(o.isEditMode?"Edit Job":"Add New Job"),e.R7$(9),e.R50("ngModel",o.jobForm.title),e.R7$(4),e.R50("ngModel",o.jobForm.employerName),e.R7$(4),e.R50("ngModel",o.jobForm.domain),e.R7$(32),e.R50("ngModel",o.jobForm.company),e.R7$(4),e.R50("ngModel",o.jobForm.location),e.R7$(4),e.R50("ngModel",o.jobForm.salary),e.R7$(4),e.R50("ngModel",o.jobForm.type),e.R7$(14),e.R50("ngModel",o.jobForm.experience),e.R7$(4),e.R50("ngModel",o.jobForm.vacancies),e.R7$(4),e.R50("ngModel",o.jobForm.status),e.R7$(8),e.R50("ngModel",o.jobForm.description.overview),e.R7$(4),e.Y8G("ngModel",o.fromArray(o.jobForm.description.responsibilities)),e.R7$(4),e.Y8G("ngModel",o.fromArray(o.jobForm.description.requiredSkills)),e.R7$(4),e.Y8G("ngModel",o.fromArray(o.jobForm.description.preferredSkills)),e.R7$(4),e.Y8G("ngModel",o.fromArray(o.jobForm.description.whatWeOffer)),e.R7$(3),e.JRh(o.isEditMode?"Update":"Create")}}function f(r,m){1&r&&(e.j41(0,"div",71),e.nrm(1,"div",72),e.j41(2,"div"),e.EFF(3,"Loading job listings..."),e.k0s()())}function F(r,m){if(1&r){const o=e.RV6();e.j41(0,"div",73)(1,"div",74)(2,"div",75)(3,"h5",76),e.EFF(4),e.k0s(),e.j41(5,"p",77)(6,"strong"),e.EFF(7,"Company:"),e.k0s(),e.EFF(8),e.k0s(),e.j41(9,"p",77)(10,"strong"),e.EFF(11,"Location:"),e.k0s(),e.EFF(12),e.k0s(),e.j41(13,"p",77)(14,"strong"),e.EFF(15,"Salary:"),e.k0s(),e.EFF(16),e.k0s(),e.j41(17,"p",77)(18,"strong"),e.EFF(19,"Type:"),e.k0s(),e.EFF(20),e.k0s(),e.j41(21,"p",78)(22,"strong"),e.EFF(23,"Status:"),e.k0s(),e.EFF(24),e.k0s(),e.j41(25,"div",79)(26,"button",80),e.bIt("click",function(){const t=i.eBV(o).$implicit,n=e.XpG();return i.Njj(n.openModal(t))}),e.EFF(27,"Edit"),e.k0s(),e.j41(28,"button",81),e.bIt("click",function(){const t=i.eBV(o).$implicit,n=e.XpG();return i.Njj(n.deleteJob(t._id))}),e.EFF(29,"Delete"),e.k0s()()()()()}if(2&r){const o=m.$implicit;e.R7$(4),e.JRh(o.title),e.R7$(4),e.SpI(" ",o.company),e.R7$(4),e.SpI(" ",o.location),e.R7$(4),e.SpI(" \u20b9",o.salary," LPA"),e.R7$(4),e.SpI(" ",o.type),e.R7$(4),e.SpI(" ",o.status)}}function M(r,m){1&r&&(e.j41(0,"div",82),e.EFF(1," No job listings found.\n"),e.k0s())}let y=(()=>{class r{http;authService;jobService;jobs=[];isModalOpen=!1;isEditMode=!1;selectedJobId=null;employerId;employer;token=null;jobForm=this.getEmptyJob();baseUrl=p.c.apiUrl+"/api";alertMessage="";alertType="info";showAlert=!1;confirmMessage="";showConfirm=!1;jobIdToDelete="";showCustomConfirm(o){this.confirmMessage=o,this.showConfirm=!0}loading=!1;constructor(o,s,t){this.http=o,this.authService=s,this.jobService=t}ngOnInit(){this.employer=this.authService.getUser(),this.token=this.authService.getToken(),this.employerId=this.authService.getUserId()??"",console.log("Employer ID from AuthService:",this.employerId),console.log("Token:",this.token),this.fetchJobs()}getEmptyJob(){return{title:"",employerId:this.employerId,employerName:"",domain:"",description:{overview:"",responsibilities:[],requiredSkills:[],preferredSkills:[],whatWeOffer:[]},company:"",location:"",salary:null,type:"",experience:"",vacancies:null,status:"open"}}showCustomAlert(o,s){console.log("Alert Triggered:",{message:o,type:s}),this.alertMessage=o,this.alertType=s,this.showAlert=!0}onAlertClosed(){this.showAlert=!1}fetchJobs(){this.employerId&&this.token?(this.loading=!0,this.jobService.getJobs(this.employerId,this.token).subscribe({next:s=>{this.jobs=s,console.log("Jobs fetched:",s),this.loading=!1},error:s=>{console.error("Failed to fetch jobs:",s),this.loading=!1}})):console.warn("Cannot fetch jobs: employerId or token is missing")}openModal(o){this.isModalOpen=!0,this.isEditMode=!!o,o?(this.selectedJobId=o._id||null,this.jobForm=JSON.parse(JSON.stringify(o))):(this.selectedJobId=null,this.jobForm=this.getEmptyJob(),this.employer&&(this.jobForm.employerId=this.employer._id,this.jobForm.employerName=this.employer.name,this.jobForm.company=this.employer.company))}closeModal(){this.isModalOpen=!1,this.jobForm=this.getEmptyJob()}toArray(o){return o.split(",").map(s=>s.trim()).filter(Boolean)}fromArray(o){return o?.join(", ")??""}handleFormSubmit(o){o.valid?this.saveJob():o.control.markAllAsTouched()}saveJob(){const o={...this.jobForm,description:{...this.jobForm.description,preferredSkills:this.jobForm.description.preferredSkills||[],whatWeOffer:this.jobForm.description.whatWeOffer||[]}};this.isEditMode&&this.selectedJobId?this.jobService.updateJob(this.selectedJobId,o,this.token).subscribe({next:()=>{this.showCustomAlert("Job updated successfully!","success"),this.fetchJobs(),this.closeModal()},error:s=>console.error("Failed to update job:",s)}):this.jobService.addJob(o,this.token).subscribe({next:()=>{this.showCustomAlert("Job created successfully!","success"),this.fetchJobs(),this.closeModal()},error:s=>console.error("Failed to add job:",s)})}deleteJob(o){this.jobIdToDelete=o,this.showCustomConfirm("Are you sure you want to delete this job? This action cannot be undone.")}onConfirmDelete(){this.jobService.deleteJob(this.jobIdToDelete,this.token).subscribe({next:()=>{this.showCustomAlert("Job deleted successfully!","success"),this.fetchJobs()},error:o=>console.error("Failed to delete job:",o),complete:()=>{this.showConfirm=!1}})}onCancelConfirm(){this.showConfirm=!1}static \u0275fac=function(s){return new(s||r)(e.rXU(u.Qq),e.rXU(b.u),e.rXU(h.L))};static \u0275cmp=e.VBU({type:r,selectors:[["app-my-listings"]],decls:11,vars:9,consts:[["jobFormEl","ngForm"],[3,"confirmed","cancelled","message","show"],[3,"closed","message","type","show"],[1,"d-flex","justify-content-end","p-3","bg-light","border-bottom"],[1,"btn","btn-primary","fw-semibold",3,"click"],["class","modal fade show d-block","tabindex","-1","style","background: rgba(0,0,0,0.5)",4,"ngIf"],["class","d-flex align-items-center justify-content-center gap-3 p-3 fw-bold text-secondary",4,"ngIf"],[1,"container","mt-4"],[1,"row","g-3"],["class","col-sm-6 col-md-4 col-lg-3",4,"ngFor","ngForOf"],["class","text-center text-muted mt-4",4,"ngIf"],["tabindex","-1",1,"modal","fade","show","d-block",2,"background","rgba(0,0,0,0.5)"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[3,"ngSubmit"],[1,"modal-body"],[1,"col-md-6"],["for","title",1,"form-label"],["id","title","type","text","name","title","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","employerName",1,"form-label"],["id","employerName","type","text","name","employerName","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","domain",1,"form-label"],["id","domain","name","domain","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],["value","Technology & IT"],["value","Sales & Marketing"],["value","Business & Management"],["value","Finance & Accounting"],["value","Human Resources & Recruitment"],["value","Healthcare & Life Sciences"],["value","Education & Training"],["va","","lue","Engineering & Manufacturing"],["value","Creative & Design"],["value","Legal & Compliance"],["value","Media & Communication"],["value","Logistics & Supply Chain"],["value","Customer Service & Support"],["for","company",1,"form-label"],["id","company","type","text","name","company","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","location",1,"form-label"],["id","location","type","text","name","location","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","salary",1,"form-label"],["id","salary","type","number","name","salary","min","0","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","type",1,"form-label"],["id","type","name","type",1,"form-select",3,"ngModelChange","ngModel"],["value","Full-Time"],["value","Part-Time"],["value","Internship"],["value","Remote"],["for","experience",1,"form-label"],["id","experience","type","number","name","experience","min","0",1,"form-control",3,"ngModelChange","ngModel"],["for","vacancies",1,"form-label"],["id","vacancies","type","number","name","vacancies","min","0","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","status",1,"form-label"],["id","status","name","status","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","open"],["value","close"],[1,"col-12"],["for","overview",1,"form-label"],["id","overview","type","text","name","overview","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-label"],["type","text","name","responsibilities",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","requiredSkills",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","preferredSkills",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","whatWeOffer",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"d-flex","align-items-center","justify-content-center","gap-3","p-3","fw-bold","text-secondary"],["role","status","aria-hidden","true",1,"spinner-border"],[1,"col-sm-6","col-md-4","col-lg-3"],[1,"card","h-100","shadow-sm"],[1,"card-body","d-flex","flex-column"],[1,"card-title"],[1,"mb-1"],[1,"mb-3"],[1,"mt-auto","d-flex","gap-2"],[1,"btn","btn-warning","btn-sm","w-50",3,"click"],[1,"btn","btn-danger","btn-sm","w-50",3,"click"],[1,"text-center","text-muted","mt-4"]],template:function(s,t){1&s&&(e.j41(0,"app-confirm",1),e.bIt("confirmed",function(){return t.onConfirmDelete()})("cancelled",function(){return t.onCancelConfirm()}),e.k0s(),e.j41(1,"app-alert",2),e.bIt("closed",function(){return t.onAlertClosed()}),e.k0s(),e.j41(2,"div",3)(3,"button",4),e.bIt("click",function(){return t.openModal()}),e.EFF(4,"+ Add Job"),e.k0s()(),e.DNE(5,j,118,17,"div",5)(6,f,4,0,"div",6),e.j41(7,"div",7)(8,"div",8),e.DNE(9,F,30,6,"div",9),e.k0s()(),e.DNE(10,M,2,0,"div",10)),2&s&&(e.Y8G("message",t.confirmMessage)("show",t.showConfirm),e.R7$(),e.Y8G("message",t.alertMessage)("type",t.alertType)("show",t.showAlert),e.R7$(4),e.Y8G("ngIf",t.isModalOpen),e.R7$(),e.Y8G("ngIf",t.loading),e.R7$(3),e.Y8G("ngForOf",t.jobs),e.R7$(),e.Y8G("ngIf",!t.loading&&0===t.jobs.length))},dependencies:[d.MD,d.Sq,d.bT,l.YN,l.qT,l.xH,l.y7,l.me,l.Q0,l.wz,l.BC,l.cb,l.YS,l.VZ,l.vS,l.cV,g.Y,_.C],encapsulation:2})}return r})()}}]);