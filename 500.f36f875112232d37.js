"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[500],{1500:(U,f,c)=>{c.r(f),c.d(f,{UserProfileComponent:()=>y});var g=c(6396),l=c(4341),_=c(5312),e=c(7325),i=c(5113),m=c(9085),h=c(5738),C=c(7472),P=c(345);function M(s,u){1&s&&(e.j41(0,"div",4),e.EFF(1,"Loading profile..."),e.k0s())}function x(s,u){if(1&s&&(e.j41(0,"div",5),e.EFF(1),e.k0s()),2&s){const n=e.XpG();e.R7$(),e.JRh(n.error)}}function b(s,u){if(1&s&&e.nrm(0,"img",44),2&s){const n=e.XpG(2);e.Y8G("src","data:"+n.user.profilePicture.contentType+";base64,"+n.user.profilePicture.data,e.B4B)}}function j(s,u){1&s&&(e.j41(0,"div",45),e.EFF(1," No profile picture "),e.k0s())}function F(s,u){if(1&s){const n=e.RV6();e.j41(0,"a",46),e.bIt("click",function(){i.eBV(n);const t=e.XpG(2);return i.Njj(t.openResume())}),e.EFF(1," View Resume "),e.k0s()}}function E(s,u){1&s&&(e.j41(0,"div"),e.EFF(1,"No resume uploaded"),e.k0s())}function k(s,u){if(1&s&&(e.j41(0,"div",47),e.EFF(1),e.k0s()),2&s){const n=e.XpG(2);e.R7$(),e.JRh(n.success)}}function R(s,u){if(1&s){const n=e.RV6();e.j41(0,"form",6),e.bIt("ngSubmit",function(){i.eBV(n);const t=e.XpG();return i.Njj(t.updateProfile())}),e.j41(1,"h2"),e.EFF(2,"User Profile"),e.k0s(),e.j41(3,"div",7)(4,"div",8),e.DNE(5,b,1,1,"img",9)(6,j,2,0,"div",10),e.k0s(),e.j41(7,"div",11)(8,"input",12),e.bIt("change",function(t){i.eBV(n);const o=e.XpG();return i.Njj(o.onProfilePictureSelected(t))}),e.k0s()()(),e.j41(9,"label"),e.EFF(10," Name: "),e.j41(11,"input",13),e.mxI("ngModelChange",function(t){i.eBV(n);const o=e.XpG();return e.DH7(o.user.name,t)||(o.user.name=t),i.Njj(t)}),e.k0s()(),e.j41(12,"label"),e.EFF(13," Email: "),e.j41(14,"input",14),e.mxI("ngModelChange",function(t){i.eBV(n);const o=e.XpG();return e.DH7(o.user.email,t)||(o.user.email=t),i.Njj(t)}),e.k0s()(),e.j41(15,"label"),e.EFF(16," Password: "),e.j41(17,"input",15),e.mxI("ngModelChange",function(t){i.eBV(n);const o=e.XpG();return e.DH7(o.user.password,t)||(o.user.password=t),i.Njj(t)}),e.k0s()(),e.j41(18,"label"),e.EFF(19," Role: "),e.j41(20,"input",16),e.mxI("ngModelChange",function(t){i.eBV(n);const o=e.XpG();return e.DH7(o.user.role,t)||(o.user.role=t),i.Njj(t)}),e.k0s()(),e.j41(21,"label"),e.EFF(22," Address: "),e.j41(23,"input",17),e.mxI("ngModelChange",function(t){i.eBV(n);const o=e.XpG();return e.DH7(o.user.address,t)||(o.user.address=t),i.Njj(t)}),e.k0s()(),e.j41(24,"label"),e.EFF(25," Experience (years): "),e.j41(26,"input",18),e.mxI("ngModelChange",function(t){i.eBV(n);const o=e.XpG();return e.DH7(o.user.experience,t)||(o.user.experience=t),i.Njj(t)}),e.k0s()(),e.j41(27,"label"),e.EFF(28," Phone: "),e.j41(29,"input",19),e.mxI("ngModelChange",function(t){i.eBV(n);const o=e.XpG();return e.DH7(o.user.phone,t)||(o.user.phone=t),i.Njj(t)}),e.k0s()(),e.j41(30,"label"),e.EFF(31," Preferred Domain: "),e.j41(32,"select",20),e.mxI("ngModelChange",function(t){i.eBV(n);const o=e.XpG();return e.DH7(o.user.preferredDomain,t)||(o.user.preferredDomain=t),i.Njj(t)}),e.j41(33,"option",21),e.EFF(34,"Select preferred domain"),e.k0s(),e.j41(35,"option",22),e.EFF(36,"Technology & IT"),e.k0s(),e.j41(37,"option",23),e.EFF(38,"Sales & Marketing"),e.k0s(),e.j41(39,"option",24),e.EFF(40,"Business & Management"),e.k0s(),e.j41(41,"option",25),e.EFF(42,"Finance & Accounting"),e.k0s(),e.j41(43,"option",26),e.EFF(44,"Human Resources & Recruitment"),e.k0s(),e.j41(45,"option",27),e.EFF(46,"Healthcare & Life Sciences"),e.k0s(),e.j41(47,"option",28),e.EFF(48,"Education & Training"),e.k0s(),e.j41(49,"option",29),e.EFF(50,"Engineering & Manufacturing"),e.k0s(),e.j41(51,"option",30),e.EFF(52,"Creative & Design"),e.k0s(),e.j41(53,"option",31),e.EFF(54,"Legal & Compliance"),e.k0s(),e.j41(55,"option",32),e.EFF(56,"Media & Communication"),e.k0s(),e.j41(57,"option",33),e.EFF(58,"Logistics & Supply Chain"),e.k0s(),e.j41(59,"option",34),e.EFF(60,"Customer Service & Support"),e.k0s()()(),e.j41(61,"div",35)(62,"div",36),e.DNE(63,F,2,0,"a",37)(64,E,2,0,"div",38),e.k0s(),e.j41(65,"div",11)(66,"input",39),e.bIt("change",function(t){i.eBV(n);const o=e.XpG();return i.Njj(o.onResumeSelected(t))}),e.k0s()()(),e.j41(67,"div",40)(68,"button",41),e.EFF(69,"Save Changes"),e.k0s(),e.j41(70,"button",42),e.bIt("click",function(){i.eBV(n);const t=e.XpG();return i.Njj(t.deleteProfile())}),e.EFF(71,"Delete Profile"),e.k0s()(),e.DNE(72,k,2,1,"div",43),e.k0s()}if(2&s){const n=e.XpG();e.R7$(5),e.Y8G("ngIf",(null==n.user||null==n.user.profilePicture?null:n.user.profilePicture.data)&&(null==n.user||null==n.user.profilePicture?null:n.user.profilePicture.contentType)),e.R7$(),e.Y8G("ngIf",!(null!=n.user&&null!=n.user.profilePicture&&n.user.profilePicture.data)),e.R7$(5),e.R50("ngModel",n.user.name),e.R7$(3),e.R50("ngModel",n.user.email),e.R7$(3),e.R50("ngModel",n.user.password),e.R7$(3),e.R50("ngModel",n.user.role),e.R7$(3),e.R50("ngModel",n.user.address),e.R7$(3),e.R50("ngModel",n.user.experience),e.R7$(3),e.R50("ngModel",n.user.phone),e.R7$(3),e.R50("ngModel",n.user.preferredDomain),e.R7$(31),e.Y8G("ngIf",n.resumeURL),e.R7$(),e.Y8G("ngIf",!n.resumeURL),e.R7$(8),e.Y8G("ngIf",n.success)}}let y=(()=>{class s{http;router;authService;sanitizer;userId=null;user=null;loading=!1;error="";success="";token=null;resumeURL=null;apiBase=_.c.apiUrl+"/api";constructor(n,r,t,o){this.http=n,this.router=r,this.authService=t,this.sanitizer=o}ngOnInit(){this.userId=this.authService.getUserId(),this.token=this.authService.getToken(),this.userId?this.fetchuser():this.error="No user ID found."}fetchuser(){this.loading=!0,this.http.get(`${this.apiBase}/getUserData/${this.userId}`).subscribe({next:n=>{this.user=n.user,this.user&&(this.user.password="",this.user?.resume?.data)&&(this.resumeURL=this.sanitizer.bypassSecurityTrustResourceUrl(`data:${this.user.resume.contentType};base64,${this.user.resume.data}`)),this.loading=!1},error:()=>{this.error="Failed to load user data.",this.loading=!1}})}updateProfile(){if(!this.userId)return;this.success="",this.error="";const n={...this.user};n.updatedAt=(new Date).toISOString(),(!n.password||""===n.password.trim())&&delete n.password,this.http.put(`${this.apiBase}/updateUser/${this.userId}`,n,{headers:{Authorization:`Bearer ${this.token}`}}).subscribe({next:r=>{this.success="Profile updated successfully!",typeof window<"u"&&localStorage.setItem("user",JSON.stringify(r.user||n))},error:()=>{this.error="Failed to update profile."}})}deleteProfile(){this.userId&&confirm("Are you sure you want to delete your profile? This action cannot be undone.")&&this.http.delete(`${this.apiBase}/deleteUser/${this.userId}`,{headers:{Authorization:`Bearer ${this.token}`}}).subscribe({next:()=>{alert("Profile deleted successfully."),typeof window<"u"&&(localStorage.removeItem("id"),localStorage.removeItem("token")),this.router.navigate(["/login"])},error:()=>{this.error="Failed to delete profile."}})}onProfilePictureSelected(n){const r=n.target.files?.[0];if(r){const t=new FileReader;t.onload=()=>{const o=t.result.split(",")[1];this.user.profilePicture={data:o,contentType:r.type}},t.readAsDataURL(r)}}onResumeSelected(n){const r=n.target.files?.[0];if(r){if("application/pdf"!==r.type)return void alert("Only PDF files are allowed.");if(r.size>2097152)return void alert("File size must be less than 2MB.");const t=new FileReader;t.onload=()=>{const o=t.result.split(",")[1];this.user.resume={data:o,contentType:r.type},console.log(this.user.resume)},t.readAsDataURL(r)}}openResume(){if(!this.user?.resume?.data)return;const n=atob(this.user.resume.data),r=new Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);const t=new Uint8Array(r),o=new Blob([t],{type:this.user.resume.contentType}),p=URL.createObjectURL(o),d=window.open(p,"_blank");if(!d||d.closed||typeof d.closed>"u"){const a=document.createElement("a");a.href=p,a.target="_blank",a.rel="noopener noreferrer",a.download="resume.pdf",document.body.appendChild(a),a.click(),document.body.removeChild(a)}setTimeout(()=>URL.revokeObjectURL(p),1e3)}static \u0275fac=function(r){return new(r||s)(e.rXU(m.Qq),e.rXU(h.Ix),e.rXU(C.u),e.rXU(P.up))};static \u0275cmp=e.VBU({type:s,selectors:[["app-user-profile"]],decls:4,vars:3,consts:[["class","loading",4,"ngIf"],["class","error",4,"ngIf"],[1,"profile-container"],[3,"ngSubmit",4,"ngIf"],[1,"loading"],[1,"error"],[3,"ngSubmit"],[1,"profile-picture-section"],[1,"current-picture"],["alt","Profile Picture","class","profile-picture",3,"src",4,"ngIf"],["class","no-picture",4,"ngIf"],[1,"upload-section"],["type","file","accept","image/*",3,"change"],["type","text","name","name","required","",3,"ngModelChange","ngModel"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["type","password","name","password",3,"ngModelChange","ngModel"],["type","text","name","role","readonly","",3,"ngModelChange","ngModel"],["type","text","name","company",3,"ngModelChange","ngModel"],["type","number","name","experience",3,"ngModelChange","ngModel"],["type","text","name","designation",3,"ngModelChange","ngModel"],["id","preferredDomain","name","preferredDomain",3,"ngModelChange","ngModel"],["value",""],["value","Technology & IT"],["value","Sales & Marketing"],["value","Business & Management"],["value","Finance & Accounting"],["value","Human Resources & Recruitment"],["value","Healthcare & Life Sciences"],["value","Education & Training"],["value","Engineering & Manufacturing"],["value","Creative & Design"],["value","Legal & Compliance"],["value","Media & Communication"],["value","Logistics & Supply Chain"],["value","Customer Service & Support"],[1,"resume-section"],[1,"current-resume"],["target","_blank","rel","noopener noreferrer",3,"click",4,"ngIf"],[4,"ngIf"],["type","file","accept","application/pdf",3,"change"],[1,"buttons"],["type","submit"],["type","button",1,"delete-btn",3,"click"],["class","success",4,"ngIf"],["alt","Profile Picture",1,"profile-picture",3,"src"],[1,"no-picture"],["target","_blank","rel","noopener noreferrer",3,"click"],[1,"success"]],template:function(r,t){1&r&&(e.DNE(0,M,2,0,"div",0)(1,x,2,1,"div",1),e.j41(2,"div",2),e.DNE(3,R,73,13,"form",3),e.k0s()),2&r&&(e.Y8G("ngIf",t.loading),e.R7$(),e.Y8G("ngIf",t.error),e.R7$(2),e.Y8G("ngIf",!t.loading&&!t.error))},dependencies:[g.MD,g.bT,l.YN,l.qT,l.xH,l.y7,l.me,l.Q0,l.wz,l.BC,l.cb,l.YS,l.vS,l.cV],styles:[".profile-container[_ngcontent-%COMP%]{max-width:700px;margin:40px auto;padding:24px;background-color:#f9f9f9;border-radius:12px;box-shadow:0 4px 12px #0000001a}h2[_ngcontent-%COMP%]{margin-bottom:24px;color:#0073e6;text-align:center}.loading[_ngcontent-%COMP%], .error[_ngcontent-%COMP%], .success[_ngcontent-%COMP%]{text-align:center;padding:12px;margin:16px auto;width:100%;max-width:700px;border-radius:6px;font-weight:500}.loading[_ngcontent-%COMP%]{background-color:#e6f0ff;color:#0073e6}.error[_ngcontent-%COMP%]{background-color:#ffe6e6;color:#d8000c}.success[_ngcontent-%COMP%]{background-color:#e6ffe6;color:#007a00}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:14px;font-weight:500}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;margin-top:6px;border:1px solid #ccc;border-radius:6px;font-size:15px}.profile-picture-section[_ngcontent-%COMP%]{display:flex;gap:24px;align-items:center;margin-bottom:24px;flex-wrap:wrap}.current-picture[_ngcontent-%COMP%]{flex:1;text-align:center}.profile-picture[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;object-fit:cover;border:2px solid #0073e6}.no-picture[_ngcontent-%COMP%]{color:#888;font-style:italic}.upload-section[_ngcontent-%COMP%]{flex:2;display:flex;flex-direction:column;gap:10px}.resume-section[_ngcontent-%COMP%]{margin-top:24px;display:flex;flex-direction:column;gap:10px}.current-resume[_ngcontent-%COMP%]{margin-bottom:8px}.current-resume[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#0073e6;text-decoration:underline}.current-resume[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#005bb5}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:24px;gap:16px}button[_ngcontent-%COMP%]{padding:10px 16px;background-color:#0073e6;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}button[_ngcontent-%COMP%]:hover{background-color:#005bb5}.delete-btn[_ngcontent-%COMP%]{background-color:#d9534f}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#c9302c}"]})}return s})()}}]);