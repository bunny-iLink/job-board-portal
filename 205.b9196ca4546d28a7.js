"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[205],{205:(v,u,i)=>{i.r(u),i.d(u,{LoginComponent:()=>_});var n=i(4341),m=i(6396),g=i(6217),e=i(7325),d=i(2418),c=i(7355);function p(l,f){1&l&&(e.j41(0,"div")(1,"small",16),e.EFF(2,"Email is required and must be valid."),e.k0s()())}function h(l,f){1&l&&(e.j41(0,"div")(1,"small",16),e.EFF(2,"Password is required."),e.k0s()())}let _=(()=>{class l{fb;router;authService;loginForm;showPassword=!1;alertMessage="";alertType="info";showAlert=!1;navigateAfterAlert=!1;showCustomAlert(s,o,t=!1){console.log("Alert Triggered:",{message:s,type:o}),this.alertMessage=s,this.alertType=o,this.showAlert=!0,this.navigateAfterAlert=t}onAlertClosed(){if(this.showAlert=!1,this.navigateAfterAlert){const s=localStorage.getItem("user"),o=s?JSON.parse(s).role:null;this.router.navigate([o?`/${o}/dashboard`:"/"])}}constructor(s,o,t){this.fb=s,this.router=o,this.authService=t,this.loginForm=this.fb.group({email:["",[n.k0.required,n.k0.email]],password:["",[n.k0.required]]})}togglePassword(){this.showPassword=!this.showPassword}goToRegister(){this.router.navigate(["/register"])}onSubmit(){this.loginForm.invalid||this.authService.login(this.loginForm.value).subscribe({next:o=>{console.log("Login response:",o),this.showCustomAlert("Login successful!","success",!0)},error:o=>{let t="An unexpected error occurred. Please try again later.";const r=o.status;400===r?t="Please enter both email and password.":404===r?t="No account found with this email.":401===r?t="Incorrect email or password. Please try again.":500===r&&(t="Server error. Please try again later."),this.showCustomAlert(t,"error")}})}static \u0275fac=function(o){return new(o||l)(e.rXU(n.ok),e.rXU(d.Ix),e.rXU(c.u))};static \u0275cmp=e.VBU({type:l,selectors:[["app-login"]],decls:27,vars:8,consts:[[3,"closed","message","type","show"],[1,"min-vh-100","position-relative","d-flex","align-items-center","justify-content-center",2,"background-image","url('login-register-bg.jpg')","background-size","cover","background-position","center top"],[1,"position-absolute","top-0","start-0","w-100","h-100","bg-dark","opacity-50"],[1,"position-relative","z-2","w-100",2,"max-width","400px"],[1,"bg-white","rounded-3","shadow","p-4","mx-3",3,"ngSubmit","formGroup"],[1,"text-center","text-primary","mb-4"],[1,"mb-3"],[1,"form-label"],["type","email","formControlName","email","required","",1,"form-control"],[4,"ngIf"],[1,"position-relative"],["formControlName","password","required","",1,"form-control",3,"type"],["type","button",1,"btn","position-absolute","top-50","end-0","translate-middle-y","me-2","p-0","border-0","bg-transparent","text-secondary",3,"click"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[1,"text-center","mt-3"],["role","button",1,"text-primary","text-decoration-underline",3,"click"],[1,"text-danger"]],template:function(o,t){if(1&o&&(e.j41(0,"app-alert",0),e.bIt("closed",function(){return t.onAlertClosed()}),e.k0s(),e.j41(1,"div",1),e.nrm(2,"div",2),e.j41(3,"div",3)(4,"form",4),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.j41(5,"h2",5),e.EFF(6,"Login"),e.k0s(),e.j41(7,"div",6)(8,"label",7),e.EFF(9,"Email:"),e.k0s(),e.nrm(10,"input",8),e.DNE(11,p,3,0,"div",9),e.k0s(),e.j41(12,"div",6)(13,"label",7),e.EFF(14,"Password:"),e.k0s(),e.j41(15,"div",10),e.nrm(16,"input",11),e.j41(17,"button",12),e.bIt("click",function(){return t.togglePassword()}),e.EFF(18," \u{1f441} "),e.k0s()(),e.DNE(19,h,3,0,"div",9),e.k0s(),e.j41(20,"button",13),e.EFF(21," Login "),e.k0s(),e.j41(22,"div",14)(23,"span"),e.EFF(24,"New user? "),e.k0s(),e.j41(25,"a",15),e.bIt("click",function(){return t.goToRegister()}),e.EFF(26," Click here "),e.k0s()()()()()),2&o){let r,a;e.Y8G("message",t.alertMessage)("type",t.alertType)("show",t.showAlert),e.R7$(4),e.Y8G("formGroup",t.loginForm),e.R7$(7),e.Y8G("ngIf",(null==(r=t.loginForm.get("email"))?null:r.invalid)&&(null==(r=t.loginForm.get("email"))?null:r.touched)),e.R7$(5),e.Y8G("type",t.showPassword?"text":"password"),e.R7$(3),e.Y8G("ngIf",(null==(a=t.loginForm.get("password"))?null:a.invalid)&&(null==(a=t.loginForm.get("password"))?null:a.touched)),e.R7$(),e.Y8G("disabled",t.loginForm.invalid)}},dependencies:[m.MD,m.bT,n.X1,n.qT,n.me,n.BC,n.cb,n.YS,n.j4,n.JD,g.C],encapsulation:2})}return l})()}}]);