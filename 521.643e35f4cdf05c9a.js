"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[521],{4521:(L,d,a)=>{a.r(d),a.d(d,{EmployerDashboardComponent:()=>F});var c=a(6396),m=a(4341),p=a(3560),t=a(7325),l=a(5113),h=a(5056),g=a(1680),_=a(7355),f=a(4710);function b(o,r){1&o&&(t.j41(0,"div",8),t.nrm(1,"div",9),t.j41(2,"div",10),t.EFF(3,"Loading employer data..."),t.k0s()())}function u(o,r){if(1&o&&(t.j41(0,"p")(1,"strong"),t.EFF(2,"Company:"),t.k0s(),t.EFF(3),t.k0s()),2&o){const e=t.XpG(3);t.R7$(3),t.SpI(" ",null==e.employer?null:e.employer.company)}}function y(o,r){if(1&o&&(t.j41(0,"div")(1,"h1"),t.EFF(2),t.k0s(),t.j41(3,"p")(4,"strong"),t.EFF(5,"Email:"),t.k0s(),t.EFF(6),t.k0s(),t.DNE(7,u,4,1,"p",5),t.k0s()),2&o){const e=t.XpG(2);t.R7$(2),t.SpI("Welcome, ",null==e.employer?null:e.employer.name),t.R7$(4),t.SpI(" ",null==e.employer?null:e.employer.email),t.R7$(),t.Y8G("ngIf",null==e.employer?null:e.employer.company)}}function x(o,r){if(1&o&&(t.j41(0,"header",6),t.DNE(1,b,4,0,"div",7)(2,y,8,3,"div",5),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.isEmployerLoading),t.R7$(),t.Y8G("ngIf",!e.isEmployerLoading&&e.employer)}}function C(o,r){1&o&&(t.j41(0,"div",8),t.nrm(1,"div",9),t.j41(2,"div",10),t.EFF(3,"Loading job listings..."),t.k0s()())}function v(o,r){1&o&&(t.j41(0,"div",15)(1,"p"),t.EFF(2,"No jobs posted yet."),t.k0s()())}function E(o,r){if(1&o){const e=t.RV6();t.j41(0,"div",18),t.bIt("click",function(){const n=l.eBV(e).$implicit,i=t.XpG(3);return l.Njj(i.viewJobDetails(n._id))})("keyup.enter",function(){const n=l.eBV(e).$implicit,i=t.XpG(3);return l.Njj(i.viewJobDetails(n._id))}),t.j41(1,"h4"),t.EFF(2),t.k0s(),t.j41(3,"p")(4,"strong"),t.EFF(5,"Applicants:"),t.k0s(),t.EFF(6),t.k0s(),t.j41(7,"p")(8,"strong"),t.EFF(9,"Vacancies:"),t.k0s(),t.EFF(10),t.k0s()()}if(2&o){const e=r.$implicit;t.BMQ("aria-label","Job listing for "+e.title+" with "+e.applicantCount+" applicants and "+e.vacancies+" vacancies"),t.R7$(2),t.JRh(e.title),t.R7$(4),t.SpI(" ",e.applicantCount),t.R7$(4),t.SpI(" ",e.vacancies)}}function O(o,r){if(1&o&&(t.j41(0,"div",16),t.DNE(1,E,11,4,"div",17),t.k0s()),2&o){const e=t.XpG(2);t.R7$(),t.Y8G("ngForOf",e.jobs)}}function j(o,r){if(1&o&&(t.j41(0,"section",11)(1,"h2",12),t.EFF(2,"My Job Listings"),t.k0s(),t.DNE(3,C,4,0,"div",7)(4,v,3,0,"div",13)(5,O,2,1,"div",14),t.k0s()),2&o){const e=t.XpG();t.R7$(3),t.Y8G("ngIf",e.isJobsLoading),t.R7$(),t.Y8G("ngIf",!e.isJobsLoading&&0===e.jobs.length),t.R7$(),t.Y8G("ngIf",!e.isJobsLoading&&e.jobs.length>0)}}function D(o,r){1&o&&(t.j41(0,"div",19)(1,"p"),t.EFF(2,"Please login to access the site."),t.k0s()())}function I(o,r){if(1&o&&t.nrm(0,"div",25),2&o){const e=t.XpG(2);t.Y8G("options",e.lineChartOptions)}}function P(o,r){if(1&o&&t.nrm(0,"div",26),2&o){const e=t.XpG(2);t.Y8G("options",e.pieChartOptions)}}function M(o,r){if(1&o&&(t.j41(0,"section",20)(1,"h2",21),t.EFF(2,"Application Statistics"),t.k0s(),t.j41(3,"div",22),t.DNE(4,I,1,1,"div",23)(5,P,1,1,"div",24),t.k0s()()),2&o){const e=t.XpG();t.R7$(4),t.Y8G("ngIf",null==e.lineChartOptions||null==e.lineChartOptions.series?null:e.lineChartOptions.series.length),t.R7$(),t.Y8G("ngIf",null==e.pieChartOptions||null==e.pieChartOptions.series?null:e.pieChartOptions.series.length)}}function k(o,r){1&o&&(t.j41(0,"div"),t.EFF(1,"Loading charts..."),t.k0s())}let F=(()=>{class o{jobService;employerService;authService;router;employer=null;employerId=null;token=null;jobs=[];lineChartOptions={};pieChartOptions={};isChartLoading=!1;isEmployerLoading=!1;isJobsLoading=!1;constructor(e,s,n,i){this.jobService=e,this.employerService=s,this.authService=n,this.router=i}ngOnInit(){this.token=this.authService.getToken(),this.employerId=this.authService.getUserId(),this.token&&this.employerId?(this.fetchEmployerData(),this.fetchJobSummaries(),this.fetchHorizontalBarChartData(),this.fetchPieChartData()):console.warn("Missing token or employer ID.")}fetchEmployerData(){!this.employerId||!this.token||(this.isEmployerLoading=!0,this.employerService.getEmployerData(this.employerId,this.token).subscribe({next:e=>{this.employer=e.employer,console.log("Employer loaded:",this.employer)},error:e=>{console.error("Failed to load employer data:",e)},complete:()=>{this.isEmployerLoading=!1}}))}fetchJobSummaries(){!this.employerId||!this.token||(this.isJobsLoading=!0,this.jobService.getJobSummaries(this.employerId,this.token).subscribe({next:e=>{this.jobs=e,console.log("Jobs loaded:",this.jobs)},error:e=>{console.error("Failed to load job summaries:",e)},complete:()=>{this.isJobsLoading=!1}}))}viewJobDetails(e){this.router.navigate(["/employer/job-details"],{queryParams:{id:e}})}fetchHorizontalBarChartData(){!this.employerId||!this.token||(this.isChartLoading=!0,this.jobService.getJobSummaries(this.employerId,this.token).subscribe({next:e=>{const s=e.map(i=>i.title),n=e.map(i=>i.applicantCount);this.lineChartOptions={title:{text:"Applications per Job Title",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",name:"Applications"},yAxis:{type:"category",data:s,axisLabel:{interval:0,formatter:i=>i.length>20?i.slice(0,20)+"\u2026":i}},series:[{name:"Applications",type:"bar",data:n,label:{show:!0,position:"right"},itemStyle:{color:"#5470C6"}}]}},error:e=>console.error("Error loading bar chart data:",e),complete:()=>this.isChartLoading=!1}))}fetchPieChartData(){!this.employerId||!this.token||this.employerService.getApplicationStatusSummary(this.employerId,this.token).subscribe({next:e=>{const s=Object.entries(e).map(([n,i])=>({name:n,value:i}));this.pieChartOptions={title:{text:"Application Status Distribution",left:"center",top:"bottom"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{name:"Applications",type:"pie",radius:"50%",data:s,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},error:e=>{console.error("Error loading pie chart data:",e)},complete:()=>{this.isChartLoading=!1}})}static \u0275fac=function(s){return new(s||o)(t.rXU(h.L),t.rXU(g.h),t.rXU(_.u),t.rXU(f.Ix))};static \u0275cmp=t.VBU({type:o,selectors:[["app-employer-dashboard"]],features:[t.Jv_([(0,p.fM)({echarts:()=>a.e(697).then(a.bind(a,9697))})])],decls:6,vars:5,consts:[["role","main",1,"dashboard-container"],["class","dashboard-header",4,"ngIf"],["aria-labelledby","jobListingsHeading",4,"ngIf"],["class","no-data","aria-live","polite",4,"ngIf"],["class","charts-section",4,"ngIf"],[4,"ngIf"],[1,"dashboard-header"],["class","spinner-container",4,"ngIf"],[1,"spinner-container"],[1,"spinner"],[1,"loading-text"],["aria-labelledby","jobListingsHeading"],["id","jobListingsHeading",1,"section-title"],["class","no-jobs",4,"ngIf"],["class","job-grid","role","list",4,"ngIf"],[1,"no-jobs"],["role","list",1,"job-grid"],["class","job-tile","role","listitem","tabindex","0",3,"click","keyup.enter",4,"ngFor","ngForOf"],["role","listitem","tabindex","0",1,"job-tile",3,"click","keyup.enter"],["aria-live","polite",1,"no-data"],[1,"charts-section"],[1,"section-title"],[1,"chart-container"],["echarts","","class","chart line-chart",3,"options",4,"ngIf"],["echarts","","class","chart pie-chart",3,"options",4,"ngIf"],["echarts","",1,"chart","line-chart",3,"options"],["echarts","",1,"chart","pie-chart",3,"options"]],template:function(s,n){1&s&&(t.j41(0,"div",0),t.DNE(1,x,3,2,"header",1)(2,j,6,3,"section",2)(3,D,3,0,"div",3)(4,M,6,2,"section",4)(5,k,2,0,"div",5),t.k0s()),2&s&&(t.R7$(),t.Y8G("ngIf",n.token),t.R7$(),t.Y8G("ngIf",n.token),t.R7$(),t.Y8G("ngIf",!n.token),t.R7$(),t.Y8G("ngIf",!n.isChartLoading),t.R7$(),t.Y8G("ngIf",n.isChartLoading))},dependencies:[c.MD,c.Sq,c.bT,m.YN,p.sN,p.$P],styles:[".dashboard-container[_ngcontent-%COMP%]{max-width:1100px;margin:40px auto;padding:24px;background-color:#fff;border-radius:12px;box-shadow:0 6px 18px #0000001a}.dashboard-header[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:10px;font-size:28px;color:#0073e6}.dashboard-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:16px;color:#444}.section-title[_ngcontent-%COMP%]{font-size:22px;margin-bottom:16px;color:#333;border-bottom:2px solid #e0e0e0;padding-bottom:4px}.spinner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;font-weight:700;color:#555}.spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:4px solid #ccc;border-top:4px solid #555;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-text[_ngcontent-%COMP%]{font-size:1rem}.job-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}.job-tile[_ngcontent-%COMP%]{background:#f8f9fa;padding:16px;border-radius:8px;cursor:pointer;transition:box-shadow .2s,transform .2s;border:1px solid #ddd}.job-tile[_ngcontent-%COMP%]:hover{box-shadow:0 4px 10px #0000001a;transform:translateY(-2px)}.job-tile[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;color:#0073e6}.job-tile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:14px;color:#333}.no-jobs[_ngcontent-%COMP%], .no-data[_ngcontent-%COMP%]{text-align:center;font-size:16px;color:#666;margin-top:40px}.charts-section[_ngcontent-%COMP%]{margin-top:3rem;padding:1.5rem;background-color:#fff;border-radius:12px;box-shadow:0 0 8px #0000000d}.section-title[_ngcontent-%COMP%]{text-align:center;font-size:1.8rem;margin-bottom:2rem;font-weight:600;color:#333}.chart-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;align-items:center}.chart[_ngcontent-%COMP%]{width:100%;max-width:600px;height:400px}@media (min-width: 768px){.chart-container[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-around}.chart[_ngcontent-%COMP%]{width:45%}}.loading[_ngcontent-%COMP%]{text-align:center;font-weight:700;margin-top:2rem}"]})}return o})()}}]);