"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[911],{8911:(ze,E,d)=>{d.r(E),d.d(E,{DashboardComponent:()=>Ge});var b=d(6396),k=d(4341),_=d(467),e=d(7325),h=d(5113),g=d(7705),v=d(1985),T=d(6977),O=d(3427);class P{source;destroyed=!1;destroyRef=(0,h.WQX)(h.abz);constructor(i){this.source=i,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}subscribe(i){if(this.destroyed)throw new h.buA(953,!1);const t=this.source.pipe(function G(s){s||(s=(0,h.WQX)(h.abz));const i=new v.c(t=>{if(!s.destroyed)return s.onDestroy(t.next.bind(t));t.next()});return t=>t.pipe((0,T.Q)(i))}(this.destroyRef)).subscribe({next:n=>i(n)});return{unsubscribe:()=>t.unsubscribe()}}}function a(s,i){return new P(s)}var F=d(1413);const x={now:()=>(x.delegate||Date).now(),delegate:void 0};class D extends F.B{constructor(i=1/0,t=1/0,n=x){super(),this._bufferSize=i,this._windowTime=t,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,i),this._windowTime=Math.max(1,t)}next(i){const{isStopped:t,_buffer:n,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:c}=this;t||(n.push(i),!r&&n.push(o.now()+c)),this._trimBuffer(),super.next(i)}_subscribe(i){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(i),{_infiniteTimeWindow:n,_buffer:r}=this,o=r.slice();for(let c=0;c<o.length&&!i.closed;c+=n?1:2)i.next(o[c]);return this._checkFinalizedStatuses(i),t}_trimBuffer(){const{_bufferSize:i,_timestampProvider:t,_buffer:n,_infiniteTimeWindow:r}=this,o=(r?1:2)*i;if(i<1/0&&o<n.length&&n.splice(0,n.length-o),!r){const c=t.now();let u=0;for(let l=1;l<n.length&&n[l]<=c;l+=2)u=l;u&&n.splice(0,u+1)}}}var j=d(8359);class $ extends j.yU{constructor(i,t){super()}schedule(i,t=0){return this}}const y={setInterval(s,i,...t){const{delegate:n}=y;return n?.setInterval?n.setInterval(s,i,...t):setInterval(s,i,...t)},clearInterval(s){const{delegate:i}=y;return(i?.clearInterval||clearInterval)(s)},delegate:void 0};var M=d(7908);class f{constructor(i,t=f.now){this.schedulerActionCtor=i,this.now=t}schedule(i,t=0,n){return new this.schedulerActionCtor(this,i).schedule(n,t)}}f.now=x.now;const C=new class J extends f{constructor(i,t=f.now){super(i,t),this.actions=[],this._active=!1}flush(i){const{actions:t}=this;if(this._active)return void t.push(i);let n;this._active=!0;do{if(n=i.execute(i.state,i.delay))break}while(i=t.shift());if(this._active=!1,n){for(;i=t.shift();)i.unsubscribe();throw n}}}(class B extends ${constructor(i,t){super(i,t),this.scheduler=i,this.work=t,this.pending=!1}schedule(i,t=0){var n;if(this.closed)return this;this.state=i;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(o,this.id,t),this}requestAsyncId(i,t,n=0){return y.setInterval(i.flush.bind(i,this),n)}recycleAsyncId(i,t,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&y.clearInterval(t)}execute(i,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(i,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(i,t){let r,n=!1;try{this.work(i)}catch(o){n=!0,r=o||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:i,scheduler:t}=this,{actions:n}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,M.o)(n,this),null!=i&&(this.id=this.recycleAsyncId(t,i,null)),this.delay=null,super.unsubscribe()}}}),U=C;var V=d(9974),S=d(4360),Y=d(8750),N=d(9470);function H(s,i=C,t){const n=function Q(s=0,i,t=U){let n=-1;return null!=i&&((0,N.m)(i)?t=i:n=i),new v.c(r=>{let o=function W(s){return s instanceof Date&&!isNaN(s)}(s)?+s-t.now():s;o<0&&(o=0);let c=0;return t.schedule(function(){r.closed||(r.next(c++),0<=n?this.schedule(void 0,n):r.complete())},o)})}(s,i);return function X(s,i){return(0,V.N)((t,n)=>{const{leading:r=!0,trailing:o=!1}=i??{};let c=!1,u=null,l=null,p=!1;const Pe=()=>{l?.unsubscribe(),l=null,o&&(R(),p&&n.complete())},Ae=()=>{l=null,p&&n.complete()},w=m=>l=(0,Y.Tg)(s(m)).subscribe((0,S._)(n,Pe,Ae)),R=()=>{if(c){c=!1;const m=u;u=null,n.next(m),!p&&w(m)}};t.subscribe((0,S._)(n,m=>{c=!0,u=m,(!l||l.closed)&&(r?R():w(m))},()=>{p=!0,(!(o&&c&&l)||l.closed)&&n.complete()}))})}(()=>n,t)}var Z=d(5558);const L=new h.nKC("NGX_ECHARTS_CONFIG");class K{constructor(){this.subject=new D(1),this.subscriptions=new j.yU}doFilter(i){this.subject.next(i)}dispose(){this.subscriptions.unsubscribe()}notEmpty(i,t){this.subscriptions.add(this.subject.subscribe(n=>{if(n[i]){const r=n[i].currentValue;null!=r&&t(r)}}))}has(i,t){this.subscriptions.add(this.subject.subscribe(n=>{n[i]&&t(n[i].currentValue)}))}notFirst(i,t){this.subscriptions.add(this.subject.subscribe(n=>{n[i]&&!n[i].isFirstChange()&&t(n[i].currentValue)}))}notFirstAndEmpty(i,t){this.subscriptions.add(this.subject.subscribe(n=>{if(n[i]&&!n[i].isFirstChange()){const r=n[i].currentValue;null!=r&&t(r)}}))}}let q=(()=>{class s{constructor(){this.el=(0,h.WQX)(e.aKT),this.ngZone=(0,h.WQX)(e.SKi),this.config=(0,h.WQX)(L),this.options=(0,g.hFB)(null),this.theme=(0,g.hFB)(this.config.theme??null),this.initOpts=(0,g.hFB)(null),this.merge=(0,g.hFB)(null),this.autoResize=(0,g.hFB)(!0),this.loading=(0,g.hFB)(!1),this.loadingType=(0,g.hFB)("default"),this.loadingOpts=(0,g.hFB)(null),this.chartInit=(0,g.CGW)(),this.optionsError=(0,g.CGW)(),this.chartClick=a(this.createLazyEvent("click")),this.chartDblClick=a(this.createLazyEvent("dblclick")),this.chartMouseDown=a(this.createLazyEvent("mousedown")),this.chartMouseMove=a(this.createLazyEvent("mousemove")),this.chartMouseUp=a(this.createLazyEvent("mouseup")),this.chartMouseOver=a(this.createLazyEvent("mouseover")),this.chartMouseOut=a(this.createLazyEvent("mouseout")),this.chartGlobalOut=a(this.createLazyEvent("globalout")),this.chartContextMenu=a(this.createLazyEvent("contextmenu")),this.chartHighlight=a(this.createLazyEvent("highlight")),this.chartDownplay=a(this.createLazyEvent("downplay")),this.chartSelectChanged=a(this.createLazyEvent("selectchanged")),this.chartLegendSelectChanged=a(this.createLazyEvent("legendselectchanged")),this.chartLegendSelected=a(this.createLazyEvent("legendselected")),this.chartLegendUnselected=a(this.createLazyEvent("legendunselected")),this.chartLegendLegendSelectAll=a(this.createLazyEvent("legendselectall")),this.chartLegendLegendInverseSelect=a(this.createLazyEvent("legendinverseselect")),this.chartLegendScroll=a(this.createLazyEvent("legendscroll")),this.chartDataZoom=a(this.createLazyEvent("datazoom")),this.chartDataRangeSelected=a(this.createLazyEvent("datarangeselected")),this.chartGraphRoam=a(this.createLazyEvent("graphroam")),this.chartGeoRoam=a(this.createLazyEvent("georoam")),this.chartTreeRoam=a(this.createLazyEvent("treeroam")),this.chartTimelineChanged=a(this.createLazyEvent("timelinechanged")),this.chartTimelinePlayChanged=a(this.createLazyEvent("timelineplaychanged")),this.chartRestore=a(this.createLazyEvent("restore")),this.chartDataViewChanged=a(this.createLazyEvent("dataviewchanged")),this.chartMagicTypeChanged=a(this.createLazyEvent("magictypechanged")),this.chartGeoSelectChanged=a(this.createLazyEvent("geoselectchanged")),this.chartGeoSelected=a(this.createLazyEvent("geoselected")),this.chartGeoUnselected=a(this.createLazyEvent("geounselected")),this.chartAxisAreaSelected=a(this.createLazyEvent("axisareaselected")),this.chartBrush=a(this.createLazyEvent("brush")),this.chartBrushEnd=a(this.createLazyEvent("brushend")),this.chartBrushSelected=a(this.createLazyEvent("brushselected")),this.chartGlobalCursorTaken=a(this.createLazyEvent("globalcursortaken")),this.chartRendered=a(this.createLazyEvent("rendered")),this.chartFinished=a(this.createLazyEvent("finished")),this.animationFrameID=null,this.chart$=new D(1),this.resize$=new F.B,this.changeFilter=new K,this.resizeObFired=!1,this.echarts=this.config.echarts}ngOnChanges(t){this.changeFilter.doFilter(t)}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(H(100,C,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize()&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(t=>{for(const n of t)n.target===this.el.nativeElement&&(this.resizeObFired?this.animationFrameID=window.requestAnimationFrame(()=>{this.resize$.next()}):this.resizeObFired=!0)})),this.resizeOb.observe(this.el.nativeElement)),this.changeFilter.notFirstAndEmpty("options",t=>this.onOptionsChange(t)),this.changeFilter.notFirstAndEmpty("merge",t=>this.setOption(t)),this.changeFilter.has("loading",t=>this.toggleLoading(!!t)),this.changeFilter.notFirst("theme",()=>this.refreshChart())}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.loadingSub&&this.loadingSub.unsubscribe(),this.changeFilter.dispose(),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(t){this.chart?t?this.chart.showLoading(this.loadingType(),this.loadingOpts()):this.chart.hideLoading():this.loadingSub=this.chart$.subscribe(n=>t?n.showLoading(this.loadingType(),this.loadingOpts()):n.hideLoading())}setOption(t,n){if(this.chart)try{this.chart.setOption(t,n)}catch(r){console.error(r),this.optionsError.emit(r)}}refreshChart(){var t=this;return(0,_.A)(function*(){t.dispose(),yield t.initChart()})()}createChart(){const t=this.el.nativeElement;if(window&&window.getComputedStyle){const n=window.getComputedStyle(t,null).getPropertyValue("height");(!n||"0px"===n)&&(!t.style.height||"0px"===t.style.height)&&(t.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:r})=>r(t,this.theme??this.config?.theme,this.initOpts())))}initChart(){var t=this;return(0,_.A)(function*(){yield t.onOptionsChange(t.options());const n=t.merge();n&&t.chart&&t.setOption(n)})()}onOptionsChange(t){var n=this;return(0,_.A)(function*(){t&&(n.chart||(n.chart=yield n.createChart(),n.chart$.next(n.chart),n.chartInit.emit(n.chart)),n.setOption(n.options(),!0))})()}createLazyEvent(t){return function A(s){const i=(0,O.nf)(s);return new v.c(t=>{i?.onDestroy(()=>t.complete());const n=s.subscribe(r=>t.next(r));return()=>n.unsubscribe()})}(this.chartInit).pipe((0,Z.n)(n=>new v.c(r=>(n.on(t,o=>this.ngZone.run(()=>r.next(o))),()=>{this.chart&&(this.chart.isDisposed()||n.off(t))}))))}static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275dir=e.FsC({type:s,selectors:[["echarts"],["","echarts",""]],inputs:{options:[1,"options"],theme:[1,"theme"],initOpts:[1,"initOpts"],merge:[1,"merge"],autoResize:[1,"autoResize"],loading:[1,"loading"],loadingType:[1,"loadingType"],loadingOpts:[1,"loadingOpts"]},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartHighlight:"chartHighlight",chartDownplay:"chartDownplay",chartSelectChanged:"chartSelectChanged",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendLegendSelectAll:"chartLegendLegendSelectAll",chartLegendLegendInverseSelect:"chartLegendLegendInverseSelect",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartGraphRoam:"chartGraphRoam",chartGeoRoam:"chartGeoRoam",chartTreeRoam:"chartTreeRoam",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartGeoSelectChanged:"chartGeoSelectChanged",chartGeoSelected:"chartGeoSelected",chartGeoUnselected:"chartGeoUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartGlobalCursorTaken:"chartGlobalCursorTaken",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[e.OA$]})}return s})();function I(s){return{provide:L,useValue:s}}let ee=(()=>{class s{static forRoot(t){return{ngModule:s,providers:[I(t)]}}static forChild(){return{ngModule:s}}static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275mod=e.$C({type:s});static#n=this.\u0275inj=h.G2t({})}return s})();var te=d(7355),ne=d(4666),ie=d(1680),se=d(5056),re=d(2780);const oe=(s,i,t,n)=>({"bg-success":s,"bg-danger":i,"bg-warning text-dark":t,"bg-info text-white":n}),ae=()=>[];function ce(s,i){1&s&&(e.j41(0,"div",3)(1,"p"),e.EFF(2,"Please login to access the site."),e.k0s()())}function le(s,i){1&s&&(e.j41(0,"div",11),e.nrm(1,"div",12),e.j41(2,"div",13),e.EFF(3,"Loading user data..."),e.k0s()())}function he(s,i){if(1&s&&(e.j41(0,"header",14)(1,"h1",15),e.EFF(2),e.k0s(),e.j41(3,"p")(4,"strong"),e.EFF(5,"Email:"),e.k0s(),e.EFF(6),e.k0s()()),2&s){const t=e.XpG(2);e.R7$(2),e.SpI("Welcome, ",t.user.name),e.R7$(4),e.SpI(" ",t.user.email)}}function de(s,i){1&s&&(e.j41(0,"div",11),e.nrm(1,"div",12),e.j41(2,"div"),e.EFF(3,"Loading your applied jobs..."),e.k0s()())}function ue(s,i){1&s&&(e.j41(0,"div",16)(1,"p"),e.EFF(2,"You haven\u2019t applied for any jobs yet."),e.k0s()())}function pe(s,i){if(1&s&&(e.j41(0,"tr")(1,"td",27),e.EFF(2),e.k0s(),e.j41(3,"td",28)(4,"span",29),e.EFF(5),e.k0s()()()),2&s){const t=i.$implicit;e.R7$(2),e.JRh(t.title),e.R7$(2),e.Y8G("ngClass",e.ziG(3,oe,"Accepted"===t.status,"Rejected"===t.status,"In Progress"===t.status,"Applied"===t.status)),e.R7$(),e.SpI(" ",t.status," ")}}function ge(s,i){if(1&s){const t=e.RV6();e.j41(0,"section",17)(1,"h2",18),e.EFF(2,"Your Applied Jobs"),e.k0s(),e.j41(3,"div",19)(4,"button",20),e.bIt("click",function(){h.eBV(t);const r=e.XpG(2);return h.Njj(r.sortByStatusOrder())}),e.EFF(5," Sort by Status Priority "),e.k0s()(),e.j41(6,"div",21)(7,"table",22)(8,"thead",23)(9,"tr")(10,"th",24),e.EFF(11,"Job Title"),e.k0s(),e.j41(12,"th",25),e.EFF(13,"Status"),e.k0s()()(),e.j41(14,"tbody"),e.DNE(15,pe,6,8,"tr",26),e.k0s()()()()}if(2&s){const t=e.XpG(2);e.R7$(15),e.Y8G("ngForOf",t.appliedJobs)}}function me(s,i){if(1&s){const t=e.RV6();e.j41(0,"nav",30)(1,"ul",31)(2,"li",32)(3,"button",33),e.bIt("click",function(){h.eBV(t);const r=e.XpG(2);return h.Njj(r.goToPreviousPage())}),e.EFF(4," \u25c0 "),e.k0s()(),e.j41(5,"li",34)(6,"span",35),e.EFF(7),e.k0s()(),e.j41(8,"li",32)(9,"button",33),e.bIt("click",function(){h.eBV(t);const r=e.XpG(2);return h.Njj(r.goToNextPage())}),e.EFF(10," \u27a4 "),e.k0s()()()()}if(2&s){const t=e.XpG(2);e.R7$(2),e.AVh("disabled",1===t.currentPage),e.R7$(),e.Y8G("disabled",1===t.currentPage),e.R7$(4),e.Lme(" Page ",t.currentPage," of ",t.totalPages," "),e.R7$(),e.AVh("disabled",t.currentPage===t.totalPages),e.R7$(),e.Y8G("disabled",t.currentPage===t.totalPages)}}function fe(s,i){if(1&s&&e.nrm(0,"div",40),2&s){const t=e.XpG(3);e.Y8G("options",t.userPieChartOptions)}}function be(s,i){if(1&s&&e.nrm(0,"div",40),2&s){const t=e.XpG(3);e.Y8G("options",t.userBarChartOptions)}}function ve(s,i){if(1&s&&(e.j41(0,"section",36)(1,"h2",37),e.EFF(2,"Application Insights"),e.k0s(),e.j41(3,"div",38),e.DNE(4,fe,1,1,"div",39)(5,be,1,1,"div",39),e.k0s()()),2&s){const t=e.XpG(2);e.R7$(4),e.Y8G("ngIf",t.userPieChartOptions),e.R7$(),e.Y8G("ngIf",t.userBarChartOptions)}}function ye(s,i){1&s&&(e.j41(0,"div",41),e.EFF(1,"Loading charts..."),e.k0s())}function _e(s,i){if(1&s&&(e.qex(0),e.DNE(1,le,4,0,"div",4)(2,he,7,2,"header",5)(3,de,4,0,"div",4)(4,ue,3,0,"div",6)(5,ge,16,1,"section",7)(6,me,11,8,"nav",8)(7,ve,6,2,"section",9)(8,ye,2,0,"div",10),e.bVm()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.isUserLoading),e.R7$(),e.Y8G("ngIf",!t.isUserLoading&&t.user),e.R7$(),e.Y8G("ngIf",t.isUserJobsLoading),e.R7$(),e.Y8G("ngIf",!t.isUserJobsLoading&&0===t.appliedJobs.length&&t.user),e.R7$(),e.Y8G("ngIf",!t.isUserJobsLoading&&t.appliedJobs.length>0),e.R7$(),e.Y8G("ngIf",t.totalPages>1),e.R7$(),e.Y8G("ngIf",!t.isChartLoading&&(t.userPieChartOptions||t.userBarChartOptions)),e.R7$(),e.Y8G("ngIf",t.isChartLoading)}}function xe(s,i){1&s&&(e.j41(0,"div",11),e.nrm(1,"div",12),e.j41(2,"div"),e.EFF(3,"Loading employer data..."),e.k0s()())}function Ce(s,i){if(1&s&&(e.j41(0,"p")(1,"strong"),e.EFF(2,"Company:"),e.k0s(),e.EFF(3),e.k0s()),2&s){const t=e.XpG(3);e.R7$(3),e.SpI(" ",null==t.employer?null:t.employer.company)}}function Ee(s,i){if(1&s&&(e.j41(0,"div")(1,"h1",15),e.EFF(2),e.k0s(),e.j41(3,"p")(4,"strong"),e.EFF(5,"Email:"),e.k0s(),e.EFF(6),e.k0s(),e.DNE(7,Ce,4,1,"p",2),e.k0s()),2&s){const t=e.XpG(2);e.R7$(2),e.SpI("Welcome, ",null==t.employer?null:t.employer.name),e.R7$(4),e.SpI(" ",null==t.employer?null:t.employer.email),e.R7$(),e.Y8G("ngIf",null==t.employer?null:t.employer.company)}}function Fe(s,i){1&s&&(e.j41(0,"div",11),e.nrm(1,"div",12),e.j41(2,"div"),e.EFF(3,"Loading job listings..."),e.k0s()())}function De(s,i){1&s&&(e.j41(0,"div",16)(1,"p"),e.EFF(2,"No jobs posted yet."),e.k0s()())}function je(s,i){if(1&s){const t=e.RV6();e.j41(0,"div",50),e.bIt("click",function(){const r=h.eBV(t).$implicit,o=e.XpG(3);return h.Njj(o.viewJobDetails(r._id))})("keyup.enter",function(){const r=h.eBV(t).$implicit,o=e.XpG(3);return h.Njj(o.viewJobDetails(r._id))}),e.j41(1,"div",51)(2,"div",52)(3,"h5",53),e.EFF(4),e.k0s(),e.j41(5,"p",54)(6,"strong"),e.EFF(7,"Applicants:"),e.k0s(),e.EFF(8),e.k0s(),e.j41(9,"p",54)(10,"strong"),e.EFF(11,"Vacancies:"),e.k0s(),e.EFF(12),e.k0s()()()()}if(2&s){const t=i.$implicit;e.BMQ("aria-label","Job listing for "+t.title+" with "+t.applicantCount+" applicants and "+t.vacancies+" vacancies"),e.R7$(4),e.JRh(t.title),e.R7$(4),e.SpI(" ",t.applicantCount),e.R7$(4),e.SpI(" ",t.vacancies)}}function Se(s,i){if(1&s&&(e.j41(0,"div",48),e.DNE(1,je,13,4,"div",49),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.jobs)}}function Le(s,i){if(1&s){const t=e.RV6();e.j41(0,"li",32)(1,"button",58),e.bIt("click",function(){const r=h.eBV(t).index,o=e.XpG(3);return h.Njj(o.fetchEmployerJobs(r+1))}),e.EFF(2),e.k0s()()}if(2&s){const t=i.index,n=e.XpG(3);e.AVh("active",n.employerCurrentPage===t+1),e.R7$(2),e.SpI(" ",t+1," ")}}function Ie(s,i){if(1&s){const t=e.RV6();e.j41(0,"nav",55)(1,"ul",56)(2,"li",32)(3,"button",33),e.bIt("click",function(){h.eBV(t);const r=e.XpG(2);return h.Njj(r.fetchEmployerJobs(r.employerCurrentPage-1))}),e.EFF(4," Previous "),e.k0s()(),e.DNE(5,Le,3,3,"li",57),e.j41(6,"li",32)(7,"button",33),e.bIt("click",function(){h.eBV(t);const r=e.XpG(2);return h.Njj(r.fetchEmployerJobs(r.employerCurrentPage+1))}),e.EFF(8," Next "),e.k0s()()()()}if(2&s){const t=e.XpG(2);e.R7$(2),e.AVh("disabled",1===t.employerCurrentPage),e.R7$(),e.Y8G("disabled",1===t.employerCurrentPage),e.R7$(2),e.Y8G("ngForOf",e.lJ4(7,ae).constructor(t.employerTotalPages)),e.R7$(),e.AVh("disabled",t.employerCurrentPage===t.employerTotalPages),e.R7$(),e.Y8G("disabled",t.employerCurrentPage===t.employerTotalPages)}}function we(s,i){if(1&s&&e.nrm(0,"div",40),2&s){const t=e.XpG(3);e.Y8G("options",t.employerBarChartOptions)}}function Re(s,i){if(1&s&&e.nrm(0,"div",40),2&s){const t=e.XpG(3);e.Y8G("options",t.employerPieChartOptions)}}function ke(s,i){if(1&s&&(e.j41(0,"section",36)(1,"h2",37),e.EFF(2,"Application Statistics"),e.k0s(),e.j41(3,"div",38),e.DNE(4,we,1,1,"div",39)(5,Re,1,1,"div",39),e.k0s()()),2&s){const t=e.XpG(2);e.R7$(4),e.Y8G("ngIf",null==t.employerBarChartOptions||null==t.employerBarChartOptions.series?null:t.employerBarChartOptions.series.length),e.R7$(),e.Y8G("ngIf",null==t.employerPieChartOptions||null==t.employerPieChartOptions.series?null:t.employerPieChartOptions.series.length)}}function Te(s,i){1&s&&(e.j41(0,"div",41),e.EFF(1,"Loading charts..."),e.k0s())}function Oe(s,i){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"header",14),e.DNE(2,xe,4,0,"div",4)(3,Ee,8,3,"div",2),e.k0s(),e.j41(4,"section",42)(5,"div",43)(6,"h2",44),e.EFF(7,"My Job Listings"),e.k0s(),e.j41(8,"button",45),e.bIt("click",function(){h.eBV(t);const r=e.XpG();return h.Njj(r.addJob())}),e.EFF(9," + Add Job "),e.k0s()(),e.DNE(10,Fe,4,0,"div",4)(11,De,3,0,"div",6)(12,Se,2,1,"div",46)(13,Ie,9,8,"nav",47),e.k0s(),e.DNE(14,ke,6,2,"section",9)(15,Te,2,0,"div",10),e.bVm()}if(2&s){const t=e.XpG();e.R7$(2),e.Y8G("ngIf",t.isEmployerLoading),e.R7$(),e.Y8G("ngIf",!t.isEmployerLoading&&t.employer),e.R7$(7),e.Y8G("ngIf",t.isEmployerJobsLoading),e.R7$(),e.Y8G("ngIf",!t.isEmployerJobsLoading&&0===t.jobs.length),e.R7$(),e.Y8G("ngIf",!t.isEmployerJobsLoading&&t.jobs.length>0),e.R7$(),e.Y8G("ngIf",t.employerTotalPages>1),e.R7$(),e.Y8G("ngIf",!t.isChartLoading),e.R7$(),e.Y8G("ngIf",t.isChartLoading)}}let Ge=(()=>{class s{authService;userService;employerService;jobService;router;role=null;token=null;isChartLoading=!1;userId=null;user=null;appliedJobs=[];userPieChartOptions={};userBarChartOptions={};isUserLoading=!1;isUserJobsLoading=!1;totalPages=1;currentPage=1;employerId=null;employer=null;jobs=[];employerPieChartOptions={};employerBarChartOptions={};isEmployerLoading=!1;isEmployerJobsLoading=!1;employerCurrentPage=1;employerTotalPages=0;totalJobs=0;constructor(t,n,r,o,c){this.authService=t,this.userService=n,this.employerService=r,this.jobService=o,this.router=c}ngOnInit(){this.token=this.authService.getToken();const t=this.authService.getUser();this.token&&t?(this.role=t.role,"user"===this.role?(this.userId=t._id,this.loadUserData(),this.loadAppliedJobs(),this.fetchUserStatusChart(),this.fetchUserDomainChart()):"employer"===this.role&&(this.employerId=t._id,this.fetchEmployerData(),this.fetchEmployerJobs(),this.fetchEmployerBarChart(),this.fetchEmployerPieChart())):console.warn("No token or user found")}loadUserData(){this.isUserLoading=!0,this.userService.getUserData(this.userId).subscribe({next:t=>{this.user=t.user},error:t=>console.error("User data error:",t),complete:()=>this.isUserLoading=!1})}sortByStatusOrder(){const t={Accepted:1,"In Progress":2,Rejected:3,Applied:4};this.appliedJobs.sort((n,r)=>t[n.status]-t[r.status])}loadAppliedJobs(){this.isUserJobsLoading=!0,this.jobService.appliedJobs(this.userId,this.currentPage,5).subscribe({next:t=>{this.appliedJobs=t.jobs||t,this.totalPages=t.totalPages||1},error:t=>console.error("Applied jobs error:",t),complete:()=>this.isUserJobsLoading=!1})}goToPreviousPage(){this.currentPage>1&&(this.currentPage--,this.loadAppliedJobs())}goToNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadAppliedJobs())}fetchUserStatusChart(){this.isChartLoading=!0,this.userService.getUserStatusSummary(this.userId,this.token).subscribe({next:t=>{const n=Object.entries(t).map(([r,o])=>({name:r,value:o}));this.userPieChartOptions={title:{text:"Application Status",left:"left"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"right"},series:[{type:"pie",radius:"50%",data:n}]}},error:t=>console.error("Status chart error:",t),complete:()=>this.isChartLoading=!1})}fetchUserDomainChart(){this.isChartLoading=!0,this.userService.getDomainSummary(this.userId,this.token).subscribe({next:t=>{this.userBarChartOptions={title:{text:"Applications by Domain",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"5%",right:"5%",bottom:"5%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:t.map(n=>n.domain),axisLabel:{formatter:n=>n.length>20?n.slice(0,20)+"\u2026":n}},series:[{name:"Applications",type:"bar",data:t.map(n=>n.count),itemStyle:{color:"#91cc75"},label:{show:!0,position:"right"}}]}},error:t=>console.error("Domain chart error:",t),complete:()=>this.isChartLoading=!1})}fetchEmployerData(){this.isEmployerLoading=!0,this.employerService.getEmployerData(this.employerId,this.token).subscribe({next:t=>this.employer=t.employer,error:t=>console.error("Employer data error:",t),complete:()=>this.isEmployerLoading=!1})}fetchEmployerJobs(t=1){this.isEmployerJobsLoading=!0,this.jobService.getJobSummaries(this.employerId,this.token,t).subscribe({next:n=>{this.jobs=n.jobs,this.employerCurrentPage=n.currentPage,this.employerTotalPages=n.totalPages,this.totalJobs=n.totalJobs},error:n=>console.error("Jobs error:",n),complete:()=>this.isEmployerJobsLoading=!1})}fetchEmployerBarChart(){this.jobService.getJobSummaries(this.employerId,this.token).subscribe({next:t=>{this.employerBarChartOptions={title:{text:"Applications per Job",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"5%",right:"5%",bottom:"5%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:t.map(n=>n.title),axisLabel:{formatter:n=>n.length>20?n.slice(0,20)+"\u2026":n}},series:[{type:"bar",data:t.map(n=>n.applicantCount),itemStyle:{color:"#5470C6"},label:{show:!0,position:"right"}}]}},error:t=>console.error("Bar chart error:",t)})}fetchEmployerPieChart(){this.employerService.getApplicationStatusSummary(this.employerId,this.token).subscribe({next:t=>{const n=Object.entries(t).map(([r,o])=>({name:r,value:o}));this.employerPieChartOptions={title:{text:"Application Status Distribution",left:"center"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{type:"pie",radius:"50%",data:n}]}},error:t=>console.error("Pie chart error:",t)})}viewJobDetails(t){this.router.navigate(["/employer/job-details"],{queryParams:{id:t}})}addJob(){this.router.navigate(["/employer/my-listings"],{state:{openAddModal:!0}})}changePage(t){t<1||t>this.employerTotalPages||t===this.employerCurrentPage||this.fetchEmployerJobs(t)}paginationRange(){const t=[];let r=Math.max(1,this.employerCurrentPage-Math.floor(2.5)),o=r+5-1;o>this.employerTotalPages&&(o=this.employerTotalPages,r=Math.max(1,o-5+1));for(let c=r;c<=o;c++)t.push(c);return t}static \u0275fac=function(n){return new(n||s)(e.rXU(te.u),e.rXU(ne.D),e.rXU(ie.h),e.rXU(se.L),e.rXU(re.Ix))};static \u0275cmp=e.VBU({type:s,selectors:[["app-dashboard"]],features:[e.Jv_([I({echarts:()=>d.e(697).then(d.bind(d,9697))})])],decls:4,vars:3,consts:[[1,"container","my-5","p-4","bg-white","rounded","shadow","dashboard-container"],["class","text-center text-muted fst-italic mt-5","aria-live","polite",4,"ngIf"],[4,"ngIf"],["aria-live","polite",1,"text-center","text-muted","fst-italic","mt-5"],["class","d-flex justify-content-center align-items-center gap-3 py-3 text-secondary fw-bold",4,"ngIf"],["class","text-center mb-4",4,"ngIf"],["class","text-center text-muted fst-italic mt-5",4,"ngIf"],["class","mt-4",4,"ngIf"],["class","mt-3 d-flex justify-content-center",4,"ngIf"],["class","charts-section mt-5 p-4 bg-white rounded shadow",4,"ngIf"],["class","text-center fw-bold mt-4",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","gap-3","py-3","text-secondary","fw-bold"],["role","status",1,"spinner-border","text-secondary"],[1,"loading-text"],[1,"text-center","mb-4"],[1,"text-primary","mb-2"],[1,"text-center","text-muted","fst-italic","mt-5"],[1,"mt-4"],[1,"text-center","fs-4","fw-semibold","mb-3","border-bottom","pb-2"],[1,"d-flex","justify-content-end","mb-2"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"table-responsive","rounded","shadow-sm"],[1,"table","table-striped","table-hover","table-borderless","align-middle","mb-0"],[1,"table-light"],["scope","col"],["scope","col",1,"text-end"],[4,"ngFor","ngForOf"],[1,"fw-medium","text-dark"],[1,"text-end"],[1,"badge","px-3","py-2",3,"ngClass"],[1,"mt-3","d-flex","justify-content-center"],[1,"pagination","mb-0"],[1,"page-item"],[1,"page-link",3,"click","disabled"],[1,"page-item","disabled"],[1,"page-link"],[1,"charts-section","mt-5","p-4","bg-white","rounded","shadow"],[1,"text-center","fs-4","fw-semibold","mb-4","border-bottom","pb-2"],[1,"d-flex","flex-column","flex-md-row","justify-content-around","gap-4","align-items-center"],["echarts","","class","chart w-100","style","max-width: 600px; height: 400px;",3,"options",4,"ngIf"],["echarts","",1,"chart","w-100",2,"max-width","600px","height","400px",3,"options"],[1,"text-center","fw-bold","mt-4"],["aria-labelledby","jobListingsHeading"],[1,"position-relative","text-center","mb-4","border-bottom","pb-2"],["id","jobListingsHeading",1,"fs-4","fw-semibold","m-0"],[1,"btn","btn-primary","btn-sm","fw-semibold","position-absolute","end-0",2,"top","45%","transform","translateY(-53%)",3,"click"],["class","row g-3",4,"ngIf"],["aria-label","Employer Job Pages",4,"ngIf"],[1,"row","g-3"],["class","col-md-6 col-lg-4","role","listitem","tabindex","0",3,"click","keyup.enter",4,"ngFor","ngForOf"],["role","listitem","tabindex","0",1,"col-md-6","col-lg-4",3,"click","keyup.enter"],[1,"card","h-100","shadow-sm","border-2","cursor-pointer","job-tile"],[1,"card-body"],[1,"card-title","text-primary"],[1,"card-text"],["aria-label","Employer Job Pages"],[1,"pagination","justify-content-center","mt-4"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"page-link",3,"click"]],template:function(n,r){1&n&&(e.j41(0,"div",0),e.DNE(1,ce,3,0,"div",1)(2,_e,9,8,"ng-container",2)(3,Oe,16,8,"ng-container",2),e.k0s()),2&n&&(e.R7$(),e.Y8G("ngIf",!r.token),e.R7$(),e.Y8G("ngIf",r.token&&"user"===r.role),e.R7$(),e.Y8G("ngIf",r.token&&"employer"===r.role))},dependencies:[b.MD,b.YU,b.Sq,b.bT,k.YN,ee,q],styles:[".job-tile[_ngcontent-%COMP%]{cursor:pointer}.job-tile[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 18px #0000001f}"]})}return s})()}}]);