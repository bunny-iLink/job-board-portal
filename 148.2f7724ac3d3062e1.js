"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[148],{8148:(R,f,a)=>{a.r(f),a.d(f,{SearchJobsComponent:()=>P});var _=a(6396),p=a(4341),g=a(5312),e=a(7325),d=a(5113),h=a(9085),u=a(7472);function m(t,s){1&t&&(e.j41(0,"div",15)(1,"p"),e.EFF(2," Please "),e.j41(3,"strong"),e.EFF(4,"set your preferred domain"),e.k0s(),e.EFF(5," in your profile, or "),e.j41(6,"strong"),e.EFF(7,"use the search box or filters"),e.k0s(),e.EFF(8," to find relevant jobs. "),e.k0s()())}function b(t,s){if(1&t){const n=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){const o=d.eBV(n).$implicit,l=e.XpG();return d.Njj(l.openJobModal(o))}),e.j41(1,"h3"),e.EFF(2),e.k0s(),e.j41(3,"p")(4,"strong"),e.EFF(5),e.k0s(),e.EFF(6),e.k0s(),e.j41(7,"p"),e.EFF(8),e.k0s()()}if(2&t){const n=s.$implicit;e.R7$(2),e.JRh(n.title),e.R7$(3),e.JRh(n.company),e.R7$(),e.SpI(" - ",n.location),e.R7$(2),e.Lme("",n.type," | ",n.salary," LPA")}}function F(t,s){if(1&t&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&t){const n=s.$implicit;e.R7$(),e.JRh(n)}}function x(t,s){if(1&t&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&t){const n=s.$implicit;e.R7$(),e.JRh(n)}}function C(t,s){1&t&&(e.j41(0,"p")(1,"strong"),e.EFF(2,"Preferred Skills:"),e.k0s()())}function J(t,s){if(1&t&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&t){const n=s.$implicit;e.R7$(),e.JRh(n)}}function M(t,s){if(1&t&&(e.j41(0,"ul"),e.DNE(1,J,2,1,"li",22),e.k0s()),2&t){const n=e.XpG(3);e.R7$(),e.Y8G("ngForOf",n.selectedJob.description.preferredSkills)}}function E(t,s){1&t&&(e.j41(0,"p")(1,"strong"),e.EFF(2,"What We Offer:"),e.k0s()())}function k(t,s){if(1&t&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&t){const n=s.$implicit;e.R7$(),e.JRh(n)}}function S(t,s){if(1&t&&(e.j41(0,"ul"),e.DNE(1,k,2,1,"li",22),e.k0s()),2&t){const n=e.XpG(3);e.R7$(),e.Y8G("ngForOf",n.selectedJob.description.whatWeOffer)}}function j(t,s){if(1&t&&(e.j41(0,"div")(1,"p")(2,"strong"),e.EFF(3,"Overview:"),e.k0s()(),e.j41(4,"p"),e.EFF(5),e.k0s(),e.j41(6,"p")(7,"strong"),e.EFF(8,"Responsibilities:"),e.k0s()(),e.j41(9,"ul"),e.DNE(10,F,2,1,"li",22),e.k0s(),e.j41(11,"p")(12,"strong"),e.EFF(13,"Required Skills:"),e.k0s()(),e.j41(14,"ul"),e.DNE(15,x,2,1,"li",22),e.k0s(),e.DNE(16,C,3,0,"p",20)(17,M,2,1,"ul",20)(18,E,3,0,"p",20)(19,S,2,1,"ul",20),e.k0s()),2&t){const n=e.XpG(2);e.R7$(5),e.JRh(n.selectedJob.description.overview),e.R7$(5),e.Y8G("ngForOf",n.selectedJob.description.responsibilities),e.R7$(5),e.Y8G("ngForOf",n.selectedJob.description.requiredSkills),e.R7$(),e.Y8G("ngIf",null==n.selectedJob.description.preferredSkills?null:n.selectedJob.description.preferredSkills.length),e.R7$(),e.Y8G("ngIf",null==n.selectedJob.description.preferredSkills?null:n.selectedJob.description.preferredSkills.length),e.R7$(),e.Y8G("ngIf",null==n.selectedJob.description.whatWeOffer?null:n.selectedJob.description.whatWeOffer.length),e.R7$(),e.Y8G("ngIf",null==n.selectedJob.description.whatWeOffer?null:n.selectedJob.description.whatWeOffer.length)}}function O(t,s){if(1&t){const n=e.RV6();e.j41(0,"div",17)(1,"div",18)(2,"span",19),e.bIt("click",function(){d.eBV(n);const o=e.XpG();return d.Njj(o.closeModal())}),e.EFF(3,"\xd7"),e.k0s(),e.j41(4,"h2"),e.EFF(5),e.k0s(),e.j41(6,"p")(7,"strong"),e.EFF(8,"Company:"),e.k0s(),e.EFF(9),e.k0s(),e.j41(10,"p")(11,"strong"),e.EFF(12,"Location:"),e.k0s(),e.EFF(13),e.k0s(),e.j41(14,"p")(15,"strong"),e.EFF(16,"Type:"),e.k0s(),e.EFF(17),e.k0s(),e.j41(18,"p")(19,"strong"),e.EFF(20,"Salary:"),e.k0s(),e.EFF(21),e.k0s(),e.j41(22,"p")(23,"strong"),e.EFF(24,"Experience Required:"),e.k0s(),e.EFF(25),e.k0s(),e.j41(26,"p")(27,"strong"),e.EFF(28,"Vacancies:"),e.k0s(),e.EFF(29),e.k0s(),e.j41(30,"p")(31,"strong"),e.EFF(32,"Status:"),e.k0s(),e.EFF(33),e.k0s(),e.DNE(34,j,20,7,"div",20),e.j41(35,"button",21),e.bIt("click",function(){d.eBV(n);const o=e.XpG();return d.Njj(o.applyToJob(o.selectedJob))}),e.EFF(36,"Apply"),e.k0s()()()}if(2&t){const n=e.XpG();e.R7$(5),e.JRh(n.selectedJob.title),e.R7$(4),e.SpI(" ",n.selectedJob.company),e.R7$(4),e.SpI(" ",n.selectedJob.location),e.R7$(4),e.SpI(" ",n.selectedJob.type),e.R7$(4),e.SpI(" \u20b9",n.selectedJob.salary," LPA"),e.R7$(4),e.SpI(" ",n.selectedJob.experience," Years"),e.R7$(4),e.SpI(" ",n.selectedJob.vacancies),e.R7$(4),e.SpI(" ",n.selectedJob.status),e.R7$(),e.Y8G("ngIf",n.selectedJob.description)}}let P=(()=>{class t{http;authService;allJobs=[];filteredJobs=[];searchTerm="";selectedJob=null;token=null;showModal=!1;showDomainWarning=!1;filters={type:"",experience:"",expectedSalary:""};constructor(n,i){this.http=n,this.authService=i}ngOnInit(){this.searchJobs(),this.token=this.authService.getToken()}isBrowser(){return typeof window<"u"}getStoredUser(){if(this.isBrowser()){const n=localStorage.getItem("user");if(n)try{return JSON.parse(n)}catch{console.warn("Invalid JSON in localStorage")}}return null}searchJobs(){const n=this.getStoredUser();if(!n)return void console.warn("User not found in localStorage");const i=this.filters.type||this.filters.experience||this.filters.expectedSalary,o=this.searchTerm.trim().length>0,l=n.preferredDomain?.trim().length>0;if(!i&&!o&&!l)return this.showDomainWarning=!0,void this.http.get(g.c.apiUrl+"/api/searchJobs").subscribe({next:c=>{this.allJobs=c,this.filteredJobs=[...c]},error:c=>console.error("Error fetching all jobs:",c)});this.showDomainWarning=!1;const r={userId:n._id,domain:n.preferredDomain,search:this.searchTerm.trim()};this.filters.type&&(r.type=this.filters.type),this.filters.experience&&(r.experience=this.filters.experience),this.filters.expectedSalary&&(r.expectedSalary=this.filters.expectedSalary);const v=new URLSearchParams(r).toString();this.http.get(g.c.apiUrl+`/api/searchJobs?${v}`).subscribe({next:c=>{this.allJobs=c,this.filteredJobs=[...c]},error:c=>console.error("Error fetching jobs:",c)})}openJobModal(n){this.selectedJob=n,this.showModal=!0}closeModal(){this.selectedJob=null,this.showModal=!1}applyToJob(n){const i=this.getStoredUser();i?this.isProfileComplete(i)?this.http.post(g.c.apiUrl+"/api/applyForJob",{userId:i._id,jobId:n._id},{headers:{Authorization:`Bearer ${this.token}`}}).subscribe({next:l=>{alert(l.message||"Application submitted!"),this.closeModal(),this.searchJobs()},error:l=>{409===l.status?alert("Already applied to this job."):(console.error("Application error:",l),alert("Failed to apply.")),this.closeModal()}}):alert("Please complete your profile (name, email, and resume are required) before applying for jobs."):alert("Please log in to apply.")}isProfileComplete(n){if(!n?.name?.trim()||!n?.email?.trim()||!n?.resume?.data)return!1;const i=["phone","address","experience","preferredDomain"];for(const o of i)if(!n[o])return!!confirm("Your profile is missing some recommended information. Apply anyway?");return!0}static \u0275fac=function(i){return new(i||t)(e.rXU(h.Qq),e.rXU(u.u))};static \u0275cmp=e.VBU({type:t,selectors:[["app-search-jobs"]],decls:26,vars:7,consts:[[1,"search-container"],["placeholder","Search jobs...",3,"ngModelChange","input","ngModel"],[1,"filters"],[3,"ngModelChange","change","ngModel"],["value",""],["value","Full-Time"],["value","Part-Time"],["value","Internship"],["value","Remote"],["type","number","placeholder","Years",3,"ngModelChange","input","ngModel"],["type","number",3,"ngModelChange","input","ngModel"],["class","warning-message",4,"ngIf"],[1,"jobs-grid"],["class","job-card",3,"click",4,"ngFor","ngForOf"],["class","modal",4,"ngIf"],[1,"warning-message"],[1,"job-card",3,"click"],[1,"modal"],[1,"modal-content"],[1,"close-btn",3,"click"],[4,"ngIf"],[3,"click"],[4,"ngFor","ngForOf"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"input",1),e.mxI("ngModelChange",function(r){return e.DH7(o.searchTerm,r)||(o.searchTerm=r),r}),e.bIt("input",function(){return o.searchJobs()}),e.k0s(),e.j41(2,"div",2)(3,"label"),e.EFF(4,"Type: "),e.j41(5,"select",3),e.mxI("ngModelChange",function(r){return e.DH7(o.filters.type,r)||(o.filters.type=r),r}),e.bIt("change",function(){return o.searchJobs()}),e.j41(6,"option",4),e.EFF(7,"All"),e.k0s(),e.j41(8,"option",5),e.EFF(9,"Full-Time"),e.k0s(),e.j41(10,"option",6),e.EFF(11,"Part-Time"),e.k0s(),e.j41(12,"option",7),e.EFF(13,"Internship"),e.k0s(),e.j41(14,"option",8),e.EFF(15,"Remote"),e.k0s()()(),e.j41(16,"label"),e.EFF(17,"Experience (in Years): "),e.j41(18,"input",9),e.mxI("ngModelChange",function(r){return e.DH7(o.filters.experience,r)||(o.filters.experience=r),r}),e.bIt("input",function(){return o.searchJobs()}),e.k0s()(),e.j41(19,"label"),e.EFF(20,"Expected Salary (in LPA): "),e.j41(21,"input",10),e.mxI("ngModelChange",function(r){return e.DH7(o.filters.expectedSalary,r)||(o.filters.expectedSalary=r),r}),e.bIt("input",function(){return o.searchJobs()}),e.k0s()()(),e.DNE(22,m,9,0,"div",11),e.j41(23,"div",12),e.DNE(24,b,9,5,"div",13),e.k0s()(),e.DNE(25,O,37,9,"div",14)),2&i&&(e.R7$(),e.R50("ngModel",o.searchTerm),e.R7$(4),e.R50("ngModel",o.filters.type),e.R7$(13),e.R50("ngModel",o.filters.experience),e.R7$(3),e.R50("ngModel",o.filters.expectedSalary),e.R7$(),e.Y8G("ngIf",o.showDomainWarning),e.R7$(2),e.Y8G("ngForOf",o.filteredJobs),e.R7$(),e.Y8G("ngIf",o.showModal))},dependencies:[_.MD,_.Sq,_.bT,p.YN,p.xH,p.y7,p.me,p.Q0,p.wz,p.BC,p.vS],styles:[".search-container[_ngcontent-%COMP%]{max-width:1100px;margin:32px auto;padding:24px;background-color:#f7f9fc;border-radius:12px;box-shadow:0 4px 10px #00000014;font-family:Segoe UI,sans-serif}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .search-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px;margin:6px 0;border:1px solid #ccc;border-radius:6px;width:100%;font-size:15px}.warning-message[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404;padding:.1em;border:1px solid #ffeeba;border-radius:5px;margin-top:15px}.warning-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:5px}.filters[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-top:16px;box-sizing:border-box}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .search-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px;margin:6px 0;border:1px solid #ccc;border-radius:6px;width:100%;font-size:15px;box-sizing:border-box}.jobs-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:20px;margin-top:32px}.job-card[_ngcontent-%COMP%]{padding:16px;background-color:#fff;border-radius:10px;border:1px solid #e0e0e0;box-shadow:0 2px 6px #0000000d;cursor:pointer;transition:box-shadow .2s}.job-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 16px #0000001a}.job-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;color:#0073e6}.job-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:14px}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000073;display:flex;align-items:center;justify-content:center;z-index:2000;padding:16px}.modal-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;max-width:600px;width:100%;max-height:90vh;overflow-y:auto;padding:24px;position:relative;box-shadow:0 6px 18px #00000040}.close-btn[_ngcontent-%COMP%]{position:absolute;top:12px;right:16px;font-size:26px;color:#888;cursor:pointer;font-weight:700}.close-btn[_ngcontent-%COMP%]:hover{color:#000}.modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:#0073e6}.modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;font-size:15px}.modal-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:20px;margin:10px 0}.modal-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:6px}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px;padding:10px 16px;background-color:#0073e6;color:#fff;border:none;border-radius:6px;font-weight:500;cursor:pointer;transition:background-color .2s}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#005bb5}@media (max-width: 600px){.filters[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}return t})()}}]);