"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[500],{1500:(k,g,c)=>{c.r(g),c.d(g,{UserProfileComponent:()=>R});var _=c(6396),a=c(4341),f=c(5312),e=c(7325),i=c(5113),m=c(9085),h=c(5738),C=c(7472),P=c(345);function M(s,u){1&s&&(e.j41(0,"div",3),e.nrm(1,"div",4),e.j41(2,"div",5),e.EFF(3," Loading profile... "),e.k0s()())}function x(s,u){if(1&s&&(e.j41(0,"div",6),e.EFF(1),e.k0s()),2&s){const n=e.XpG();e.R7$(),e.JRh(n.error)}}function b(s,u){if(1&s&&e.nrm(0,"img",46),2&s){const n=e.XpG(2);e.Y8G("src","data:"+n.user.profilePicture.contentType+";base64,"+n.user.profilePicture.data,e.B4B)}}function j(s,u){1&s&&(e.j41(0,"div",47),e.EFF(1," No profile picture "),e.k0s())}function v(s,u){if(1&s){const n=e.RV6();e.j41(0,"a",48),e.bIt("click",function(){i.eBV(n);const t=e.XpG(2);return i.Njj(t.openResume())}),e.EFF(1," View Resume "),e.k0s()}}function F(s,u){1&s&&(e.j41(0,"div"),e.EFF(1,"No resume uploaded"),e.k0s())}function E(s,u){if(1&s&&(e.j41(0,"div",49),e.EFF(1),e.k0s()),2&s){const n=e.XpG(2);e.R7$(),e.JRh(n.success)}}function y(s,u){if(1&s){const n=e.RV6();e.j41(0,"div",7)(1,"form",8),e.bIt("ngSubmit",function(){i.eBV(n);const t=e.XpG();return i.Njj(t.updateProfile())}),e.j41(2,"h2"),e.EFF(3,"User Profile"),e.k0s(),e.j41(4,"div",9)(5,"div",10),e.DNE(6,b,1,1,"img",11)(7,j,2,0,"div",12),e.k0s(),e.j41(8,"div",13)(9,"input",14),e.bIt("change",function(t){i.eBV(n);const o=e.XpG();return i.Njj(o.onProfilePictureSelected(t))}),e.k0s()()(),e.j41(10,"label"),e.EFF(11," Name: "),e.j41(12,"input",15),e.mxI("ngModelChange",function(t){i.eBV(n);const o=e.XpG();return e.DH7(o.user.name,t)||(o.user.name=t),i.Njj(t)}),e.k0s()(),e.j41(13,"label"),e.EFF(14," Email: "),e.j41(15,"input",16),e.mxI("ngModelChange",function(t){i.eBV(n);const o=e.XpG();return e.DH7(o.user.email,t)||(o.user.email=t),i.Njj(t)}),e.k0s()(),e.j41(16,"label"),e.EFF(17," Password: "),e.j41(18,"input",17),e.mxI("ngModelChange",function(t){i.eBV(n);const o=e.XpG();return e.DH7(o.user.password,t)||(o.user.password=t),i.Njj(t)}),e.k0s()(),e.j41(19,"label"),e.EFF(20," Role: "),e.j41(21,"input",18),e.mxI("ngModelChange",function(t){i.eBV(n);const o=e.XpG();return e.DH7(o.user.role,t)||(o.user.role=t),i.Njj(t)}),e.k0s()(),e.j41(22,"label"),e.EFF(23," Address: "),e.j41(24,"input",19),e.mxI("ngModelChange",function(t){i.eBV(n);const o=e.XpG();return e.DH7(o.user.address,t)||(o.user.address=t),i.Njj(t)}),e.k0s()(),e.j41(25,"label"),e.EFF(26," Experience (years): "),e.j41(27,"input",20),e.mxI("ngModelChange",function(t){i.eBV(n);const o=e.XpG();return e.DH7(o.user.experience,t)||(o.user.experience=t),i.Njj(t)}),e.k0s()(),e.j41(28,"label"),e.EFF(29," Phone: "),e.j41(30,"input",21),e.mxI("ngModelChange",function(t){i.eBV(n);const o=e.XpG();return e.DH7(o.user.phone,t)||(o.user.phone=t),i.Njj(t)}),e.k0s()(),e.j41(31,"label"),e.EFF(32," Preferred Domain: "),e.j41(33,"select",22),e.mxI("ngModelChange",function(t){i.eBV(n);const o=e.XpG();return e.DH7(o.user.preferredDomain,t)||(o.user.preferredDomain=t),i.Njj(t)}),e.j41(34,"option",23),e.EFF(35,"Select preferred domain"),e.k0s(),e.j41(36,"option",24),e.EFF(37,"Technology & IT"),e.k0s(),e.j41(38,"option",25),e.EFF(39,"Sales & Marketing"),e.k0s(),e.j41(40,"option",26),e.EFF(41,"Business & Management"),e.k0s(),e.j41(42,"option",27),e.EFF(43,"Finance & Accounting"),e.k0s(),e.j41(44,"option",28),e.EFF(45,"Human Resources & Recruitment"),e.k0s(),e.j41(46,"option",29),e.EFF(47,"Healthcare & Life Sciences"),e.k0s(),e.j41(48,"option",30),e.EFF(49,"Education & Training"),e.k0s(),e.j41(50,"option",31),e.EFF(51,"Engineering & Manufacturing"),e.k0s(),e.j41(52,"option",32),e.EFF(53,"Creative & Design"),e.k0s(),e.j41(54,"option",33),e.EFF(55,"Legal & Compliance"),e.k0s(),e.j41(56,"option",34),e.EFF(57,"Media & Communication"),e.k0s(),e.j41(58,"option",35),e.EFF(59,"Logistics & Supply Chain"),e.k0s(),e.j41(60,"option",36),e.EFF(61,"Customer Service & Support"),e.k0s()()(),e.j41(62,"div",37)(63,"div",38),e.DNE(64,v,2,0,"a",39)(65,F,2,0,"div",40),e.k0s(),e.j41(66,"div",13)(67,"input",41),e.bIt("change",function(t){i.eBV(n);const o=e.XpG();return i.Njj(o.onResumeSelected(t))}),e.k0s()()(),e.j41(68,"div",42)(69,"button",43),e.EFF(70,"Save Changes"),e.k0s(),e.j41(71,"button",44),e.bIt("click",function(){i.eBV(n);const t=e.XpG();return i.Njj(t.deleteProfile())}),e.EFF(72,"Delete Profile"),e.k0s()(),e.DNE(73,E,2,1,"div",45),e.k0s()()}if(2&s){const n=e.XpG();e.R7$(6),e.Y8G("ngIf",(null==n.user||null==n.user.profilePicture?null:n.user.profilePicture.data)&&(null==n.user||null==n.user.profilePicture?null:n.user.profilePicture.contentType)),e.R7$(),e.Y8G("ngIf",!(null!=n.user&&null!=n.user.profilePicture&&n.user.profilePicture.data)),e.R7$(5),e.R50("ngModel",n.user.name),e.R7$(3),e.R50("ngModel",n.user.email),e.R7$(3),e.R50("ngModel",n.user.password),e.R7$(3),e.R50("ngModel",n.user.role),e.R7$(3),e.R50("ngModel",n.user.address),e.R7$(3),e.R50("ngModel",n.user.experience),e.R7$(3),e.R50("ngModel",n.user.phone),e.R7$(3),e.R50("ngModel",n.user.preferredDomain),e.R7$(31),e.Y8G("ngIf",n.resumeURL),e.R7$(),e.Y8G("ngIf",!n.resumeURL),e.R7$(8),e.Y8G("ngIf",n.success)}}let R=(()=>{class s{http;router;authService;sanitizer;userId=null;user=null;loading=!1;error="";success="";token=null;resumeURL=null;apiBase=f.c.apiUrl+"/api";constructor(n,r,t,o){this.http=n,this.router=r,this.authService=t,this.sanitizer=o}ngOnInit(){this.userId=this.authService.getUserId(),this.token=this.authService.getToken(),this.userId?this.fetchuser():this.error="No user ID found."}fetchuser(){this.loading=!0,this.http.get(`${this.apiBase}/getUserData/${this.userId}`).subscribe({next:n=>{this.user=n.user,this.user&&(this.user.password="",this.user?.resume?.data)&&(this.resumeURL=this.sanitizer.bypassSecurityTrustResourceUrl(`data:${this.user.resume.contentType};base64,${this.user.resume.data}`)),this.loading=!1},error:()=>{this.error="Failed to load user data.",this.loading=!1}})}updateProfile(){if(!this.userId)return;this.success="",this.error="";const n={...this.user};n.updatedAt=(new Date).toISOString(),(!n.password||""===n.password.trim())&&delete n.password,this.http.put(`${this.apiBase}/updateUser/${this.userId}`,n,{headers:{Authorization:`Bearer ${this.token}`}}).subscribe({next:r=>{this.success="Profile updated successfully!",typeof window<"u"&&localStorage.setItem("user",JSON.stringify(r.user||n))},error:()=>{this.error="Failed to update profile."}})}deleteProfile(){this.userId&&confirm("Are you sure you want to delete your profile? This action cannot be undone.")&&this.http.delete(`${this.apiBase}/deleteUser/${this.userId}`,{headers:{Authorization:`Bearer ${this.token}`}}).subscribe({next:()=>{alert("Profile deleted successfully."),typeof window<"u"&&(localStorage.removeItem("id"),localStorage.removeItem("token")),this.router.navigate(["/login"])},error:()=>{this.error="Failed to delete profile."}})}onProfilePictureSelected(n){const r=n.target.files?.[0];if(r){const t=new FileReader;t.onload=()=>{const o=t.result.split(",")[1];this.user.profilePicture={data:o,contentType:r.type}},t.readAsDataURL(r)}}onResumeSelected(n){const r=n.target.files?.[0];if(r){if("application/pdf"!==r.type)return void alert("Only PDF files are allowed.");if(r.size>2097152)return void alert("File size must be less than 2MB.");const t=new FileReader;t.onload=()=>{const o=t.result.split(",")[1];this.user.resume={data:o,contentType:r.type},console.log(this.user.resume)},t.readAsDataURL(r)}}openResume(){if(!this.user?.resume?.data)return;const n=atob(this.user.resume.data),r=new Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);const t=new Uint8Array(r),o=new Blob([t],{type:this.user.resume.contentType}),p=URL.createObjectURL(o),d=window.open(p,"_blank");if(!d||d.closed||typeof d.closed>"u"){const l=document.createElement("a");l.href=p,l.target="_blank",l.rel="noopener noreferrer",l.download="resume.pdf",document.body.appendChild(l),l.click(),document.body.removeChild(l)}setTimeout(()=>URL.revokeObjectURL(p),1e3)}static \u0275fac=function(r){return new(r||s)(e.rXU(m.Qq),e.rXU(h.Ix),e.rXU(C.u),e.rXU(P.up))};static \u0275cmp=e.VBU({type:s,selectors:[["app-user-profile"]],decls:3,vars:3,consts:[["class","spinner-container",4,"ngIf"],["class","error",4,"ngIf"],["class","profile-container",4,"ngIf"],[1,"spinner-container"],[1,"spinner"],[1,"loading-text"],[1,"error"],[1,"profile-container"],[3,"ngSubmit"],[1,"profile-picture-section"],[1,"current-picture"],["alt","Profile Picture","class","profile-picture",3,"src",4,"ngIf"],["class","no-picture",4,"ngIf"],[1,"upload-section"],["type","file","accept","image/*",3,"change"],["type","text","name","name","required","",3,"ngModelChange","ngModel"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["type","password","name","password",3,"ngModelChange","ngModel"],["type","text","name","role","readonly","",3,"ngModelChange","ngModel"],["type","text","name","company",3,"ngModelChange","ngModel"],["type","number","name","experience",3,"ngModelChange","ngModel"],["type","text","name","designation",3,"ngModelChange","ngModel"],["id","preferredDomain","name","preferredDomain",3,"ngModelChange","ngModel"],["value",""],["value","Technology & IT"],["value","Sales & Marketing"],["value","Business & Management"],["value","Finance & Accounting"],["value","Human Resources & Recruitment"],["value","Healthcare & Life Sciences"],["value","Education & Training"],["value","Engineering & Manufacturing"],["value","Creative & Design"],["value","Legal & Compliance"],["value","Media & Communication"],["value","Logistics & Supply Chain"],["value","Customer Service & Support"],[1,"resume-section"],[1,"current-resume"],["target","_blank","rel","noopener noreferrer",3,"click",4,"ngIf"],[4,"ngIf"],["type","file","accept","application/pdf",3,"change"],[1,"buttons"],["type","submit"],["type","button",1,"delete-btn",3,"click"],["class","success",4,"ngIf"],["alt","Profile Picture",1,"profile-picture",3,"src"],[1,"no-picture"],["target","_blank","rel","noopener noreferrer",3,"click"],[1,"success"]],template:function(r,t){1&r&&e.DNE(0,M,4,0,"div",0)(1,x,2,1,"div",1)(2,y,74,13,"div",2),2&r&&(e.Y8G("ngIf",t.loading),e.R7$(),e.Y8G("ngIf",t.error),e.R7$(),e.Y8G("ngIf",!t.loading&&!t.error))},dependencies:[_.MD,_.bT,a.YN,a.qT,a.xH,a.y7,a.me,a.Q0,a.wz,a.BC,a.cb,a.YS,a.vS,a.cV],styles:[".profile-container[_ngcontent-%COMP%]{max-width:700px;margin:40px auto;padding:24px;background-color:#f9f9f9;border-radius:12px;box-shadow:0 4px 12px #0000001a}h2[_ngcontent-%COMP%]{margin-bottom:24px;color:#0073e6;text-align:center}.loading[_ngcontent-%COMP%], .error[_ngcontent-%COMP%], .success[_ngcontent-%COMP%]{text-align:center;padding:12px;margin:16px auto;width:100%;max-width:700px;border-radius:6px;font-weight:500}.spinner-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1rem;padding:1rem;font-weight:700;color:#555}.spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:4px solid #ccc;border-top:4px solid #555;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-text[_ngcontent-%COMP%]{font-size:1rem}.error[_ngcontent-%COMP%]{background-color:#ffe6e6;color:#d8000c}.success[_ngcontent-%COMP%]{background-color:#e6ffe6;color:#007a00}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:14px;font-weight:500}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;margin-top:6px;border:1px solid #ccc;border-radius:6px;font-size:15px}.profile-picture-section[_ngcontent-%COMP%]{display:flex;gap:24px;align-items:center;margin-bottom:24px;flex-wrap:wrap}.current-picture[_ngcontent-%COMP%]{flex:1;text-align:center}.profile-picture[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;object-fit:cover;border:2px solid #0073e6}.no-picture[_ngcontent-%COMP%]{color:#888;font-style:italic}.upload-section[_ngcontent-%COMP%]{flex:2;display:flex;flex-direction:column;gap:10px}.resume-section[_ngcontent-%COMP%]{margin-top:24px;display:flex;flex-direction:column;gap:10px}.current-resume[_ngcontent-%COMP%]{margin-bottom:8px}.current-resume[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#0073e6;text-decoration:underline}.current-resume[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#005bb5}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:24px;gap:16px}button[_ngcontent-%COMP%]{padding:10px 16px;background-color:#0073e6;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}button[_ngcontent-%COMP%]:hover{background-color:#005bb5}.delete-btn[_ngcontent-%COMP%]{background-color:#d9534f}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#c9302c}"]})}return s})()}}]);