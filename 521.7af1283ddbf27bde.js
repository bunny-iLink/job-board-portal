"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[521],{4521:(I,d,a)=>{a.r(d),a.d(d,{EmployerDashboardComponent:()=>D});var l=a(6396),m=a(4341),c=a(5312),o=a(7325),r=a(5113),_=a(9085),g=a(5738);function h(n,t){1&n&&(o.j41(0,"div",7),o.nrm(1,"div",8),o.j41(2,"div",9),o.EFF(3,"Loading employer data..."),o.k0s()())}function b(n,t){if(1&n&&(o.j41(0,"p")(1,"strong"),o.EFF(2,"Company:"),o.k0s(),o.EFF(3),o.k0s()),2&n){const e=o.XpG(3);o.R7$(3),o.SpI(" ",null==e.employer?null:e.employer.company)}}function f(n,t){if(1&n&&(o.j41(0,"div")(1,"h1"),o.EFF(2),o.k0s(),o.j41(3,"p")(4,"strong"),o.EFF(5,"Email:"),o.k0s(),o.EFF(6),o.k0s(),o.DNE(7,b,4,1,"p",6),o.k0s()),2&n){const e=o.XpG(2);o.R7$(2),o.SpI("Welcome, ",null==e.employer?null:e.employer.name),o.R7$(4),o.SpI(" ",null==e.employer?null:e.employer.email),o.R7$(),o.Y8G("ngIf",null==e.employer?null:e.employer.company)}}function u(n,t){if(1&n&&(o.j41(0,"header",4),o.DNE(1,h,4,0,"div",5)(2,f,8,3,"div",6),o.k0s()),2&n){const e=o.XpG();o.R7$(),o.Y8G("ngIf",e.isEmployerLoading),o.R7$(),o.Y8G("ngIf",!e.isEmployerLoading&&e.employer)}}function y(n,t){1&n&&(o.j41(0,"div",7),o.nrm(1,"div",8),o.j41(2,"div",9),o.EFF(3,"Loading job listings..."),o.k0s()())}function E(n,t){1&n&&(o.j41(0,"div",14)(1,"p"),o.EFF(2,"No jobs posted yet."),o.k0s()())}function x(n,t){if(1&n){const e=o.RV6();o.j41(0,"div",17),o.bIt("click",function(){const s=r.eBV(e).$implicit,p=o.XpG(3);return r.Njj(p.viewJobDetails(s._id))})("keyup.enter",function(){const s=r.eBV(e).$implicit,p=o.XpG(3);return r.Njj(p.viewJobDetails(s._id))}),o.j41(1,"h4"),o.EFF(2),o.k0s(),o.j41(3,"p")(4,"strong"),o.EFF(5,"Applicants:"),o.k0s(),o.EFF(6),o.k0s(),o.j41(7,"p")(8,"strong"),o.EFF(9,"Vacancies:"),o.k0s(),o.EFF(10),o.k0s()()}if(2&n){const e=t.$implicit;o.BMQ("aria-label","Job listing for "+e.title+" with "+e.applicantCount+" applicants and "+e.vacancies+" vacancies"),o.R7$(2),o.JRh(e.title),o.R7$(4),o.SpI(" ",e.applicantCount),o.R7$(4),o.SpI(" ",e.vacancies)}}function v(n,t){if(1&n&&(o.j41(0,"div",15),o.DNE(1,x,11,4,"div",16),o.k0s()),2&n){const e=o.XpG(2);o.R7$(),o.Y8G("ngForOf",e.jobs)}}function j(n,t){if(1&n&&(o.j41(0,"section",10)(1,"h2",11),o.EFF(2,"My Job Listings"),o.k0s(),o.DNE(3,y,4,0,"div",5)(4,E,3,0,"div",12)(5,v,2,1,"div",13),o.k0s()),2&n){const e=o.XpG();o.R7$(3),o.Y8G("ngIf",e.isJobsLoading),o.R7$(),o.Y8G("ngIf",!e.isJobsLoading&&0===e.jobs.length),o.R7$(),o.Y8G("ngIf",!e.isJobsLoading&&e.jobs.length>0)}}function C(n,t){1&n&&(o.j41(0,"div",18)(1,"p"),o.EFF(2,"Please login to access the site."),o.k0s()())}let D=(()=>{class n{http;router;employer=null;employerId=null;token=null;jobs=[];isEmployerLoading=!1;isJobsLoading=!1;constructor(e,i){this.http=e,this.router=i}ngOnInit(){if(typeof window<"u"){this.token=localStorage.getItem("token");const e=localStorage.getItem("user");if(e){const i=JSON.parse(e);this.employerId=i._id,this.fetchEmployerData(),this.fetchJobSummaries()}else console.warn("No valid employer")}}fetchEmployerData(){this.employerId&&(this.isEmployerLoading=!0,this.http.get(c.c.apiUrl+`/api/getEmployerData/${this.employerId}`,{headers:{Authorization:`Bearer ${this.token}`}}).subscribe({next:e=>{this.employer=e.employer,console.log("Employer loaded:",this.employer),this.isEmployerLoading=!1},error:e=>{console.error("Failed to load employer data:",e),this.isEmployerLoading=!1}}))}fetchJobSummaries(){this.employerId&&this.token?(this.isJobsLoading=!0,this.http.get(c.c.apiUrl+`/api/employer/${this.employerId}/jobs-summary`,{headers:{Authorization:`Bearer ${this.token}`}}).subscribe({next:e=>{this.jobs=e,console.log("Jobs with applicant count:",this.jobs),this.isJobsLoading=!1},error:e=>{console.error("Failed to load job summaries:",e),this.isJobsLoading=!1}})):console.warn("Cannot fetch job summaries: employerId or token missing")}viewJobDetails(e){this.router.navigate(["/employer/job-details"],{queryParams:{id:e}})}static \u0275fac=function(i){return new(i||n)(o.rXU(_.Qq),o.rXU(g.Ix))};static \u0275cmp=o.VBU({type:n,selectors:[["app-employer-dashboard"]],decls:4,vars:3,consts:[["role","main",1,"dashboard-container"],["class","dashboard-header",4,"ngIf"],["aria-labelledby","jobListingsHeading",4,"ngIf"],["class","no-data","aria-live","polite",4,"ngIf"],[1,"dashboard-header"],["class","spinner-container",4,"ngIf"],[4,"ngIf"],[1,"spinner-container"],[1,"spinner"],[1,"loading-text"],["aria-labelledby","jobListingsHeading"],["id","jobListingsHeading",1,"section-title"],["class","no-jobs",4,"ngIf"],["class","job-grid","role","list",4,"ngIf"],[1,"no-jobs"],["role","list",1,"job-grid"],["class","job-tile","role","listitem","tabindex","0",3,"click","keyup.enter",4,"ngFor","ngForOf"],["role","listitem","tabindex","0",1,"job-tile",3,"click","keyup.enter"],["aria-live","polite",1,"no-data"]],template:function(i,s){1&i&&(o.j41(0,"div",0),o.DNE(1,u,3,2,"header",1)(2,j,6,3,"section",2)(3,C,3,0,"div",3),o.k0s()),2&i&&(o.R7$(),o.Y8G("ngIf",s.token),o.R7$(),o.Y8G("ngIf",s.token),o.R7$(),o.Y8G("ngIf",!s.token))},dependencies:[l.MD,l.Sq,l.bT,m.YN],styles:[".dashboard-container[_ngcontent-%COMP%]{max-width:1100px;margin:40px auto;padding:24px;background-color:#fff;border-radius:12px;box-shadow:0 6px 18px #0000001a}.dashboard-header[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:10px;font-size:28px;color:#0073e6}.dashboard-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:16px;color:#444}.section-title[_ngcontent-%COMP%]{font-size:22px;margin-bottom:16px;color:#333;border-bottom:2px solid #e0e0e0;padding-bottom:4px}.spinner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;font-weight:700;color:#555}.spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:4px solid #ccc;border-top:4px solid #555;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-text[_ngcontent-%COMP%]{font-size:1rem}.job-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}.job-tile[_ngcontent-%COMP%]{background:#f8f9fa;padding:16px;border-radius:8px;cursor:pointer;transition:box-shadow .2s,transform .2s;border:1px solid #ddd}.job-tile[_ngcontent-%COMP%]:hover{box-shadow:0 4px 10px #0000001a;transform:translateY(-2px)}.job-tile[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;color:#0073e6}.job-tile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:14px;color:#333}.no-jobs[_ngcontent-%COMP%], .no-data[_ngcontent-%COMP%]{text-align:center;font-size:16px;color:#666;margin-top:40px}"]})}return n})()}}]);