"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[974],{7974:(Te,E,h)=>{h.r(E),h.d(E,{DashboardComponent:()=>Oe});var b=h(6396),R=h(4341),C=h(467),t=h(7325),u=h(5113),g=h(7705),v=h(1985),G=h(6977),T=h(3427);class z{source;destroyed=!1;destroyRef=(0,u.WQX)(u.abz);constructor(n){this.source=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}subscribe(n){if(this.destroyed)throw new u.buA(953,!1);const e=this.source.pipe(function k(s){s||(s=(0,u.WQX)(u.abz));const n=new v.c(e=>{if(!s.destroyed)return s.onDestroy(e.next.bind(e));e.next()});return e=>e.pipe((0,G.Q)(n))}(this.destroyRef)).subscribe({next:i=>n(i)});return{unsubscribe:()=>e.unsubscribe()}}}function a(s,n){return new z(s)}var F=h(1413);const x={now:()=>(x.delegate||Date).now(),delegate:void 0};class D extends F.B{constructor(n=1/0,e=1/0,i=x){super(),this._bufferSize=n,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,e)}next(n){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:l}=this;e||(i.push(n),!r&&i.push(o.now()+l)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(n),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let l=0;l<o.length&&!n.closed;l+=i?1:2)n.next(o[l]);return this._checkFinalizedStatuses(n),e}_trimBuffer(){const{_bufferSize:n,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*n;if(n<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const l=e.now();let d=0;for(let c=1;c<i.length&&i[c]<=l;c+=2)d=c;d&&i.splice(0,d+1)}}}var L=h(8359);class U extends L.yU{constructor(n,e){super()}schedule(n,e=0){return this}}const y={setInterval(s,n,...e){const{delegate:i}=y;return i?.setInterval?i.setInterval(s,n,...e):setInterval(s,n,...e)},clearInterval(s){const{delegate:n}=y;return(n?.clearInterval||clearInterval)(s)},delegate:void 0};var $=h(7908);class f{constructor(n,e=f.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,i){return new this.schedulerActionCtor(this,n).schedule(i,e)}}f.now=x.now;const _=new class J extends f{constructor(n,e=f.now){super(n,e),this.actions=[],this._active=!1}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let i;this._active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}(class B extends U{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var i;if(this.closed)return this;this.state=n;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,e),this}requestAsyncId(n,e,i=0){return y.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&y.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let r,i=!1;try{this.work(n)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,$.o)(i,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}}),P=_;var Y=h(9974),S=h(4360),X=h(8750),N=h(9470);function H(s,n=_,e){const i=function Q(s=0,n,e=P){let i=-1;return null!=n&&((0,N.m)(n)?e=n:i=n),new v.c(r=>{let o=function W(s){return s instanceof Date&&!isNaN(s)}(s)?+s-e.now():s;o<0&&(o=0);let l=0;return e.schedule(function(){r.closed||(r.next(l++),0<=i?this.schedule(void 0,i):r.complete())},o)})}(s,n);return function V(s,n){return(0,Y.N)((e,i)=>{const{leading:r=!0,trailing:o=!1}=n??{};let l=!1,d=null,c=null,p=!1;const Re=()=>{c?.unsubscribe(),c=null,o&&(O(),p&&i.complete())},Ge=()=>{c=null,p&&i.complete()},j=m=>c=(0,X.Tg)(s(m)).subscribe((0,S._)(i,Re,Ge)),O=()=>{if(l){l=!1;const m=d;d=null,i.next(m),!p&&j(m)}};e.subscribe((0,S._)(i,m=>{l=!0,d=m,(!c||c.closed)&&(r?O():j(m))},()=>{p=!0,(!(o&&l&&c)||c.closed)&&i.complete()}))})}(()=>i,e)}var Z=h(5558);const w=new u.nKC("NGX_ECHARTS_CONFIG");class K{constructor(){this.subject=new D(1),this.subscriptions=new L.yU}doFilter(n){this.subject.next(n)}dispose(){this.subscriptions.unsubscribe()}notEmpty(n,e){this.subscriptions.add(this.subject.subscribe(i=>{if(i[n]){const r=i[n].currentValue;null!=r&&e(r)}}))}has(n,e){this.subscriptions.add(this.subject.subscribe(i=>{i[n]&&e(i[n].currentValue)}))}notFirst(n,e){this.subscriptions.add(this.subject.subscribe(i=>{i[n]&&!i[n].isFirstChange()&&e(i[n].currentValue)}))}notFirstAndEmpty(n,e){this.subscriptions.add(this.subject.subscribe(i=>{if(i[n]&&!i[n].isFirstChange()){const r=i[n].currentValue;null!=r&&e(r)}}))}}let q=(()=>{class s{constructor(){this.el=(0,u.WQX)(t.aKT),this.ngZone=(0,u.WQX)(t.SKi),this.config=(0,u.WQX)(w),this.options=(0,g.hFB)(null),this.theme=(0,g.hFB)(this.config.theme??null),this.initOpts=(0,g.hFB)(null),this.merge=(0,g.hFB)(null),this.autoResize=(0,g.hFB)(!0),this.loading=(0,g.hFB)(!1),this.loadingType=(0,g.hFB)("default"),this.loadingOpts=(0,g.hFB)(null),this.chartInit=(0,g.CGW)(),this.optionsError=(0,g.CGW)(),this.chartClick=a(this.createLazyEvent("click")),this.chartDblClick=a(this.createLazyEvent("dblclick")),this.chartMouseDown=a(this.createLazyEvent("mousedown")),this.chartMouseMove=a(this.createLazyEvent("mousemove")),this.chartMouseUp=a(this.createLazyEvent("mouseup")),this.chartMouseOver=a(this.createLazyEvent("mouseover")),this.chartMouseOut=a(this.createLazyEvent("mouseout")),this.chartGlobalOut=a(this.createLazyEvent("globalout")),this.chartContextMenu=a(this.createLazyEvent("contextmenu")),this.chartHighlight=a(this.createLazyEvent("highlight")),this.chartDownplay=a(this.createLazyEvent("downplay")),this.chartSelectChanged=a(this.createLazyEvent("selectchanged")),this.chartLegendSelectChanged=a(this.createLazyEvent("legendselectchanged")),this.chartLegendSelected=a(this.createLazyEvent("legendselected")),this.chartLegendUnselected=a(this.createLazyEvent("legendunselected")),this.chartLegendLegendSelectAll=a(this.createLazyEvent("legendselectall")),this.chartLegendLegendInverseSelect=a(this.createLazyEvent("legendinverseselect")),this.chartLegendScroll=a(this.createLazyEvent("legendscroll")),this.chartDataZoom=a(this.createLazyEvent("datazoom")),this.chartDataRangeSelected=a(this.createLazyEvent("datarangeselected")),this.chartGraphRoam=a(this.createLazyEvent("graphroam")),this.chartGeoRoam=a(this.createLazyEvent("georoam")),this.chartTreeRoam=a(this.createLazyEvent("treeroam")),this.chartTimelineChanged=a(this.createLazyEvent("timelinechanged")),this.chartTimelinePlayChanged=a(this.createLazyEvent("timelineplaychanged")),this.chartRestore=a(this.createLazyEvent("restore")),this.chartDataViewChanged=a(this.createLazyEvent("dataviewchanged")),this.chartMagicTypeChanged=a(this.createLazyEvent("magictypechanged")),this.chartGeoSelectChanged=a(this.createLazyEvent("geoselectchanged")),this.chartGeoSelected=a(this.createLazyEvent("geoselected")),this.chartGeoUnselected=a(this.createLazyEvent("geounselected")),this.chartAxisAreaSelected=a(this.createLazyEvent("axisareaselected")),this.chartBrush=a(this.createLazyEvent("brush")),this.chartBrushEnd=a(this.createLazyEvent("brushend")),this.chartBrushSelected=a(this.createLazyEvent("brushselected")),this.chartGlobalCursorTaken=a(this.createLazyEvent("globalcursortaken")),this.chartRendered=a(this.createLazyEvent("rendered")),this.chartFinished=a(this.createLazyEvent("finished")),this.animationFrameID=null,this.chart$=new D(1),this.resize$=new F.B,this.changeFilter=new K,this.resizeObFired=!1,this.echarts=this.config.echarts}ngOnChanges(e){this.changeFilter.doFilter(e)}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(H(100,_,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize()&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(e=>{for(const i of e)i.target===this.el.nativeElement&&(this.resizeObFired?this.animationFrameID=window.requestAnimationFrame(()=>{this.resize$.next()}):this.resizeObFired=!0)})),this.resizeOb.observe(this.el.nativeElement)),this.changeFilter.notFirstAndEmpty("options",e=>this.onOptionsChange(e)),this.changeFilter.notFirstAndEmpty("merge",e=>this.setOption(e)),this.changeFilter.has("loading",e=>this.toggleLoading(!!e)),this.changeFilter.notFirst("theme",()=>this.refreshChart())}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.loadingSub&&this.loadingSub.unsubscribe(),this.changeFilter.dispose(),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(e){this.chart?e?this.chart.showLoading(this.loadingType(),this.loadingOpts()):this.chart.hideLoading():this.loadingSub=this.chart$.subscribe(i=>e?i.showLoading(this.loadingType(),this.loadingOpts()):i.hideLoading())}setOption(e,i){if(this.chart)try{this.chart.setOption(e,i)}catch(r){console.error(r),this.optionsError.emit(r)}}refreshChart(){var e=this;return(0,C.A)(function*(){e.dispose(),yield e.initChart()})()}createChart(){const e=this.el.nativeElement;if(window&&window.getComputedStyle){const i=window.getComputedStyle(e,null).getPropertyValue("height");(!i||"0px"===i)&&(!e.style.height||"0px"===e.style.height)&&(e.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:r})=>r(e,this.theme??this.config?.theme,this.initOpts())))}initChart(){var e=this;return(0,C.A)(function*(){yield e.onOptionsChange(e.options());const i=e.merge();i&&e.chart&&e.setOption(i)})()}onOptionsChange(e){var i=this;return(0,C.A)(function*(){e&&(i.chart||(i.chart=yield i.createChart(),i.chart$.next(i.chart),i.chartInit.emit(i.chart)),i.setOption(i.options(),!0))})()}createLazyEvent(e){return function A(s){const n=(0,T.nf)(s);return new v.c(e=>{n?.onDestroy(()=>e.complete());const i=s.subscribe(r=>e.next(r));return()=>i.unsubscribe()})}(this.chartInit).pipe((0,Z.n)(i=>new v.c(r=>(i.on(e,o=>this.ngZone.run(()=>r.next(o))),()=>{this.chart&&(this.chart.isDisposed()||i.off(e))}))))}static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275dir=t.FsC({type:s,selectors:[["echarts"],["","echarts",""]],inputs:{options:[1,"options"],theme:[1,"theme"],initOpts:[1,"initOpts"],merge:[1,"merge"],autoResize:[1,"autoResize"],loading:[1,"loading"],loadingType:[1,"loadingType"],loadingOpts:[1,"loadingOpts"]},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartHighlight:"chartHighlight",chartDownplay:"chartDownplay",chartSelectChanged:"chartSelectChanged",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendLegendSelectAll:"chartLegendLegendSelectAll",chartLegendLegendInverseSelect:"chartLegendLegendInverseSelect",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartGraphRoam:"chartGraphRoam",chartGeoRoam:"chartGeoRoam",chartTreeRoam:"chartTreeRoam",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartGeoSelectChanged:"chartGeoSelectChanged",chartGeoSelected:"chartGeoSelected",chartGeoUnselected:"chartGeoUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartGlobalCursorTaken:"chartGlobalCursorTaken",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[t.OA$]})}return s})();function I(s){return{provide:w,useValue:s}}let ee=(()=>{class s{static forRoot(e){return{ngModule:s,providers:[I(e)]}}static forChild(){return{ngModule:s}}static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=t.$C({type:s});static#i=this.\u0275inj=u.G2t({})}return s})();var te=h(7355),ie=h(4666),ne=h(1680),se=h(5056),re=h(2418);const oe=(s,n,e,i)=>({"bg-success":s,"bg-danger":n,"bg-warning text-dark":e,"bg-info text-white":i});function ae(s,n){1&s&&(t.j41(0,"div",3)(1,"p"),t.EFF(2,"Please login to access the site."),t.k0s()())}function ce(s,n){1&s&&(t.j41(0,"div",10),t.nrm(1,"div",11),t.j41(2,"div",12),t.EFF(3,"Loading user data..."),t.k0s()())}function le(s,n){if(1&s&&(t.j41(0,"header",13)(1,"h1",14),t.EFF(2),t.k0s(),t.j41(3,"p")(4,"strong"),t.EFF(5,"Email:"),t.k0s(),t.EFF(6),t.k0s()()),2&s){const e=t.XpG(2);t.R7$(2),t.SpI("Welcome, ",e.user.name),t.R7$(4),t.SpI(" ",e.user.email)}}function he(s,n){1&s&&(t.j41(0,"div",10),t.nrm(1,"div",11),t.j41(2,"div"),t.EFF(3,"Loading your applied jobs..."),t.k0s()())}function de(s,n){1&s&&(t.j41(0,"div",15)(1,"p"),t.EFF(2,"You haven\u2019t applied for any jobs yet."),t.k0s()())}function ue(s,n){if(1&s&&(t.j41(0,"tr")(1,"td",23),t.EFF(2),t.k0s(),t.j41(3,"td")(4,"span",24),t.EFF(5),t.k0s()()()),2&s){const e=n.$implicit;t.R7$(2),t.JRh(e.title),t.R7$(2),t.Y8G("ngClass",t.ziG(3,oe,"Accepted"===e.status,"Rejected"===e.status,"In Progress"===e.status,"Applied"===e.status)),t.R7$(),t.SpI(" ",e.status," ")}}function pe(s,n){if(1&s&&(t.j41(0,"section",16)(1,"h2",17),t.EFF(2,"Your Applied Jobs"),t.k0s(),t.j41(3,"div",18)(4,"table",19)(5,"thead",20)(6,"tr")(7,"th",21),t.EFF(8,"Job Title"),t.k0s(),t.j41(9,"th",21),t.EFF(10,"Status"),t.k0s()()(),t.j41(11,"tbody"),t.DNE(12,ue,6,8,"tr",22),t.k0s()()()()),2&s){const e=t.XpG(2);t.R7$(12),t.Y8G("ngForOf",e.appliedJobs)}}function ge(s,n){if(1&s&&t.nrm(0,"div",29),2&s){const e=t.XpG(3);t.Y8G("options",e.userPieChartOptions)}}function me(s,n){if(1&s&&t.nrm(0,"div",29),2&s){const e=t.XpG(3);t.Y8G("options",e.userBarChartOptions)}}function fe(s,n){if(1&s&&(t.j41(0,"section",25)(1,"h2",26),t.EFF(2,"Application Insights"),t.k0s(),t.j41(3,"div",27),t.DNE(4,ge,1,1,"div",28)(5,me,1,1,"div",28),t.k0s()()),2&s){const e=t.XpG(2);t.R7$(4),t.Y8G("ngIf",e.userPieChartOptions),t.R7$(),t.Y8G("ngIf",e.userBarChartOptions)}}function be(s,n){1&s&&(t.j41(0,"div",30),t.EFF(1,"Loading charts..."),t.k0s())}function ve(s,n){if(1&s&&(t.qex(0),t.DNE(1,ce,4,0,"div",4)(2,le,7,2,"header",5)(3,he,4,0,"div",4)(4,de,3,0,"div",6)(5,pe,13,1,"section",7)(6,fe,6,2,"section",8)(7,be,2,0,"div",9),t.bVm()),2&s){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.isUserLoading),t.R7$(),t.Y8G("ngIf",!e.isUserLoading&&e.user),t.R7$(),t.Y8G("ngIf",e.isUserJobsLoading),t.R7$(),t.Y8G("ngIf",!e.isUserJobsLoading&&0===e.appliedJobs.length&&e.user),t.R7$(),t.Y8G("ngIf",!e.isUserJobsLoading&&e.appliedJobs.length>0),t.R7$(),t.Y8G("ngIf",!e.isChartLoading&&(e.userPieChartOptions||e.userBarChartOptions)),t.R7$(),t.Y8G("ngIf",e.isChartLoading)}}function ye(s,n){1&s&&(t.j41(0,"div",10),t.nrm(1,"div",11),t.j41(2,"div"),t.EFF(3,"Loading employer data..."),t.k0s()())}function Ce(s,n){if(1&s&&(t.j41(0,"p")(1,"strong"),t.EFF(2,"Company:"),t.k0s(),t.EFF(3),t.k0s()),2&s){const e=t.XpG(3);t.R7$(3),t.SpI(" ",null==e.employer?null:e.employer.company)}}function xe(s,n){if(1&s&&(t.j41(0,"div")(1,"h1",14),t.EFF(2),t.k0s(),t.j41(3,"p")(4,"strong"),t.EFF(5,"Email:"),t.k0s(),t.EFF(6),t.k0s(),t.DNE(7,Ce,4,1,"p",2),t.k0s()),2&s){const e=t.XpG(2);t.R7$(2),t.SpI("Welcome, ",null==e.employer?null:e.employer.name),t.R7$(4),t.SpI(" ",null==e.employer?null:e.employer.email),t.R7$(),t.Y8G("ngIf",null==e.employer?null:e.employer.company)}}function _e(s,n){1&s&&(t.j41(0,"div",10),t.nrm(1,"div",11),t.j41(2,"div"),t.EFF(3,"Loading job listings..."),t.k0s()())}function Ee(s,n){1&s&&(t.j41(0,"div",15)(1,"p"),t.EFF(2,"No jobs posted yet."),t.k0s()())}function Fe(s,n){if(1&s){const e=t.RV6();t.j41(0,"div",36),t.bIt("click",function(){const r=u.eBV(e).$implicit,o=t.XpG(3);return u.Njj(o.viewJobDetails(r._id))})("keyup.enter",function(){const r=u.eBV(e).$implicit,o=t.XpG(3);return u.Njj(o.viewJobDetails(r._id))}),t.j41(1,"div",37)(2,"div",38)(3,"h5",39),t.EFF(4),t.k0s(),t.j41(5,"p",40)(6,"strong"),t.EFF(7,"Applicants:"),t.k0s(),t.EFF(8),t.k0s(),t.j41(9,"p",40)(10,"strong"),t.EFF(11,"Vacancies:"),t.k0s(),t.EFF(12),t.k0s()()()()}if(2&s){const e=n.$implicit;t.BMQ("aria-label","Job listing for "+e.title+" with "+e.applicantCount+" applicants and "+e.vacancies+" vacancies"),t.R7$(4),t.JRh(e.title),t.R7$(4),t.SpI(" ",e.applicantCount),t.R7$(4),t.SpI(" ",e.vacancies)}}function De(s,n){if(1&s&&(t.j41(0,"div",34),t.DNE(1,Fe,13,4,"div",35),t.k0s()),2&s){const e=t.XpG(2);t.R7$(),t.Y8G("ngForOf",e.jobs)}}function Le(s,n){if(1&s&&t.nrm(0,"div",29),2&s){const e=t.XpG(3);t.Y8G("options",e.employerBarChartOptions)}}function Se(s,n){if(1&s&&t.nrm(0,"div",29),2&s){const e=t.XpG(3);t.Y8G("options",e.employerPieChartOptions)}}function we(s,n){if(1&s&&(t.j41(0,"section",25)(1,"h2",26),t.EFF(2,"Application Statistics"),t.k0s(),t.j41(3,"div",27),t.DNE(4,Le,1,1,"div",28)(5,Se,1,1,"div",28),t.k0s()()),2&s){const e=t.XpG(2);t.R7$(4),t.Y8G("ngIf",null==e.employerBarChartOptions||null==e.employerBarChartOptions.series?null:e.employerBarChartOptions.series.length),t.R7$(),t.Y8G("ngIf",null==e.employerPieChartOptions||null==e.employerPieChartOptions.series?null:e.employerPieChartOptions.series.length)}}function Ie(s,n){1&s&&(t.j41(0,"div",30),t.EFF(1,"Loading charts..."),t.k0s())}function je(s,n){if(1&s&&(t.qex(0),t.j41(1,"header",13),t.DNE(2,ye,4,0,"div",4)(3,xe,8,3,"div",2),t.k0s(),t.j41(4,"section",31)(5,"h2",32),t.EFF(6,"My Job Listings"),t.k0s(),t.DNE(7,_e,4,0,"div",4)(8,Ee,3,0,"div",6)(9,De,2,1,"div",33),t.k0s(),t.DNE(10,we,6,2,"section",8)(11,Ie,2,0,"div",9),t.bVm()),2&s){const e=t.XpG();t.R7$(2),t.Y8G("ngIf",e.isEmployerLoading),t.R7$(),t.Y8G("ngIf",!e.isEmployerLoading&&e.employer),t.R7$(4),t.Y8G("ngIf",e.isEmployerJobsLoading),t.R7$(),t.Y8G("ngIf",!e.isEmployerJobsLoading&&0===e.jobs.length),t.R7$(),t.Y8G("ngIf",!e.isEmployerJobsLoading&&e.jobs.length>0),t.R7$(),t.Y8G("ngIf",!e.isChartLoading),t.R7$(),t.Y8G("ngIf",e.isChartLoading)}}let Oe=(()=>{class s{authService;userService;employerService;jobService;router;role=null;token=null;isChartLoading=!1;userId=null;user=null;appliedJobs=[];userPieChartOptions={};userBarChartOptions={};isUserLoading=!1;isUserJobsLoading=!1;employerId=null;employer=null;jobs=[];employerPieChartOptions={};employerBarChartOptions={};isEmployerLoading=!1;isEmployerJobsLoading=!1;constructor(e,i,r,o,l){this.authService=e,this.userService=i,this.employerService=r,this.jobService=o,this.router=l}ngOnInit(){this.token=this.authService.getToken();const e=this.authService.getUser();this.token&&e?(this.role=e.role,"user"===this.role?(this.userId=e._id,this.loadUserData(),this.loadAppliedJobs(),this.fetchUserStatusChart(),this.fetchUserDomainChart()):"employer"===this.role&&(this.employerId=e._id,this.fetchEmployerData(),this.fetchEmployerJobs(),this.fetchEmployerBarChart(),this.fetchEmployerPieChart())):console.warn("No token or user found")}loadUserData(){this.isUserLoading=!0,this.userService.getUserData(this.userId).subscribe({next:e=>{this.user=e.user},error:e=>console.error("User data error:",e),complete:()=>this.isUserLoading=!1})}loadAppliedJobs(){this.isUserJobsLoading=!0,this.jobService.appliedJobs(this.userId).subscribe({next:e=>this.appliedJobs=e.jobs||e,error:e=>console.error("Applied jobs error:",e),complete:()=>this.isUserJobsLoading=!1})}fetchUserStatusChart(){this.isChartLoading=!0,this.userService.getUserStatusSummary(this.userId,this.token).subscribe({next:e=>{const i=Object.entries(e).map(([r,o])=>({name:r,value:o}));this.userPieChartOptions={title:{text:"Application Status",left:"left"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"right"},series:[{type:"pie",radius:"50%",data:i}]}},error:e=>console.error("Status chart error:",e),complete:()=>this.isChartLoading=!1})}fetchUserDomainChart(){this.isChartLoading=!0,this.userService.getDomainSummary(this.userId,this.token).subscribe({next:e=>{this.userBarChartOptions={title:{text:"Applications by Domain",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"5%",right:"5%",bottom:"5%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:e.map(i=>i.domain),axisLabel:{formatter:i=>i.length>20?i.slice(0,20)+"\u2026":i}},series:[{name:"Applications",type:"bar",data:e.map(i=>i.count),itemStyle:{color:"#91cc75"},label:{show:!0,position:"right"}}]}},error:e=>console.error("Domain chart error:",e),complete:()=>this.isChartLoading=!1})}fetchEmployerData(){this.isEmployerLoading=!0,this.employerService.getEmployerData(this.employerId,this.token).subscribe({next:e=>this.employer=e.employer,error:e=>console.error("Employer data error:",e),complete:()=>this.isEmployerLoading=!1})}fetchEmployerJobs(){this.isEmployerJobsLoading=!0,this.jobService.getJobSummaries(this.employerId,this.token).subscribe({next:e=>this.jobs=e,error:e=>console.error("Jobs error:",e),complete:()=>this.isEmployerJobsLoading=!1})}fetchEmployerBarChart(){this.jobService.getJobSummaries(this.employerId,this.token).subscribe({next:e=>{this.employerBarChartOptions={title:{text:"Applications per Job",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"5%",right:"5%",bottom:"5%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:e.map(i=>i.title),axisLabel:{formatter:i=>i.length>20?i.slice(0,20)+"\u2026":i}},series:[{type:"bar",data:e.map(i=>i.applicantCount),itemStyle:{color:"#5470C6"},label:{show:!0,position:"right"}}]}},error:e=>console.error("Bar chart error:",e)})}fetchEmployerPieChart(){this.employerService.getApplicationStatusSummary(this.employerId,this.token).subscribe({next:e=>{const i=Object.entries(e).map(([r,o])=>({name:r,value:o}));this.employerPieChartOptions={title:{text:"Application Status Distribution",left:"center"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{type:"pie",radius:"50%",data:i}]}},error:e=>console.error("Pie chart error:",e)})}viewJobDetails(e){this.router.navigate(["/employer/job-details"],{queryParams:{id:e}})}static \u0275fac=function(i){return new(i||s)(t.rXU(te.u),t.rXU(ie.D),t.rXU(ne.h),t.rXU(se.L),t.rXU(re.Ix))};static \u0275cmp=t.VBU({type:s,selectors:[["app-dashboard"]],features:[t.Jv_([I({echarts:()=>h.e(697).then(h.bind(h,9697))})])],decls:4,vars:3,consts:[[1,"container","my-5","p-4","bg-white","rounded","shadow","dashboard-container"],["class","text-center text-muted fst-italic mt-5","aria-live","polite",4,"ngIf"],[4,"ngIf"],["aria-live","polite",1,"text-center","text-muted","fst-italic","mt-5"],["class","d-flex justify-content-center align-items-center gap-3 py-3 text-secondary fw-bold",4,"ngIf"],["class","text-center mb-4",4,"ngIf"],["class","text-center text-muted fst-italic mt-5",4,"ngIf"],["class","mt-4",4,"ngIf"],["class","charts-section mt-5 p-4 bg-white rounded shadow",4,"ngIf"],["class","text-center fw-bold mt-4",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","gap-3","py-3","text-secondary","fw-bold"],["role","status",1,"spinner-border","text-secondary"],[1,"loading-text"],[1,"text-center","mb-4"],[1,"text-primary","mb-2"],[1,"text-center","text-muted","fst-italic","mt-5"],[1,"mt-4"],[1,"text-center","fs-4","fw-semibold","mb-3","border-bottom","pb-2"],[1,"table-responsive","rounded","shadow-sm"],[1,"table","table-striped","table-hover","table-borderless","align-middle","mb-0"],[1,"table-light"],["scope","col"],[4,"ngFor","ngForOf"],[1,"fw-medium","text-dark"],[1,"badge","px-3","py-2",3,"ngClass"],[1,"charts-section","mt-5","p-4","bg-white","rounded","shadow"],[1,"text-center","fs-4","fw-semibold","mb-4","border-bottom","pb-2"],[1,"d-flex","flex-column","flex-md-row","justify-content-around","gap-4","align-items-center"],["echarts","","class","chart w-100","style","max-width: 600px; height: 400px;",3,"options",4,"ngIf"],["echarts","",1,"chart","w-100",2,"max-width","600px","height","400px",3,"options"],[1,"text-center","fw-bold","mt-4"],["aria-labelledby","jobListingsHeading"],["id","jobListingsHeading",1,"text-center","fs-4","fw-semibold","mb-4","border-bottom","pb-2"],["class","row g-3",4,"ngIf"],[1,"row","g-3"],["class","col-md-6 col-lg-4","role","listitem","tabindex","0",3,"click","keyup.enter",4,"ngFor","ngForOf"],["role","listitem","tabindex","0",1,"col-md-6","col-lg-4",3,"click","keyup.enter"],[1,"card","h-100","shadow-sm","border-2","cursor-pointer","job-tile"],[1,"card-body"],[1,"card-title","text-primary"],[1,"card-text"]],template:function(i,r){1&i&&(t.j41(0,"div",0),t.DNE(1,ae,3,0,"div",1)(2,ve,8,7,"ng-container",2)(3,je,12,7,"ng-container",2),t.k0s()),2&i&&(t.R7$(),t.Y8G("ngIf",!r.token),t.R7$(),t.Y8G("ngIf",r.token&&"user"===r.role),t.R7$(),t.Y8G("ngIf",r.token&&"employer"===r.role))},dependencies:[b.MD,b.YU,b.Sq,b.bT,R.YN,ee,q],styles:[".job-tile[_ngcontent-%COMP%]{cursor:pointer}.job-tile[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 18px #0000001f}"]})}return s})()}}]);