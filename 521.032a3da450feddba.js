"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[521],{4521:(M,d,t)=>{t.r(d),t.d(d,{EmployerDashboardComponent:()=>I});var p=t(6396),c=t(4341),e=t(7325),l=t(5113),m=t(7457),_=t(7127),g=t(7472),h=t(5738);function b(n,i){1&n&&(e.j41(0,"div",7),e.nrm(1,"div",8),e.j41(2,"div",9),e.EFF(3,"Loading employer data..."),e.k0s()())}function f(n,i){if(1&n&&(e.j41(0,"p")(1,"strong"),e.EFF(2,"Company:"),e.k0s(),e.EFF(3),e.k0s()),2&n){const o=e.XpG(3);e.R7$(3),e.SpI(" ",null==o.employer?null:o.employer.company)}}function y(n,i){if(1&n&&(e.j41(0,"div")(1,"h1"),e.EFF(2),e.k0s(),e.j41(3,"p")(4,"strong"),e.EFF(5,"Email:"),e.k0s(),e.EFF(6),e.k0s(),e.DNE(7,f,4,1,"p",6),e.k0s()),2&n){const o=e.XpG(2);e.R7$(2),e.SpI("Welcome, ",null==o.employer?null:o.employer.name),e.R7$(4),e.SpI(" ",null==o.employer?null:o.employer.email),e.R7$(),e.Y8G("ngIf",null==o.employer?null:o.employer.company)}}function u(n,i){if(1&n&&(e.j41(0,"header",4),e.DNE(1,b,4,0,"div",5)(2,y,8,3,"div",6),e.k0s()),2&n){const o=e.XpG();e.R7$(),e.Y8G("ngIf",o.isEmployerLoading),e.R7$(),e.Y8G("ngIf",!o.isEmployerLoading&&o.employer)}}function v(n,i){1&n&&(e.j41(0,"div",7),e.nrm(1,"div",8),e.j41(2,"div",9),e.EFF(3,"Loading job listings..."),e.k0s()())}function E(n,i){1&n&&(e.j41(0,"div",14)(1,"p"),e.EFF(2,"No jobs posted yet."),e.k0s()())}function x(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",17),e.bIt("click",function(){const r=l.eBV(o).$implicit,a=e.XpG(3);return l.Njj(a.viewJobDetails(r._id))})("keyup.enter",function(){const r=l.eBV(o).$implicit,a=e.XpG(3);return l.Njj(a.viewJobDetails(r._id))}),e.j41(1,"h4"),e.EFF(2),e.k0s(),e.j41(3,"p")(4,"strong"),e.EFF(5,"Applicants:"),e.k0s(),e.EFF(6),e.k0s(),e.j41(7,"p")(8,"strong"),e.EFF(9,"Vacancies:"),e.k0s(),e.EFF(10),e.k0s()()}if(2&n){const o=i.$implicit;e.BMQ("aria-label","Job listing for "+o.title+" with "+o.applicantCount+" applicants and "+o.vacancies+" vacancies"),e.R7$(2),e.JRh(o.title),e.R7$(4),e.SpI(" ",o.applicantCount),e.R7$(4),e.SpI(" ",o.vacancies)}}function j(n,i){if(1&n&&(e.j41(0,"div",15),e.DNE(1,x,11,4,"div",16),e.k0s()),2&n){const o=e.XpG(2);e.R7$(),e.Y8G("ngForOf",o.jobs)}}function C(n,i){if(1&n&&(e.j41(0,"section",10)(1,"h2",11),e.EFF(2,"My Job Listings"),e.k0s(),e.DNE(3,v,4,0,"div",5)(4,E,3,0,"div",12)(5,j,2,1,"div",13),e.k0s()),2&n){const o=e.XpG();e.R7$(3),e.Y8G("ngIf",o.isJobsLoading),e.R7$(),e.Y8G("ngIf",!o.isJobsLoading&&0===o.jobs.length),e.R7$(),e.Y8G("ngIf",!o.isJobsLoading&&o.jobs.length>0)}}function D(n,i){1&n&&(e.j41(0,"div",18)(1,"p"),e.EFF(2,"Please login to access the site."),e.k0s()())}let I=(()=>{class n{jobService;employerService;authService;router;employer=null;employerId=null;token=null;jobs=[];isEmployerLoading=!1;isJobsLoading=!1;constructor(o,s,r,a){this.jobService=o,this.employerService=s,this.authService=r,this.router=a}ngOnInit(){this.token=this.authService.getToken(),this.employerId=this.authService.getUserId(),this.token&&this.employerId?(this.fetchEmployerData(),this.fetchJobSummaries()):console.warn("Missing token or employer ID.")}fetchEmployerData(){!this.employerId||!this.token||(this.isEmployerLoading=!0,this.employerService.getEmployerData(this.employerId,this.token).subscribe({next:o=>{this.employer=o.employer,console.log("Employer loaded:",this.employer)},error:o=>{console.error("Failed to load employer data:",o)},complete:()=>{this.isEmployerLoading=!1}}))}fetchJobSummaries(){!this.employerId||!this.token||(this.isJobsLoading=!0,this.jobService.getJobSummaries(this.employerId,this.token).subscribe({next:o=>{this.jobs=o,console.log("Jobs loaded:",this.jobs)},error:o=>{console.error("Failed to load job summaries:",o)},complete:()=>{this.isJobsLoading=!1}}))}viewJobDetails(o){this.router.navigate(["/employer/job-details"],{queryParams:{id:o}})}static \u0275fac=function(s){return new(s||n)(e.rXU(m.L),e.rXU(_.h),e.rXU(g.u),e.rXU(h.Ix))};static \u0275cmp=e.VBU({type:n,selectors:[["app-employer-dashboard"]],decls:4,vars:3,consts:[["role","main",1,"dashboard-container"],["class","dashboard-header",4,"ngIf"],["aria-labelledby","jobListingsHeading",4,"ngIf"],["class","no-data","aria-live","polite",4,"ngIf"],[1,"dashboard-header"],["class","spinner-container",4,"ngIf"],[4,"ngIf"],[1,"spinner-container"],[1,"spinner"],[1,"loading-text"],["aria-labelledby","jobListingsHeading"],["id","jobListingsHeading",1,"section-title"],["class","no-jobs",4,"ngIf"],["class","job-grid","role","list",4,"ngIf"],[1,"no-jobs"],["role","list",1,"job-grid"],["class","job-tile","role","listitem","tabindex","0",3,"click","keyup.enter",4,"ngFor","ngForOf"],["role","listitem","tabindex","0",1,"job-tile",3,"click","keyup.enter"],["aria-live","polite",1,"no-data"]],template:function(s,r){1&s&&(e.j41(0,"div",0),e.DNE(1,u,3,2,"header",1)(2,C,6,3,"section",2)(3,D,3,0,"div",3),e.k0s()),2&s&&(e.R7$(),e.Y8G("ngIf",r.token),e.R7$(),e.Y8G("ngIf",r.token),e.R7$(),e.Y8G("ngIf",!r.token))},dependencies:[p.MD,p.Sq,p.bT,c.YN],styles:[".dashboard-container[_ngcontent-%COMP%]{max-width:1100px;margin:40px auto;padding:24px;background-color:#fff;border-radius:12px;box-shadow:0 6px 18px #0000001a}.dashboard-header[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:10px;font-size:28px;color:#0073e6}.dashboard-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:16px;color:#444}.section-title[_ngcontent-%COMP%]{font-size:22px;margin-bottom:16px;color:#333;border-bottom:2px solid #e0e0e0;padding-bottom:4px}.spinner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;font-weight:700;color:#555}.spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:4px solid #ccc;border-top:4px solid #555;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-text[_ngcontent-%COMP%]{font-size:1rem}.job-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}.job-tile[_ngcontent-%COMP%]{background:#f8f9fa;padding:16px;border-radius:8px;cursor:pointer;transition:box-shadow .2s,transform .2s;border:1px solid #ddd}.job-tile[_ngcontent-%COMP%]:hover{box-shadow:0 4px 10px #0000001a;transform:translateY(-2px)}.job-tile[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;color:#0073e6}.job-tile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:14px;color:#333}.no-jobs[_ngcontent-%COMP%], .no-data[_ngcontent-%COMP%]{text-align:center;font-size:16px;color:#666;margin-top:40px}"]})}return n})()}}]);