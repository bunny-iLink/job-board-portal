"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[205],{205:(C,g,i)=>{i.r(g),i.d(g,{LoginComponent:()=>b});var t=i(4341),c=i(6396),d=i(5312),n=i(7325),p=i(9085),u=i(5738);function m(r,f){1&r&&(n.j41(0,"div")(1,"small",12),n.EFF(2,"Email is required and must be valid."),n.k0s()())}function _(r,f){1&r&&(n.j41(0,"div")(1,"small",12),n.EFF(2,"Password is required."),n.k0s()())}let b=(()=>{class r{fb;http;router;loginForm;showPassword=!1;constructor(l,e,o){this.fb=l,this.http=e,this.router=o,this.loginForm=this.fb.group({email:["",[t.k0.required,t.k0.email]],password:["",[t.k0.required]]})}togglePassword(){this.showPassword=!this.showPassword}goToRegister(){this.router.navigate(["/register"])}onSubmit(){this.loginForm.invalid||this.http.post(d.c.apiUrl+"/api/login",this.loginForm.value).subscribe({next:e=>{alert("Login successful!"),console.log(e),typeof window<"u"&&(localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.user)));const o=e.user?.role;o?this.router.navigate([`/${o}/dashboard`]):(console.warn("User role not found. Redirecting to fallback..."),this.router.navigate(["/"]))},error:e=>{alert("Login failed. Please check your credentials.")}})}static \u0275fac=function(e){return new(e||r)(n.rXU(t.ok),n.rXU(p.Qq),n.rXU(u.Ix))};static \u0275cmp=n.VBU({type:r,selectors:[["app-login"]],decls:24,vars:5,consts:[[1,"auth-page"],[1,"auth-overlay"],[1,"login-container"],[3,"ngSubmit","formGroup"],["type","email","formControlName","email","required",""],[4,"ngIf"],[1,"password-wrapper"],["formControlName","password","required","",3,"type"],["type","button",3,"click"],["type","submit",3,"disabled"],[1,"register-link"],[3,"click"],[1,"invalid-feedback"]],template:function(e,o){if(1&e&&(n.j41(0,"div",0),n.nrm(1,"div",1),n.j41(2,"div",2)(3,"form",3),n.bIt("ngSubmit",function(){return o.onSubmit()}),n.j41(4,"h2"),n.EFF(5,"Login"),n.k0s(),n.j41(6,"label"),n.EFF(7,"Email:"),n.k0s(),n.nrm(8,"input",4),n.DNE(9,m,3,0,"div",5),n.j41(10,"label"),n.EFF(11,"Password:"),n.k0s(),n.j41(12,"div",6),n.nrm(13,"input",7),n.j41(14,"button",8),n.bIt("click",function(){return o.togglePassword()}),n.EFF(15," \u{1f441} "),n.k0s()(),n.DNE(16,_,3,0,"div",5),n.j41(17,"button",9),n.EFF(18,"Login"),n.k0s(),n.j41(19,"div",10)(20,"span"),n.EFF(21,"New user? "),n.k0s(),n.j41(22,"a",11),n.bIt("click",function(){return o.goToRegister()}),n.EFF(23,"Click here"),n.k0s()()()()()),2&e){let a,s;n.R7$(3),n.Y8G("formGroup",o.loginForm),n.R7$(6),n.Y8G("ngIf",(null==(a=o.loginForm.get("email"))?null:a.invalid)&&(null==(a=o.loginForm.get("email"))?null:a.touched)),n.R7$(4),n.Y8G("type",o.showPassword?"text":"password"),n.R7$(3),n.Y8G("ngIf",(null==(s=o.loginForm.get("password"))?null:s.invalid)&&(null==(s=o.loginForm.get("password"))?null:s.touched)),n.R7$(),n.Y8G("disabled",o.loginForm.invalid)}},dependencies:[c.MD,c.bT,t.X1,t.qT,t.me,t.BC,t.cb,t.YS,t.j4,t.JD],styles:[".auth-page[_ngcontent-%COMP%]{position:relative;min-height:100vh;background-image:url(https://images.unsplash.com/photo-1629904853716-f0bc54eea481?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D);background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center}.auth-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#00000080;z-index:1}.login-container[_ngcontent-%COMP%]{position:relative;z-index:2;width:90%}.login-container[_ngcontent-%COMP%]{max-width:400px;margin:60px auto;padding:32px;background-color:#fff;border-radius:12px;box-shadow:0 6px 18px #0000001a}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px;font-size:26px;color:#0073e6}.login-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:#333;font-size:14px}.login-container[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;padding:10px 12px;margin-bottom:16px;border:1px solid #ccc;border-radius:6px;font-size:14px;box-sizing:border-box;transition:border .3s}.login-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0073e6}.password-wrapper[_ngcontent-%COMP%]{position:relative}.password-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:50%;right:8px;transform:translateY(-50%);background:none;border:none;font-size:18px;cursor:pointer;color:#666}.login-container[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#0073e6;color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:700;cursor:pointer;transition:background-color .3s}.login-container[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#005bb5}.login-container[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#9ec9f5;cursor:not-allowed}.invalid-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:13px;margin-top:-12px;margin-bottom:12px;display:block}.register-link[_ngcontent-%COMP%]{text-align:center;margin-top:16px;font-size:14px;color:#333}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#0073e6;cursor:pointer;text-decoration:underline}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{margin:40px 16px;padding:24px}}"]})}return r})()}}]);