"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[630],{8630:(E,c,p)=>{p.r(c),p.d(c,{EmployerProfileComponent:()=>b});var d=p(6396),a=p(4341),u=p(5312),e=p(7325),i=p(5113),m=p(9085),g=p(5738),f=p(7472);function _(l,s){1&l&&(e.j41(0,"div",4),e.EFF(1,"Loading profile..."),e.k0s())}function y(l,s){if(1&l&&(e.j41(0,"div",5),e.EFF(1),e.k0s()),2&l){const o=e.XpG();e.R7$(),e.JRh(o.error)}}function h(l,s){if(1&l&&e.nrm(0,"img",53),2&l){const o=e.XpG(2);e.Y8G("src","data:"+o.employer.profilePicture.contentType+";base64,"+o.employer.profilePicture.data,e.B4B)}}function M(l,s){1&l&&(e.j41(0,"div",54),e.EFF(1," No profile picture "),e.k0s())}function C(l,s){if(1&l&&(e.j41(0,"div",55),e.EFF(1),e.k0s()),2&l){const o=e.XpG(2);e.R7$(),e.JRh(o.success)}}function P(l,s){if(1&l){const o=e.RV6();e.j41(0,"form",6),e.bIt("ngSubmit",function(){i.eBV(o);const n=e.XpG();return i.Njj(n.updateProfile())}),e.j41(1,"h2",7),e.EFF(2,"Employer Profile"),e.k0s(),e.j41(3,"div",8)(4,"div",9),e.DNE(5,h,1,1,"img",10)(6,M,2,0,"div",11),e.k0s(),e.j41(7,"div",12)(8,"label",13),e.EFF(9,"Upload profile picture"),e.k0s(),e.j41(10,"input",14),e.bIt("change",function(n){i.eBV(o);const t=e.XpG();return i.Njj(t.onProfilePictureSelected(n))}),e.k0s(),e.j41(11,"span",15),e.EFF(12,"Accepts JPG, PNG or GIF images"),e.k0s()()(),e.j41(13,"div",16)(14,"label",17),e.EFF(15," Name: "),e.j41(16,"input",18),e.mxI("ngModelChange",function(n){i.eBV(o);const t=e.XpG();return e.DH7(t.employer.name,n)||(t.employer.name=n),i.Njj(n)}),e.k0s()()(),e.j41(17,"div",16)(18,"label",19),e.EFF(19," Email: "),e.j41(20,"input",20),e.mxI("ngModelChange",function(n){i.eBV(o);const t=e.XpG();return e.DH7(t.employer.email,n)||(t.employer.email=n),i.Njj(n)}),e.k0s()()(),e.j41(21,"div",16)(22,"label",21),e.EFF(23," Password: "),e.j41(24,"input",22),e.mxI("ngModelChange",function(n){i.eBV(o);const t=e.XpG();return e.DH7(t.employer.password,n)||(t.employer.password=n),i.Njj(n)}),e.k0s(),e.j41(25,"span",23),e.EFF(26,"Leave blank to keep current password"),e.k0s()()(),e.j41(27,"div",16)(28,"label",24),e.EFF(29," Role: "),e.j41(30,"input",25),e.mxI("ngModelChange",function(n){i.eBV(o);const t=e.XpG();return e.DH7(t.employer.role,n)||(t.employer.role=n),i.Njj(n)}),e.k0s()()(),e.j41(31,"div",16)(32,"label",26),e.EFF(33," Company: "),e.j41(34,"input",27),e.mxI("ngModelChange",function(n){i.eBV(o);const t=e.XpG();return e.DH7(t.employer.company,n)||(t.employer.company=n),i.Njj(n)}),e.k0s()()(),e.j41(35,"div",16)(36,"label",28),e.EFF(37," Experience (years): "),e.j41(38,"input",29),e.mxI("ngModelChange",function(n){i.eBV(o);const t=e.XpG();return e.DH7(t.employer.experience,n)||(t.employer.experience=n),i.Njj(n)}),e.k0s()()(),e.j41(39,"div",16)(40,"label",30),e.EFF(41," Designation: "),e.j41(42,"input",31),e.mxI("ngModelChange",function(n){i.eBV(o);const t=e.XpG();return e.DH7(t.employer.designation,n)||(t.employer.designation=n),i.Njj(n)}),e.k0s()()(),e.j41(43,"div",16)(44,"label",32),e.EFF(45," Domain: "),e.j41(46,"select",33),e.mxI("ngModelChange",function(n){i.eBV(o);const t=e.XpG();return e.DH7(t.employer.domain,n)||(t.employer.domain=n),i.Njj(n)}),e.j41(47,"option",34),e.EFF(48,"Select preferred domain"),e.k0s(),e.j41(49,"option",35),e.EFF(50,"Technology & IT"),e.k0s(),e.j41(51,"option",36),e.EFF(52,"Sales & Marketing"),e.k0s(),e.j41(53,"option",37),e.EFF(54,"Business & Management"),e.k0s(),e.j41(55,"option",38),e.EFF(56,"Finance & Accounting"),e.k0s(),e.j41(57,"option",39),e.EFF(58,"Human Resources & Recruitment"),e.k0s(),e.j41(59,"option",40),e.EFF(60,"Healthcare & Life Sciences"),e.k0s(),e.j41(61,"option",41),e.EFF(62,"Education & Training"),e.k0s(),e.j41(63,"option",42),e.EFF(64,"Engineering & Manufacturing"),e.k0s(),e.j41(65,"option",43),e.EFF(66,"Creative & Design"),e.k0s(),e.j41(67,"option",44),e.EFF(68,"Legal & Compliance"),e.k0s(),e.j41(69,"option",45),e.EFF(70,"Media & Communication"),e.k0s(),e.j41(71,"option",46),e.EFF(72,"Logistics & Supply Chain"),e.k0s(),e.j41(73,"option",47),e.EFF(74,"Customer Service & Support"),e.k0s()(),e.j41(75,"span",48),e.EFF(76,"Select your primary business domain"),e.k0s()()(),e.j41(77,"div",49)(78,"button",50),e.EFF(79,"Save Changes"),e.k0s(),e.j41(80,"button",51),e.bIt("click",function(){i.eBV(o);const n=e.XpG();return i.Njj(n.deleteProfile())}),e.EFF(81," Delete Profile "),e.k0s()(),e.DNE(82,C,2,1,"div",52),e.k0s()}if(2&l){const o=e.XpG();e.R7$(5),e.Y8G("ngIf",(null==o.employer||null==o.employer.profilePicture?null:o.employer.profilePicture.data)&&(null==o.employer||null==o.employer.profilePicture?null:o.employer.profilePicture.contentType)),e.R7$(),e.Y8G("ngIf",!(null!=o.employer&&null!=o.employer.profilePicture&&o.employer.profilePicture.data)),e.R7$(10),e.R50("ngModel",o.employer.name),e.R7$(4),e.R50("ngModel",o.employer.email),e.R7$(4),e.R50("ngModel",o.employer.password),e.R7$(6),e.R50("ngModel",o.employer.role),e.R7$(4),e.R50("ngModel",o.employer.company),e.R7$(4),e.R50("ngModel",o.employer.experience),e.R7$(4),e.R50("ngModel",o.employer.designation),e.R7$(4),e.R50("ngModel",o.employer.domain),e.R7$(36),e.Y8G("ngIf",o.success)}}let b=(()=>{class l{http;router;authService;employerId=null;employer=null;loading=!1;error="";success="";token=null;selectedBase64=null;selectedMimeType=null;previewImage=null;apiBase=u.c.apiUrl+"/api";constructor(o,r,n){this.http=o,this.router=r,this.authService=n}ngOnInit(){this.employerId=this.authService.getUserId(),this.token=this.authService.getToken(),this.employerId?this.fetchEmployer():this.error="No employer ID found."}fetchEmployer(){this.loading=!0,this.http.get(`${this.apiBase}/getEmployerData/${this.employerId}`).subscribe({next:o=>{this.employer=o.employer,this.employer&&(this.employer.password=""),this.loading=!1},error:()=>{this.error="Failed to load employer data.",this.loading=!1}})}updateProfile(){if(!this.employerId)return;this.success="",this.error="";const o={...this.employer};o.updatedAt=(new Date).toISOString(),(!o.password||""===o.password.trim())&&delete o.password,this.selectedBase64&&this.selectedMimeType&&(o.profilePicture={data:this.selectedBase64,contentType:this.selectedMimeType}),this.http.put(`${this.apiBase}/updateEmployer/${this.employerId}`,o,{headers:{Authorization:`Bearer ${this.token}`}}).subscribe({next:()=>{this.success="Profile updated successfully!",this.previewImage=null,this.selectedBase64=null,this.selectedMimeType=null},error:()=>{this.error="Failed to update profile."}})}deleteProfile(){this.employerId&&confirm("Are you sure you want to delete your profile? This action cannot be undone.")&&this.http.delete(`${this.apiBase}/deleteEmployer/${this.employerId}`,{headers:{Authorization:`Bearer ${this.token}`}}).subscribe({next:()=>{alert("Profile deleted successfully."),typeof window<"u"&&(localStorage.removeItem("id"),localStorage.removeItem("token")),this.router.navigate(["/login"])},error:()=>{this.error="Failed to delete profile."}})}onProfilePictureSelected(o){const r=o.target.files[0];if(!r)return;if(r.size>2097152)return void alert("File size must be less than 2MB");const n=new FileReader;n.onload=()=>{const t=n.result.split(",")[1];this.selectedBase64=t,this.selectedMimeType=r.type,this.previewImage=`data:${r.type};base64,${t}`},n.onerror=()=>{this.error="Failed to read image file."},n.readAsDataURL(r)}static \u0275fac=function(r){return new(r||l)(e.rXU(m.Qq),e.rXU(g.Ix),e.rXU(f.u))};static \u0275cmp=e.VBU({type:l,selectors:[["app-employer-profile"]],decls:4,vars:3,consts:[["class","loading","aria-live","polite","aria-busy","true",4,"ngIf"],["class","error","aria-live","assertive",4,"ngIf"],[1,"profile-container"],["aria-labelledby","profileHeading",3,"ngSubmit",4,"ngIf"],["aria-live","polite","aria-busy","true",1,"loading"],["aria-live","assertive",1,"error"],["aria-labelledby","profileHeading",3,"ngSubmit"],["id","profileHeading"],[1,"profile-picture-section"],[1,"current-picture"],["alt","Profile Picture","class","profile-picture","aria-describedby","pictureDescription",3,"src",4,"ngIf"],["class","no-picture","id","pictureDescription",4,"ngIf"],[1,"upload-section"],["for","profilePictureUpload",1,"visually-hidden"],["id","profilePictureUpload","type","file","accept","image/*","aria-describedby","pictureUploadHelp",3,"change"],["id","pictureUploadHelp",1,"visually-hidden"],[1,"form-group"],["for","name"],["id","name","type","text","name","name","required","","aria-required","true",3,"ngModelChange","ngModel"],["for","email"],["id","email","type","email","name","email","required","","aria-required","true",3,"ngModelChange","ngModel"],["for","password"],["id","password","type","password","name","password","aria-describedby","passwordHelp",3,"ngModelChange","ngModel"],["id","passwordHelp",1,"visually-hidden"],["for","role"],["id","role","type","text","name","role","readonly","","aria-readonly","true",3,"ngModelChange","ngModel"],["for","company"],["id","company","type","text","name","companyName",3,"ngModelChange","ngModel"],["for","experience"],["id","experience","type","number","name","experience",3,"ngModelChange","ngModel"],["for","designation"],["id","designation","type","text","name","designation",3,"ngModelChange","ngModel"],["for","domain"],["id","domain","name","domain","aria-describedby","domainHelp",3,"ngModelChange","ngModel"],["value",""],["value","Technology & IT"],["value","Sales & Marketing"],["value","Business & Management"],["value","Finance & Accounting"],["value","Human Resources & Recruitment"],["value","Healthcare & Life Sciences"],["value","Education & Training"],["value","Engineering & Manufacturing"],["value","Creative & Design"],["value","Legal & Compliance"],["value","Media & Communication"],["value","Logistics & Supply Chain"],["value","Customer Service & Support"],["id","domainHelp",1,"visually-hidden"],["role","group","aria-label","Form actions",1,"buttons"],["type","submit"],["type","button","aria-label","Delete profile permanently",1,"delete-btn",3,"click"],["class","success","aria-live","polite",4,"ngIf"],["alt","Profile Picture","aria-describedby","pictureDescription",1,"profile-picture",3,"src"],["id","pictureDescription",1,"no-picture"],["aria-live","polite",1,"success"]],template:function(r,n){1&r&&(e.DNE(0,_,2,0,"div",0)(1,y,2,1,"div",1),e.j41(2,"div",2),e.DNE(3,P,83,11,"form",3),e.k0s()),2&r&&(e.Y8G("ngIf",n.loading),e.R7$(),e.Y8G("ngIf",n.error),e.R7$(2),e.Y8G("ngIf",!n.loading&&!n.error))},dependencies:[d.MD,d.bT,a.YN,a.qT,a.xH,a.y7,a.me,a.Q0,a.wz,a.BC,a.cb,a.YS,a.vS,a.cV],styles:[".loading[_ngcontent-%COMP%], .error[_ngcontent-%COMP%], .success[_ngcontent-%COMP%]{text-align:center;margin:20px;font-size:16px;font-weight:500}.loading[_ngcontent-%COMP%]{color:#007bff}.error[_ngcontent-%COMP%]{color:#dc3545}.success[_ngcontent-%COMP%]{color:#28a745}.profile-container[_ngcontent-%COMP%]{max-width:600px;margin:40px auto;background-color:#fff;padding:30px;border-radius:12px;box-shadow:0 6px 20px #00000014;font-family:Segoe UI,sans-serif}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;color:#333}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:16px;font-weight:500;color:#444}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:14px;border-radius:6px;border:1px solid #ccc;box-sizing:border-box;margin-top:6px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:read-only{background-color:#f5f5f5}.profile-picture-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-bottom:20px}.current-picture[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:8px;background-color:#eee;display:flex;justify-content:center;align-items:center;overflow:hidden}.profile-picture[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.no-picture[_ngcontent-%COMP%]{font-size:12px;color:#888;text-align:center}.upload-section[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{margin-bottom:8px}.upload-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#0073e6;color:#fff;padding:8px 14px;font-size:14px;border:none;border-radius:6px;cursor:pointer;transition:background .3s ease}.upload-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#005bb5}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:30px}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:6px;font-size:15px;cursor:pointer;transition:background .3s ease}.buttons[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.buttons[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#218838}.delete-btn[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#c82333}.visually-hidden[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}"]})}return l})()}}]);